!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var r in o)("object"==typeof exports?exports:e)[r]=o[r]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=67)}([function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Core=void 0;var n=o(4),a=o(7),i=o(8),s=o(16),u=null,l=function e(){return r(this,e),u||(u=this),this.Logger=n.Logger,this.PubSub=a.PubSub,this.Utilities=i.Utilities,this.Cookies=s.Cookies,u};t.Core=new l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(0);"undefined"==typeof vtodisableVTO&&(window.disableVTO=!1);var n={version:"3.8",vtoCookieName:"xvtouser",vtoRenderStatusCookieName:"vtorenderstatus",vtoRedirectCookieName:"xvtoredirect",vtoReferrerCookieName:"vtoreferrer",vtoDebugCookieName:"vtojsdebug",RBVTOSocialCookieName:"RBVTOSocial",cookieExpirationDays:11,debug:function(e){this.debugMode()&&console.debug(e)},debugMode:function(){return"true"===this.readCookie(n.vtoDebugCookieName)},vtoPDPInitialization:function(){console.warn("Standard vto PDP initialization."),window.vtopdpapp=null,n.isVTOAvailable()&&(window.vtopdpapp=new n.VTOPDPApp({}))},isVTOAvailable:function(){return!0},isLoggedInUser:function(){var e=n.getVTOUserData();return!!e&&(e.vtoSystemUserType&&"g"!==e.vtoSystemUserType.toLowerCase())},isHardDeleteAvailable:function(){var e=$("#vtoHardDelete").val();return e&&"true"===e.toLowerCase()},showPrivacyLink:function(){var e=$("#vtoShowPrivacyLink").val();return e&&"true"===e.toLowerCase()},onPrivacyPolicy:function(){throw Error("onPrivacyPolicy not implemented.")},getGlassesUpc:function(){throw Error("getGlassesUpc not implemented.")},onStartVTOButtonShow:function(){},onTogglerOn:function(){},onTogglerOff:function(){},onError:function(){},onSaveToAccount:function(e,t,o){throw Error("onSaveToAccount not implemented.")},onContinueWithoutSaving:function(e,t,o){var r=n.getVTORedirectCookie();n.debug("Redirect to PDP or Portal"),r||(r="/"),window.location=r},deleteVTODataFromBackend:function(e,t,o,r){return $.ajax({type:"POST",url:e,data:{vtoSystemUserId:t,vtoUserId:o,vtoVideoId:r},dataType:"json"})},MyVirtualModelFlow:function(e,t){var o=this.getVTOUserData(),r=this,n=o&&o.vtoVideoId?"deleteAction":"continueAction";({continueAction:function(){$(".vto-delete-video").hide(),$(".vto-continue-shopping").show()},deleteAction:function(){$(".vto-delete-video").show(),$(".vto-continue-shopping").hide()}})[n](),t||($(".vto-delete-video").on("click",function(){window.vtopdpapp.deleteVtoFlow(function(t){o.isVideoSaved?r.deleteVTODataFromBackend(e,t.vtoSystemUserId,t.vtoUserId,t.vtoVideoId).always(function(){r.MyVirtualModelFlow(e,!0)}):r.MyVirtualModelFlow(e,!0)})}),$(".vto-continue-shopping").on("click",function(){window.location.href="/"}))},retrieveUserData:function(e){return $.ajax({type:"GET",url:e,dataType:"json"}).done(function(e){var t=null,o="",r=!1;n.debug("retrieveUserData: get VTO user detail success from BE."),e||n.debug("retrieveUserData: no ajax response for user details."),e.isAnonymous||(t=e.vtoUserUUID,o=e.vtoVideoUUID,r=!!o),n.updateVTOUserData(t,o,n.getGlassesUpc(),e.userId,e.isAnonymous?"g":"r",r)}).fail(function(){n.debug("retrieveUserData: Error on retrieving user data"),n.debug("vtoPDPInitialization failed")})},getXVTOUserCookie:function(){var e=n.readCookie(n.vtoCookieName),t={hasCookie:!1,vtoSystemUserId:null,vtoSystemUserType:null,vtoUserId:null,vtoVideoId:null,upc:null,isVideoSaved:!1},o=void 0,r=0;return e&&(o=e.split("|"),r=o.length,t.vtoSystemUserId=o[0],t.vtoUserId=o[1],t.vtoVideoId=o[2],t.upc=r>6?o.slice(3,r-2).join("|"):o[3],t.vtoSystemUserType=o[r-2],t.isVideoSaved="true"===o[r-1],t.hasCookie=!0),t},setXVTOUserCookie:function(e,t,o,r,a,i){n.createCookie(n.vtoCookieName,e+"|"+o+"|"+r+"|"+a+"|"+t+"|"+i,n.cookieExpirationDays)},setVTORedirectCookie:function(e){n.debug("Set "+n.vtoRedirectCookieName+" Cookie"),n.createCookie(n.vtoRedirectCookieName,e,n.cookieExpirationDays)},getVTORedirectCookie:function(){return n.readCookie(n.vtoRedirectCookieName)},setVTOReferrerCookie:function(e){n.debug("Set "+n.vtoReferrerCookieName+" Cookie"),n.createCookie(n.vtoReferrerCookieName,e,n.cookieExpirationDays)},getVTOReferrerCookie:function(){return n.readCookie(n.vtoReferrerCookieName)},getVTOUserData:function(){var e=n.getXVTOUserCookie();return e.hasCookie?{vtoSystemUserId:e.vtoSystemUserId,vtoSystemUserType:e.vtoSystemUserType,vtoUserId:e.vtoUserId,vtoVideoId:e.vtoVideoId,upc:e.upc,isVideoSaved:e.isVideoSaved}:null},updateVTOUserData:function(e,t,o,r,a,i){for(var s=n.getXVTOUserCookie(),u=[{name:"vtoUserId",value:e},{name:"vtoVideoId",value:t},{name:"upc",value:o},{name:"vtoSystemUserId",value:r},{name:"vtoSystemUserType",value:a},{name:"isVideoSaved",value:i}],l={vtoUserId:"",vtoVideoId:"",upc:"",vtoSystemUserId:"",vtoSystemUserType:"",isVideoSaved:""},d=0;d<u.length;d+=1){var c=u[d];l[c.name]=function(e){return e||""}(c.value?c.value:s[c.name])}n.setXVTOUserCookie(l.vtoSystemUserId,l.vtoSystemUserType,l.vtoUserId,l.vtoVideoId,l.upc,l.isVideoSaved)},createCookie:function(e,t,o){r.Core.Cookies.set(e,t,o)},readCookie:function(e){return r.Core.Cookies.get(e)},deleteCookie:function(e){r.Core.Cookies.remove(e)},getUrlParameter:function(e){return r.Core.Utilities.getUrlParameter(e)},changeUpc:function(e){var t=window.vtopdpapp;e&&t&&t.VTOInitialized&&t.renderGlassesFlow&&t.renderGlassesFlow(e)},VTOPDPApp:function(e){this.init(e)}};void 0===window.VTOIntegration?window.VTOIntegration=n:window.VTOIntegration=$.extend(window.VTOIntegration,n),n.VTOPDPApp.prototype={VTO_STATE:{DISABLED:"vto-state-disabled",ENABLED:"vto-state-enabled",CAPTURING:"vto-state-capturing",ACTIVE:"vto-state-active",INACTIVE:"vto-state-inactive",ERROR:"vto-state-error",COMINGSOON:"vto-state-comingsoon",NOTSUPPORTED:"vto-state-browser-not-supported"},init:function(e){var t=this;t.settings=$.extend({brandId:"notSet",langIsoCode:"en_US",branch:null,mobileApp:!1,analyticsConfig:{},startVTOButton:$(".vto-cta"),togglerButton:$(".vto-toggle"),vtoToggleTextDiv:$(".vto-toggle-text"),togglerOnText:"On",togglerOffText:"Off",defaultVideoId:"alessandra",customIsVTOEnabled:null,onRenderSuccess:null,onRenderError:null,onInitSuccess:function(){},defaultImageSize:{width:480,height:320},size:{width:316,height:316},remix:!1},e),t.settings.alessandraVideoId&&(t.settings.defaultVideoId=t.settings.alessandraVideoId),t.vtoDivId=null,t.currentUPC=null,t.VTOError=!1,t.VTOInitialized=!1,t.renderedGlasses=null,t.isVTOActive=t.getVTOActiveSession(),t.pictureUrl=null,t.vtoUserId=t.getVtoUserId(),t.vtoVideoId="",t.supportedFeatures={},t.errorClasses={100:t.VTO_STATE.NOTSUPPORTED,1e3:t.VTO_STATE.COMINGSOON,1001:t.VTO_STATE.ERROR},t.settings.togglerButton.length&&t.settings.togglerButton.click(function(e){e.preventDefault(),t.toggleContainers()})},setCurrentUPC:function(e){this.currentUPC=e?e+"":null},initVTOApp:function(e,t,o){var r=this,a={modelName:r.settings.defaultVideoId};if(void 0===window.VtoApp)return void console.error("VTO js has not been loaded properly.");r.setCurrentUPC(t),r.vtoDivId=e,n.debug("initVTOApp - UserId: "+r.vtoUserId),n.debug("initVTOApp - UPC: "+r.currentUPC),n.debug("initVTOApp - langIsoCode: "+r.settings.langIsoCode),VtoApp.init(r.vtoUserId,r.currentUPC,r.settings.brandId,r.settings.langIsoCode,r.settings.branch,r.settings.analyticsConfig,function(e,t){r.onInitSuccess(e,t),r.settings.onInitSuccess=r.settings.onInitSuccess.bind(r),r.settings.onInitSuccess(),o&&"function"==typeof o&&o()},function(e){r.onInitError(e)},a)},onInitSuccess:function(e,t){var o=this,r=n.getVTOUserData()||{};o.VTOInitialized=!0,o.supportedFeatures=t,o.vtoUserId=e,n.debug("onInitSuccess - Supported features: "),n.debug(t),n.debug("onInitSuccess - Returned userId: "+e),r.vtoUserId||(n.updateVTOUserData(o.vtoUserId,r.vtoVideoId,o.currentUPC),n.debug("onInitSuccess - updated Vto user data")),r&&r.vtoVideoId&&(o.vtoVideoId=r.vtoVideoId)},resetVTO:function(e){var t=this,o={},r=$.Deferred().resolve();$("body").removeClass(t.VTO_STATE.ACTIVE).removeClass(t.VTO_STATE.INACTIVE),t.enableDisableVTO(!1),window.vtopdpapp.deleteVtoFlow(function(a){o=a,a.isVideoSaved&&(r=n.deleteVTODataFromBackend(n.settings.vtoDeleteUrl,a.vtoSystemUserId,a.vtoUserId,a.vtoVideoId)),r.always(function(){t.isVTOActive=!1,t.vtoVideoId="",e&&(t.vtoUserId=""),n.updateVTOUserData(t.vtoUserId,t.vtoVideoId,t.currentUPC,o.vtoSystemUserId,o.vtoSystemUserType,!1),$("body").trigger("onResetVTO",t.settings.togglerButton),t.initVTOApp(t.vtoDivId,t.currentUPC)})})},onInitError:function(e){var t=this;2===e.code&&(n.debug("Wrong user id. Reinitialize VTO"),t.resetVTO(!0))},getVtoUserId:function(){var e=this,t=null,o=null;return e.vtoUserId&&(t=e.vtoUserId),t||(o=n.getVTOUserData(),t=o&&o.vtoUserId),"undefined"===t&&(t=null),t},startCaptureFlow:function(e,t,o,r){var a=this,i=a.currentUPC,s={};r&&(s=r),n.showPrivacyLink()&&(s.onPrivacyPolicy=n.onPrivacyPolicy),n.debug("startCaptureFlow - UPC: "+i),e&&0!==Object.keys(e).length||(e=a.settings.size),a.resetErrors(),$("body").addClass(a.VTO_STATE.CAPTURING),a.isVTOEnabled(i,function(){VtoApp.startCapture(a.vtoDivId,a.vtoUserId,i,e,s,function(e){n.debug("Save video to account: "+i),a.onCaptureSuccess(e),t&&"function"==typeof t&&t(a.vtoUserId,e,i)},function(e){n.debug("Continue without saving: "+i),a.onCaptureSuccess(e),o&&"function"==typeof o&&o(a.vtoUserId,e,i)},function(e){a.onCaptureError(e)})})},onCaptureSuccess:function(e){var t=this;t.setVTOActiveSession(!0),t.vtoVideoId=e,t.vtoVideoId&&t.vtoUserId&&n.updateVTOUserData(t.vtoUserId,t.vtoVideoId,t.currentUPC)},setVTOActiveSession:function(e){this.isVTOActive=e,n.createCookie(n.vtoRenderStatusCookieName,e)},getVTOActiveSession:function(){var e=n.getVTOUserData(),t=n.readCookie(n.vtoRenderStatusCookieName);return!(!e||!e.vtoVideoId)&&"true"===t},onCaptureError:function(e){$("body").removeClass(this.VTO_STATE.CAPTURING),this.showError(e)},showError:function(e,t){var o=this;n.debug(e),$("body").trigger("onShowVTOError",e),o.VTOError=!0,$("body").addClass(o.errorClasses[1001]),e&&e.code&&o.errorClasses[e.code]&&$("body").addClass(o.errorClasses[e.code]),t&&$("body").addClass(o.errorClasses[1e3]),n.onError(e,t)},resetErrors:function(){var e=this,t=void 0;n.debug("Reset error state"),e.VTOError=!1;for(t in e.errorClasses)e.errorClasses.hasOwnProperty(t)&&$("body").removeClass(e.errorClasses[t])},showStartVTOButton:function(e){var t=this;t.settings.mobileApp||t.supportedFeatures.webcamCapture?($("body").trigger("onShowVTOCTA",t.settings.startVTOButton),t.settings.startVTOButton.show(),n.onStartVTOButtonShow()):e&&t.enableDisableVTO(!1)},hideStartVTOButton:function(){this.settings.startVTOButton.hide()},renderGlassesFlow:function(e,t,o){var r=this,a=o||r.vtoVideoId;if(e?r.setCurrentUPC(e):n.debug("renderGlassesFlow - no upc passed; using self.currentUPC"),n.debug("renderGlassesFlow - upc: "+r.currentUPC),r.isVTOActive&&(r.activateVTOToggler(),!r.supportedFeatures.rendering))return n.debug("rendering not supported"),void r.showError({code:100,message:"Browser not supported."});r.isVTOEnabled(e,function(){return a?r.isVTOActive?(r.resetErrors(),void VtoApp.renderGlasses(r.vtoDivId,a,r.currentUPC,r.settings.size,function(){n.debug("renderGlassesFlow - callback render glasses - upc: "+r.currentUPC),r.renderedGlasses=r.currentUPC,$("body").trigger("onRenderVTO",r.currentUPC),"function"==typeof r.settings.onRenderSuccess&&r.settings.onRenderSuccess(r.currentUPC,r.isVTOActive)},function(e){5===e.code?(r.resetVTO(),n.debug("renderGlassesFlow error - video not found: "+a)):(n.debug("renderGlassesFlow - error on render glasses - upc: "+r.currentUPC),n.debug(e))},$.extend({remix:r.settings.remix},t))):void r.deactivateVTOToggler():(n.debug("renderGlassesFlow - No videoID, display startVTOButton."),$("body").removeClass(r.VTO_STATE.ACTIVE).removeClass(r.VTO_STATE.INACTIVE),r.resetErrors(),void r.showStartVTOButton(!0))},function(e){a||r.hideStartVTOButton(),(o||r.vtoVideoId)&&r.isVTOActive&&(r.showError(e),"function"==typeof r.settings.onRenderError&&r.settings.onRenderError(e))})},renderAlessandraFlow:function(e,t){console.warning("You are using an old VTOIntegration method. Please, use renderDefaultVideoFlow instead."),this.renderDefaultVideoFlow(e,t)},renderDefaultVideoFlow:function(e,t){this.renderGlassesFlow(e,t,this.settings.defaultVideoId)},enableDisableVTO:function(e){var t="onEnableVTO";n.debug("enableDisableVTO - VTO enable: "+e),e?$("body").removeClass(this.VTO_STATE.DISABLED).addClass(this.VTO_STATE.ENABLED):(t="onDisableVTO",$("body").removeClass(this.VTO_STATE.ENABLED).addClass(this.VTO_STATE.DISABLED)),$("body").trigger(t)},isUpcSupported:function(e,t,o){var r=this,a={code:1e3,message:"UPC not supported "+e};VtoApp.isUpcSupported(e,function(i){r.enableDisableVTO(i),i?(n.debug("isVTOEnabled - Upc "+e+" is supported."),t()):(n.debug("isVTOEnabled - Upc is not supported "+e,!0),o&&o(a))},function(e){e||(e=a),n.debug(e),r.showError(e)})},isVTOEnabled:function(e,t,o){var r=this,a=r.settings.customIsVTOEnabled;!0===window.disableVTO?r.enableDisableVTO(!1):(e?e+="":e=r.currentUPC,e?a&&"function"==typeof a?(a=a.bind(this))(e,t,o):r.isUpcSupported(e,t,o):(n.debug("isVTOEnabled - We cannot retireve a valid UPC"),r.enableDisableVTO(!1)))},activateVTOToggler:function(){var e=this;n.debug("activateVTOToggler - Toggler activated"),$("body").trigger("onVTOToggleOn",e.settings.togglerButton),e.setVTOActiveSession(!0),e.settings.vtoToggleTextDiv.text(e.settings.togglerOnText),e.settings.togglerButton.removeClass("vto-toggle-off").addClass("vto-toggle-on"),$("body").removeClass(e.VTO_STATE.CAPTURING).removeClass(e.VTO_STATE.INACTIVE).addClass(e.VTO_STATE.ACTIVE),n.onTogglerOn()},deactivateVTOToggler:function(){var e=this;e.setVTOActiveSession(!1),n.debug("deactivateVTOToggler - Toggler deactivated"),$("body").trigger("onVTOToggleOff",e.settings.togglerButton),e.settings.vtoToggleTextDiv.text(e.settings.togglerOffText),e.settings.togglerButton.removeClass("vto-toggle-on").addClass("vto-toggle-off"),$("body").removeClass(e.VTO_STATE.ACTIVE).addClass(e.VTO_STATE.INACTIVE),n.onTogglerOff()},toggleContainers:function(){var e=this;e.VTOError||e.isVTOActive?(e.deactivateVTOToggler(),e.resetErrors()):(e.activateVTOToggler(),e.renderGlassesFlow(e.currentUPC))},getImageLink:function(e,t,o,r){var a=this;o||(o=a.settings.defaultImageSize),VtoApp.getImage(a.vtoVideoId,e,{index:t,storeOnCloud:!0,size:o},function(t){n.debug(t),r(t,e)},function(e){a.showError(e)})},getImageLinkFlow:function(e,t,o){var r=this;e=e||r.currentUPC,t?r.isVTOEnabled(e,function(){r.getImageLink(e,"current",null,o)}):r.getImageLink(e,"current",null,o)},deleteVtoFlow:function(e){var t=this,o=n.isHardDeleteAvailable()?"hardVTODelete":"softVTODelete";n.debug("deleteVtoFlow: "+o);try{t[o](e)}catch(e){console.error(e)}},softVTODelete:function(e){var t=n.getVTOUserData();n.deleteCookie(n.vtoCookieName),"function"==typeof e&&e(t)},hardVTODelete:function(e){var t=this,o=n.getVTOUserData(),r=function(e,o){t.softVTODelete(),"function"==typeof o&&o(e)};n.debug("hardVTODelete - deleting: "+o.vtoUserId),VtoApp.deleteUser(o.vtoUserId,function(){n.debug("hardVTODelete - user deleted: "+o.vtoUserId),r(o,e)},function(t){2!==t.code&&n.debug(t),r(o,e)})}},t.default=n,e.exports=t.default},function(e,t,o){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(e,t,o){if(e&&l.isObject(e)&&e instanceof r)return e;var n=new r;return n.parse(e,t,o),n}function a(e){return l.isString(e)&&(e=n(e)),e instanceof r?e.format():r.prototype.format.call(e)}function i(e,t){return n(e,!1,!0).resolve(t)}function s(e,t){return e?n(e,!1,!0).resolveObject(t):t}var u=o(9),l=o(12);t.parse=n,t.resolve=i,t.resolveObject=s,t.format=a,t.Url=r;var d=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,v=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(v),h=["'"].concat(p),g=["%","/","?",";","#"].concat(h),b=["/","?","#"],T=/^[+a-z0-9A-Z_-]{0,63}$/,C=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},O={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=o(13);r.prototype.parse=function(e,t,o){if(!l.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),n=-1!==r&&r<e.indexOf("#")?"?":"#",a=e.split(n),i=/\\/g;a[0]=a[0].replace(i,"/"),e=a.join(n);var s=e;if(s=s.trim(),!o&&1===e.split("#").length){var c=f.exec(s);if(c)return this.path=s,this.href=s,this.pathname=c[1],c[2]?(this.search=c[2],this.query=t?w.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var v=d.exec(s);if(v){v=v[0];var p=v.toLowerCase();this.protocol=p,s=s.substr(v.length)}if(o||v||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var V="//"===s.substr(0,2);!V||v&&m[v]||(s=s.substr(2),this.slashes=!0)}if(!m[v]&&(V||v&&!O[v])){for(var I=-1,S=0;S<b.length;S++){var U=s.indexOf(b[S]);-1!==U&&(-1===I||U<I)&&(I=U)}var A,k;k=-1===I?s.lastIndexOf("@"):s.lastIndexOf("@",I),-1!==k&&(A=s.slice(0,k),s=s.slice(k+1),this.auth=decodeURIComponent(A)),I=-1;for(var S=0;S<g.length;S++){var U=s.indexOf(g[S]);-1!==U&&(-1===I||U<I)&&(I=U)}-1===I&&(I=s.length),this.host=s.slice(0,I),s=s.slice(I),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var D=this.hostname.split(/\./),S=0,E=D.length;S<E;S++){var _=D[S];if(_&&!_.match(T)){for(var L="",$=0,j=_.length;$<j;$++)_.charCodeAt($)>127?L+="x":L+=_[$];if(!L.match(T)){var R=D.slice(0,S),x=D.slice(S+1),B=_.match(C);B&&(R.push(B[1]),x.unshift(B[2])),x.length&&(s="/"+x.join(".")+s),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=u.toASCII(this.hostname));var F=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+F,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!y[p])for(var S=0,E=h.length;S<E;S++){var N=h[S];if(-1!==s.indexOf(N)){var G=encodeURIComponent(N);G===N&&(G=escape(N)),s=s.split(N).join(G)}}var z=s.indexOf("#");-1!==z&&(this.hash=s.substr(z),s=s.slice(0,z));var X=s.indexOf("?");if(-1!==X?(this.search=s.substr(X),this.query=s.substr(X+1),t&&(this.query=w.parse(this.query)),s=s.slice(0,X)):t&&(this.search="",this.query={}),s&&(this.pathname=s),O[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",q=this.search||"";this.path=F+q}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",o=this.pathname||"",r=this.hash||"",n=!1,a="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(a=w.stringify(this.query));var i=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||O[t])&&!1!==n?(n="//"+(n||""),o&&"/"!==o.charAt(0)&&(o="/"+o)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),i&&"?"!==i.charAt(0)&&(i="?"+i),o=o.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace("#","%23"),t+n+o+i+r},r.prototype.resolve=function(e){return this.resolveObject(n(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(l.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var o=new r,n=Object.keys(this),a=0;a<n.length;a++){var i=n[a];o[i]=this[i]}if(o.hash=e.hash,""===e.href)return o.href=o.format(),o;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var d=s[u];"protocol"!==d&&(o[d]=e[d])}return O[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(e.protocol&&e.protocol!==o.protocol){if(!O[e.protocol]){for(var c=Object.keys(e),f=0;f<c.length;f++){var v=c[f];o[v]=e[v]}return o.href=o.format(),o}if(o.protocol=e.protocol,e.host||m[e.protocol])o.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),o.pathname=p.join("/")}if(o.search=e.search,o.query=e.query,o.host=e.host||"",o.auth=e.auth,o.hostname=e.hostname||e.host,o.port=e.port,o.pathname||o.search){var h=o.pathname||"",g=o.search||"";o.path=h+g}return o.slashes=o.slashes||e.slashes,o.href=o.format(),o}var b=o.pathname&&"/"===o.pathname.charAt(0),T=e.host||e.pathname&&"/"===e.pathname.charAt(0),C=T||b||o.host&&e.pathname,y=C,w=o.pathname&&o.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],V=o.protocol&&!O[o.protocol];if(V&&(o.hostname="",o.port=null,o.host&&(""===w[0]?w[0]=o.host:w.unshift(o.host)),o.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),C=C&&(""===p[0]||""===w[0])),T)o.host=e.host||""===e.host?e.host:o.host,o.hostname=e.hostname||""===e.hostname?e.hostname:o.hostname,o.search=e.search,o.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),o.search=e.search,o.query=e.query;else if(!l.isNullOrUndefined(e.search)){if(V){o.hostname=o.host=w.shift();var I=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@");I&&(o.auth=I.shift(),o.host=o.hostname=I.shift())}return o.search=e.search,o.query=e.query,l.isNull(o.pathname)&&l.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o}if(!w.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var S=w.slice(-1)[0],U=(o.host||e.host||w.length>1)&&("."===S||".."===S)||""===S,A=0,k=w.length;k>=0;k--)S=w[k],"."===S?w.splice(k,1):".."===S?(w.splice(k,1),A++):A&&(w.splice(k,1),A--);if(!C&&!y)for(;A--;A)w.unshift("..");!C||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),U&&"/"!==w.join("/").substr(-1)&&w.push("");var P=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(V){o.hostname=o.host=P?"":w.length?w.shift():"";var I=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@");I&&(o.auth=I.shift(),o.host=o.hostname=I.shift())}return C=C||o.host&&w.length,C&&!P&&w.unshift(""),w.length?o.pathname=w.join("/"):(o.pathname=null,o.path=null),l.isNull(o.pathname)&&l.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=e.auth||o.auth,o.slashes=o.slashes||e.slashes,o.href=o.format(),o},r.prototype.parseHost=function(){var e=this.host,t=c.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.saveToWCSAccount=t.getUserDetailsURL=t.getLangISOCode=t.pickTime=t.isDesktopCaptureFlowSupported=void 0;var n=o(2),a=r(n),i=o(1),s=r(i),u=(t.isDesktopCaptureFlowSupported=function(){return navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia},t.pickTime=function(e){if(s.default.debugMode()){var t=new Date;console.warn(e+": "+t.getMinutes()+":"+t.getSeconds()+":d.getMilliseconds()")}},t.getLangISOCode=function(){var e=$("#wcsCoutryAndLangId").val();return{en_NL:"nl_NL",en_PL:"pl_PL",en_SE:"sv_SE"}[e]||e},t.getUserDetailsURL=function(){var e=$("#XVTOUserDetails").val();if("https:"===window.location.protocol){var t=a.default.parse(e);t.protocol&&"http"==t.protocol&&(e=e.replace("http://","https://"))}return e});t.saveToWCSAccount=function(){var e=s.default.getVTOUserData(),t={storeId:$("#storeId").val(),catalogId:$("#catalogId").val(),langId:$("#langId").val(),wcsUserId:e.vtoSystemUserId,vtoUserId:e.vtoUserId,vtoVideoId:e.vtoVideoId,action:"save"};return $.ajax({type:"GET",url:u(),data:t,dataType:"json"}).done(function(t){null!==t&&"true"===t.vto_user&&s.default.updateVTOUserData(e.vtoUserId,e.vtoVideoId,e.upc,e.vtoSystemUserId,e.vtoSystemUserType,!0)}).fail(function(){return s.default.debug("saveToWCSAccount: Error on saving vto data."),null})}},function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),a=o(6),i=new a.Storage,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"green",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"white";i.fetch("rbDebug")&&console.info("%c "+e+" ","background: "+t+"; color: "+o+";")};t.Logger=function(){function e(){r(this,e)}return n(e,null,[{key:"info",value:function(e){s(e,"green")}},{key:"debug",value:function(e){s(e,"#0E0E83")}},{key:"error",value:function(e){s(e,"red")}},{key:"log",value:function(e){s(e,"#FFFF00","black")}},{key:"warn",value:function(e){s(e,"#FFA500","black")}}]),e}()},,function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),i=null;t.Storage=function(){function e(){return r(this,e),void 0===window.browserLocalObject&&(window.browserLocalObject={}),i||(i=this),this.storageType=window.sessionStorage,this.stringifyCheck=!1,i}return a(e,[{key:"stringify",value:function(e){return this.stringifyCheck?JSON.stringify(e):e}},{key:"parse",value:function(e){try{return JSON.parse(e)}catch(t){return e}}},{key:"isBrowserStorageSupported",value:function(){try{return this.storageType.setItem("testStorage","1"),this.storageType.removeItem("testStorage"),!0}catch(e){return!1}}},{key:"findDataType",value:function(e){"object"===(void 0===e?"undefined":n(e))?this.stringifyCheck=!0:this.stringifyCheck=!1}},{key:"save",value:function(e,t){this.findDataType(t),this.isBrowserStorageSupported()?this.storageType.setItem(e,this.stringify(t)):window.browserLocalObject[e]=t}},{key:"fetch",value:function(e){return this.isBrowserStorageSupported()?this.parse(this.storageType.getItem(e)):window.browserLocalObject[e]}},{key:"fetchAll",value:function(){return this.isBrowserStorageSupported()?this.storageType:window.browserLocalObject}},{key:"remove",value:function(e){this.isBrowserStorageSupported()?this.storageType.removeItem(e):delete window.browserLocalObject[e]}},{key:"removeAll",value:function(){this.isBrowserStorageSupported()?this.storageType.clear():window.browserLocalObject={}}}]),e}()},function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PubSub=void 0;var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),a=o(4);t.PubSub=function(){function e(){r(this,e)}return n(e,null,[{key:"publish",value:function(e,t){a.Logger.info("Published event: "+e),$.publish(e,t)}},{key:"subscribe",value:function(e,t){a.Logger.log("Subscribed to event: "+e),$.subscribe(e,t)}}]),e}()},function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Utilities=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),i=o(2),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.Utilities=function(){function e(){r(this,e)}return a(e,null,[{key:"getUrlParameter",value:function(e){return s.default.parse(window.location.href,!0).query[e]}},{key:"removeURLParam",value:function(e,t){var o=t.split("?")[0],r=[],n=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==n){r=n.split("&");for(var a=r.length-1;a>=0;a-=1)r[a].split("=")[0]===e&&r.splice(a,1);o=r.length?o+"?"+r.join("&"):o}return o}},{key:"extends",value:function(){for(var e=this,t=arguments.length,o=Array(t),r=0;r<t;r++)o[r]=arguments[r];for(var a=1;a<o.length;a++){var i=void 0;for(i in o[a])o[a].hasOwnProperty(i)&&("object"===n(o[0][i])&&"object"===n(o[a][i])?e.extends(o[0][i],o[a][i]):o[0][i]=o[a][i])}return o[0]}},{key:"htmlDecode",value:function(e){return e?e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&").replace(/&nbsp;/g," ").replace(/&copy;/g,"©").replace(/&reg;/g,"®").replace(/&times;/g,"×").replace(/&trade;/g,"™"):e}}]),e}()},function(e,t,o){(function(e,r){var n;!function(a){function i(e){throw RangeError(E[e])}function s(e,t){for(var o=e.length,r=[];o--;)r[o]=t(e[o]);return r}function u(e,t){var o=e.split("@"),r="";return o.length>1&&(r=o[0]+"@",e=o[1]),e=e.replace(D,"."),r+s(e.split("."),t).join(".")}function l(e){for(var t,o,r=[],n=0,a=e.length;n<a;)t=e.charCodeAt(n++),t>=55296&&t<=56319&&n<a?(o=e.charCodeAt(n++),56320==(64512&o)?r.push(((1023&t)<<10)+(1023&o)+65536):(r.push(t),n--)):r.push(t);return r}function d(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=$(e>>>10&1023|55296),e=56320|1023&e),t+=$(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:m}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function v(e,t,o){var r=0;for(e=o?L(e/I):e>>1,e+=L(e/t);e>_*w>>1;r+=m)e=L(e/_);return L(r+(_+1)*e/(e+V))}function p(e){var t,o,r,n,a,s,u,l,f,p,h=[],g=e.length,b=0,T=U,C=S;for(o=e.lastIndexOf(A),o<0&&(o=0),r=0;r<o;++r)e.charCodeAt(r)>=128&&i("not-basic"),h.push(e.charCodeAt(r));for(n=o>0?o+1:0;n<g;){for(a=b,s=1,u=m;n>=g&&i("invalid-input"),l=c(e.charCodeAt(n++)),(l>=m||l>L((y-b)/s))&&i("overflow"),b+=l*s,f=u<=C?O:u>=C+w?w:u-C,!(l<f);u+=m)p=m-f,s>L(y/p)&&i("overflow"),s*=p;t=h.length+1,C=v(b-a,t,0==a),L(b/t)>y-T&&i("overflow"),T+=L(b/t),b%=t,h.splice(b++,0,T)}return d(h)}function h(e){var t,o,r,n,a,s,u,d,c,p,h,g,b,T,C,V=[];for(e=l(e),g=e.length,t=U,o=0,a=S,s=0;s<g;++s)(h=e[s])<128&&V.push($(h));for(r=n=V.length,n&&V.push(A);r<g;){for(u=y,s=0;s<g;++s)(h=e[s])>=t&&h<u&&(u=h);for(b=r+1,u-t>L((y-o)/b)&&i("overflow"),o+=(u-t)*b,t=u,s=0;s<g;++s)if(h=e[s],h<t&&++o>y&&i("overflow"),h==t){for(d=o,c=m;p=c<=a?O:c>=a+w?w:c-a,!(d<p);c+=m)C=d-p,T=m-p,V.push($(f(p+C%T,0))),d=L(C/T);V.push($(f(d,0))),a=v(o,b,r==n),o=0,++r}++o,++t}return V.join("")}function g(e){return u(e,function(e){return k.test(e)?p(e.slice(4).toLowerCase()):e})}function b(e){return u(e,function(e){return P.test(e)?"xn--"+h(e):e})}var T=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);var C,y=2147483647,m=36,O=1,w=26,V=38,I=700,S=72,U=128,A="-",k=/^xn--/,P=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=m-O,L=Math.floor,$=String.fromCharCode;C={version:"1.3.2",ucs2:{decode:l,encode:d},decode:p,encode:h,toASCII:b,toUnicode:g},void 0!==(n=function(){return C}.call(t,o,t,e))&&(e.exports=n)}()}).call(t,o(10)(e),o(11))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(o=window)}e.exports=o},function(e,t,o){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,o){"use strict";t.decode=t.parse=o(14),t.encode=t.stringify=o(15)},function(e,t,o){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,o,a){t=t||"&",o=o||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var d=0;d<l;++d){var c,f,v,p,h=e[d].replace(s,"%20"),g=h.indexOf(o);g>=0?(c=h.substr(0,g),f=h.substr(g+1)):(c=h,f=""),v=decodeURIComponent(c),p=decodeURIComponent(f),r(i,v)?n(i[v])?i[v].push(p):i[v]=[i[v],p]:i[v]=p}return i};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,o){"use strict";function r(e,t){if(e.map)return e.map(t);for(var o=[],r=0;r<e.length;r++)o.push(t(e[r],r));return o}var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,o,s){return t=t||"&",o=o||"=",null===e&&(e=void 0),"object"==typeof e?r(i(e),function(i){var s=encodeURIComponent(n(i))+o;return a(e[i])?r(e[i],function(e){return s+encodeURIComponent(n(e))}).join(t):s+encodeURIComponent(n(e[i]))}).join(t):s?encodeURIComponent(n(s))+o+encodeURIComponent(n(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.push(o);return t}},function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Cookies=void 0;var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),a=o(17),i=function(e){return e&&e.__esModule?e:{default:e}}(a);t.Cookies=function(){function e(){r(this,e)}return n(e,null,[{key:"get",value:function(e){return i.default.get(e)}},{key:"set",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";i.default.set(e,t,{expires:Number.parseInt(o),path:r})}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";i.default.remove(e,{path:t})}}]),e}()},function(e,t,o){var r,n;!function(a){var i=!1;if(r=a,void 0!==(n="function"==typeof r?r.call(t,o,t,e):r)&&(e.exports=n),i=!0,e.exports=a(),i=!0,!i){var s=window.Cookies,u=window.Cookies=a();u.noConflict=function(){return window.Cookies=s,u}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var o=arguments[e];for(var r in o)t[r]=o[r]}return t}function t(o){function r(t,n,a){var i;if("undefined"!=typeof document){if(arguments.length>1){if(a=e({path:"/"},r.defaults,a),"number"==typeof a.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{i=JSON.stringify(n),/^[\{\[]/.test(i)&&(n=i)}catch(e){}n=o.write?o.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var u="";for(var l in a)a[l]&&(u+="; "+l,!0!==a[l]&&(u+="="+a[l]));return document.cookie=t+"="+n+u}t||(i={});for(var d=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,f=0;f<d.length;f++){var v=d[f].split("="),p=v.slice(1).join("=");this.json||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var h=v[0].replace(c,decodeURIComponent);if(p=o.read?o.read(p,h):o(p,h)||p.replace(c,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===h){i=p;break}t||(i[h]=p)}catch(e){}}return i}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,o){r(t,"",e(o,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;var r=o(1),n=function(e){return e&&e.__esModule?e:{default:e}}(r),a=o(19),i=(t.config={vtoCaptureContainerId:"vto-capture-container",vtoRenderContainerId:"vto-render-container",$vtoCaptureContainer:$("#vto-capture-container"),$vtoRenderContainer:$("#vto-render-container"),$vtoMyVirtualModelContainer:$(".vto-my-virtual-model-container")},{demo:{onPageLoad:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Demo:onPageLoad"}),n.default.debug("[CALLBACK] demo onPageLoad")},onCreateModel:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Demo:onCreateModel"}),n.default.debug("[CALLBACK] demo onCreateModel")}},capture:{onPageLoad:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Capture:onPageLoad"}),n.default.debug("[CALLBACK] capture onPageLoad")},onWebcamAllowed:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Capture:onWebcamAllowed"}),n.default.debug("[CALLBACK] capture onWebcamAllowed")},onValidHeadtrack:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Capture:onValidHeadtrack"}),n.default.debug("[CALLBACK] capture onValidHeadtrack")}},browsererror:{onPageLoad:function(){tealium_data2track.push({id:"X-X-X-X-Error",Error_Source:"User",Error_Code:"VTO Desktop - Browser Error"}),n.default.debug("[CALLBACK] browsererror onPageLoad")}},deviceerror:{onPageLoad:function(){tealium_data2track.push({id:"X-X-X-X-Error",Error_Source:"User",Error_Code:"VTO Desktop - Device Error"}),n.default.debug("[CALLBACK] deviceerror onPageLoad")}},permissionerror:{onPageLoad:function(){}},processingerror:{onPageLoad:function(){tealium_data2track.push({id:"X-X-X-X-Error",Error_Source:"Server",Error_Code:"VTO Desktop - Processing Error"}),n.default.debug("[CALLBACK] processingerror onPageLoad")}},uploaderror:{onPageLoad:function(){tealium_data2track.push({id:"X-X-X-X-Error",Error_Source:"Server",Error_Code:"VTO Desktop - Upload Error"}),n.default.debug("[CALLBACK] uploaderror onPageLoad")}},preview:{onPageLoad:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Preview:onPageLoad"}),n.default.debug("[CALLBACK] preview onPageLoad")},onRetake:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Preview:onRetake"}),n.default.debug("[CALLBACK] preview onRetake")},onSave:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Preview:onSave"}),n.default.debug("[CALLBACK] preview onSave")},onContinue:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Preview:onContinue"}),n.default.debug("[CALLBACK] preview onContinue")}},render:{onRenderGlasses:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Render:onRenderGlasses"}),n.default.debug("[CALLBACK] render onRenderGlasses")},onPageLoad:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Render:onPageLoad"}),n.default.debug("[CALLBACK] render onPageLoad")}},comingsoon:{onPageLoad:function(){tealium_data2track.push({id:"DEEP-D-VTO-NewAction",vtoAction:"Comingsoon:onPageLoad"}),n.default.debug("[CALLBACK] comingsoon onPageLoad")}},rendererror:{onPageLoad:function(){tealium_data2track.push({id:"X-X-X-X-Error",Error_Source:"Server",Error_Code:"VTO Desktop - Render Error"}),n.default.debug("[CALLBACK] rendererror onPageLoad")}}});t.default={brandId:"rayban",langIsoCode:"en_US",defaultVideoId:"alessandra",startVTOButton:$(".vto-try-them-on > a"),onRenderSuccess:function(e,t){(0,a.showPolarizedIcon)(e,t)},analyticsConfig:i}},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveUserData=t.vtoCTAClick=t.onContinueWithoutSaving=t.onSaveToAccount=t.onPrivacyPolicy=t.getGlassesUpc=t.isVTOAvailable=t.showPolarizedIcon=t.getCapturePageUrl=void 0;var n=o(2),a=r(n),i=o(1),s=r(i),u=o(3),l=t.getCapturePageUrl=function(e){var t=$("#vtoStartPage").val();if(void 0===t)return"";var o=a.default.parse(t,!0);o.search=null,"http"==o.protocol&&(o.protocol="https"),o.query.vtoSku=e;try{var r=$("#vtoCatId_"+e).val();r&&(o.query.vtoCatId=r)}catch(e){console.debug("vtoCatId not available.")}return a.default.format(o)};t.showPolarizedIcon=function(e,t){var o=$(".vto-polarized-icon"),r=$("#vtoCatId_"+e).val(),n=void 0;o.addClass("wcs-hide"),t&&r&&window.pdpdata&&(n=window.pdpdata.products[$("#vtoCatId_"+e).val()])&&n.polarized&&"polarized"===n.polarized.toLowerCase()&&o.removeClass("wcs-hide")},t.isVTOAvailable=function(){for(var e=$("#productType").val(),t=["gift-cards","CASE","KIT","Accessories","ROX_FRAME","prescription-sunglasses"],o=!0,r=0;r<t.length;r+=1)if(e===t[r]){o=!1;break}return o},t.getGlassesUpc=function(){var e=$("#vtoSelectedSku").val();return e||(e=s.default.getUrlParameter("vtoSku"))&&(e=e.replace("#","")),e&&(e+=""),e},t.onPrivacyPolicy=function(){var e=$("#vto_privacy_url").val();s.default.debug("onPrivacyPolicy callback"),e?window.open(e,"_blank"):s.default.debug("no provacy url found")},t.onSaveToAccount=function(e,t,o){if(s.default.debug("Custom save video to account action"),s.default.isLoggedInUser())(0,u.saveToWCSAccount)().always(function(){window.location=s.default.getVTORedirectCookie()});else{var r=$(".wcs-myacc-loginlink a").attr("href");window.location=r}},t.onContinueWithoutSaving=function(){var e=s.default.getVTOUserData(),t=$.Deferred().resolve();s.default.isLoggedInUser()&&e&&e.isVideoSaved&&(t=(0,u.saveToWCSAccount)()),t.always(function(){s.default.debug("Redirect to PDP or Portal");var e=s.default.getVTORedirectCookie();e||(e="/"),window.locationon=e})},t.vtoCTAClick=function(e){var t=l(e);s.default.setVTORedirectCookie(window.location.href),t&&(window.location=t)},t.retrieveUserData=function(e){var t={storeId:$("#storeId").val(),catalogId:$("#catalogId").val(),langId:$("#langId").val(),action:"d_pdp"};return $.ajax({type:"GET",url:e,data:t,dataType:"json"}).done(function(e){s.default.debug("retrieveUserData: get VTO user detail success from BE."),e||s.default.debug("retrieveUserData: no ajax response for user details.");var t=null,o=null,r=!1;"true"===e.vto_user&&(t=e.vto_UserId,o=e.vto_VideoId,r=!0),s.default.updateVTOUserData(t,o,s.default.getGlassesUpc(),e.wcs_UserId,e.wcs_UserType,r)}).fail(function(){s.default.debug("retrieveUserData: Error on retrieving user data"),s.default.debug("vtoPDPInitialization failed")})}},,,,,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=$("#vtoFBAppId").val();window.vtopdpapp.getImageLinkFlow(null,!1,function(t,o){n.default.debug("FB appid: "+e),FB.init({appId:e||"292396701175606",xfbml:!0,version:"v2.8"}),FB.ui({method:"feed",link:window.location.href+"&cid=RB-SFB_VTO-PDP-Sharing_="+o,picture:t,name:$("#vtoFbTitle").val(),caption:$("#vtoFbRayban").val(),description:$("#vtoFbDesc").val()},function(){})})};var r=o(1),n=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=t.default},,,function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,i.getUserDetailsURL)(),t=a.default.retrieveUserData(e);u.default.langIsoCode=(0,i.getLangISOCode)(),a.default.setVTORedirectCookie(""),a.default.setVTOReferrerCookie(!1),t.done(function(){a.default.debug("vtoPDPInitialization: on Success"),u.default.onInitSuccess=function(){$("body").on("click",".vto-cta",function(e){e.preventDefault(),a.default.debug("vto-cta clicked.");var t=(0,c.getGlassesUpc)();window.vtopdpapp&&window.vtopdpapp.currentUPC&&(t=window.vtopdpapp.currentUPC),(0,c.vtoCTAClick)(t)}),$("body").on("click",".vto-share",function(e){e.preventDefault(),a.default.debug("vto-share clicked."),window.FB?(0,d.default)():($.ajaxSetup({cache:!0}),$.getScript("//connect.facebook.net/en_US/sdk.js",function(){a.default.debug("Load Facebook JS."),(0,d.default)()}))}),$("body").on("click","#D_PDP_Prod_ColorThumbs ul.wcs-carousel a",function(){var e=$(this).data("partNumber");e||a.default.debug("no upc found when changing color."),a.default.changeUpc(e)}),$("body").on("click",".rb-draggable-lenses-list ul li",function(){var e=$(this).data("sku");if(e){var t=window.pdpdata.products[e];t&&t.partNumber&&a.default.changeUpc(t.partNumber)}}),window.vtopdpapp.renderGlassesFlow()},a.default.setVTOReferrerCookie(!0),window.vtopdpapp=new a.default.VTOPDPApp(u.default),window.vtopdpapp.initVTOApp(s.config.vtoRenderContainerId,(0,c.getGlassesUpc)())})};var n=o(1),a=r(n),i=o(3),s=o(18),u=r(s),l=o(24),d=r(l),c=o(19);e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MyVirtualModelFlow=void 0,t.default=function(){var e=(0,i.getUserDetailsURL)(),t=a.default.retrieveUserData(e);u.default.langIsoCode=(0,i.getLangISOCode)(),t.done(function(){a.default.debug("vtoPDPInitialization: on Success"),window.vtopdpapp=new a.default.VTOPDPApp(u.default),a.default.MyVirtualModelFlow((0,i.getUserDetailsURL)())})};var n=o(1),a=r(n),i=o(3),s=o(18),u=r(s);t.MyVirtualModelFlow=function(e,t){var o=a.default.getVTOUserData(),r=o&&o.vtoVideoId?"deleteAction":"continueAction",n={continueAction:function(){$("#delete_vto_section").addClass("wcs-hide"),$("#continueShoppingButton").removeClass("wcs-hide")},deleteAction:function(){$("#continueShoppingButton").addClass("wcs-hide"),$("#delete_vto_section").removeClass("wcs-hide")}},s=$.Deferred().resolve();n[r](),t||($("body").on("click",".vto-return-home",function(){window.location.href=$("#home").val()}),$("body").on("click",".vto-delete-button",function(){if(!window.vtopdpapp)return void a.default.debug("vtopdpapp not initialized.");window.vtopdpapp.deleteVtoFlow(function(t){if(t.isVideoSaved){var o={storeId:$("#storeId").val(),catalogId:$("#catalogId").val(),langId:$("#langId").val(),action:"delete",wcsUserId:t.vtoSystemUserId,vtoUserId:t.vtoUserId,vtoVideoId:t.vtoVideoId};s=$.ajax({type:"GET",url:(0,i.getUserDetailsURL)(),data:o,async:!1,dataType:"json"})}s.always(function(){a.default.MyVirtualModelFlow(e,!0)})})}))}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e="true"===n.default.getVTOReferrerCookie(!0),t=n.default.getVTOUserData(),o=["register","logon"],r=n.default.getVTORedirectCookie(),a=0;a<o.length;a+=1)$("#vto_"+o[a]+"_referrer").val(r);if(e&&t)for(var i=0;i<o.length;i+=1)$("#vto_"+o[i]+"_wcsuid").val(t.vtoSystemUserId),$("#vto_"+o[i]+"_vtouid").val(t.vtoUserId),$("#vto_"+o[i]+"_vtovidid").val(t.vtoVideoId),$("#vto_"+o[i]+"_sku").val(t.upc)};var r=o(1),n=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=t.default},,,,,,,,function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),a=r(n),i=o(3),s=o(18),u=r(s),l=o(38),d=o(19),c=o(24),f=r(c),v=o(27),p=r(v),h=o(28),g=o(29),b=r(g);a.default.initVersion="1.19",a.default.vtoSettings=u.default,a.default.isVTOAvailable=d.isVTOAvailable,a.default.getGlassesUpc=d.getGlassesUpc,a.default.onPrivacyPolicy=d.onPrivacyPolicy,a.default.onSaveToAccount=d.onSaveToAccount,a.default.onContinueWithoutSaving=d.onContinueWithoutSaving,a.default.MyVirtualModelFlow=h.MyVirtualModelFlow,a.default.retrieveUserData=d.retrieveUserData,a.default.vtoCTAClick=d.vtoCTAClick,a.default.onStartVTOButtonShow=l.onStartVTOButtonShow,a.default.onTogglerOn=l.onTogglerOn,a.default.onTogglerOff=l.onTogglerOff,a.default.onError=l.onError,a.default.getCapturePageUrl=d.getCapturePageUrl,a.default.ShareFBFlow=f.default,a.default.getLangIsoCode=i.getLangISOCode,a.default.LoginRegisterFlow=function(){return console.warning("Deprecated: use loginRegisterFlow instead."),(0,b.default)()},a.default.vtoPDPInitialization=function(){(0,p.default)()},t.default=a.default,e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.onStartVTOButtonShow=function(){tealium_data2track.push({id:"WCS-D-PDP-VTO-ProdAvailable-ToggleNone"})},t.onTogglerOn=function(){tealium_data2track.push({id:"WCS-D-PDP-VTO-ProdAvailable-ToggleOn"})},t.onTogglerOff=function(){tealium_data2track.push({id:"WCS-D-PDP-VTO-ProdAvailable-ToggleOff"})},t.onError=function(e){var t="",o="";e.code&&(o=e.code),t=e.message?e.message:e,tealium_data2track.push({id:"X-X-X-X-Error",Error_Source:"Server",Error_Message:"VTO Error "+o,Error_Code:"VTO Desktop - "+t})};t.default={}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,o){e.exports=o(68)},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=o(37),a=r(n),i=o(27),s=r(i),u=o(69),l=r(u),d=o(28),c=r(d),f=o(29),v=r(f),p=o(18);window.VTOIntegration=a.default,$(document).ready(function(){var e=$("#vtoCookieLife"),t=[{container:p.config.$vtoCaptureContainer,action:l.default},{container:p.config.$vtoRenderContainer,action:s.default},{container:p.config.$vtoMyVirtualModelContainer,action:c.default},{container:$("#vto_register_referrer"),action:v.default}];if(a.default.isVTOAvailable()){a.default.cookieExpirationDays=e.length?e.val():14;for(var o=0;o<t.length;o+=1){var r=t[o];if(r.container.length){a.default.debug("vtoPDPInitialization"),r.action();break}}}else a.default.debug("VTO is not enable for this product")})},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,i.getUserDetailsURL)(),t=$(".vto-start-btn a.rb-button"),o=a.default.retrieveUserData(e),r=a.default.getVTORedirectCookie();u.default.langIsoCode=(0,i.getLangISOCode)(),a.default.setVTOReferrerCookie(!0),r||(a.default.debug("vtoRedirectCookie is null"),r=$("#alt_pdpUrl").val(),r?(a.default.debug("Set redirect to: "+r),a.default.setVTORedirectCookie(r)):console.error("Neither vto redirect cookie nor alt_pdpUrl are set.")),$(".backLink").on("click",function(e){e.preventDefault(),a.default.deleteCookie(a.default.RBVTOSocialCookieName),window.location=r}),o.done(function(){var e=void 0;a.default.debug("vtoPDPInitialization: on Success"),u.default.onInitSuccess=function(){this.supportedFeatures&&this.supportedFeatures.webcamCapture&&t.show()},a.default.showPrivacyLink()&&(e=$(".vto-privacy-policy"),e.show(),$("a",e).on("click",function(e){e.preventDefault(),(0,l.onPrivacyPolicy)()})),window.vtopdpapp=new a.default.VTOPDPApp(u.default),window.vtopdpapp.initVTOApp(s.config.vtoCaptureContainerId,(0,l.getGlassesUpc)()),t.on("click",function(e){e.preventDefault(),window.vtopdpapp.startCaptureFlow({},a.default.onSaveToAccount,a.default.onContinueWithoutSaving,{showWelcomePage:!1})})})};var n=o(1),a=r(n),i=o(3),s=o(18),u=r(s),l=o(19);e.exports=t.default}])});
//# sourceMappingURL=vto-w.js.map