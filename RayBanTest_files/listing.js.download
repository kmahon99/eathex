!function(O){window.sendAjaxRequest=function(e,t,a){O.ajax({url:e,data:a||"",type:"POST",dataType:"html",success:t})},window.isPdppage=!1,window.initNotification=function(){O("a.wcs-preorder-link").unbind("click").bind("click",function(e){if(e.stopPropagation(),e.preventDefault(),0!==O("#wcs-pageName").length){var t=O("#wcs-pageName")[0].value;O(this).data("pdp")?isPdppage=!0:isPdppage=!1;var a,i,r,s,o,n,c,l,d,p,u,f,w,h,v,m,g,$="";"productDisplayPage"===t?(a=O("#catEntryId").val(),i=O("#storeId").val(),r=O("#catalogId").val(),s=O("#langId").val(),o=O("#emailSRC").val(),n=O("#wcs-productdescval").text(),c=O("span#wcs-resolvedskuvalForEmailShare").text(),l=O("#partNumber").val(),d=O("#productId").val(),p=O("#altText").val(),u=O("#title").val(),f=O("#categoryTypeForEmail").val(),w=O("#prodCatTypePDP").val(),g=O("#isPreOrder").val(),0<O("#isClearance").length&&"true"==O("#isClearance").val()?(h=O.trim(O("div.wcs-price-clearance>div.wcs-clear-sp-price").html()),v=O.trim(O("div.wcs-price-clearance>div.wcs-clear-strike-price>strike").html())):h=O("span#wcs-productprice").html(),m=O("#configurationIdSocial").val(),$={storeId:i,catalogId:r,catEntryId:a,langId:s,emailSRC:o,metaTitle:n,sku:c,productId:d,partNumber:l,altText:p,title:u,categoryTypeForEmail:f,prodCatType:w,price:h,name:O("span#wcs-productdescval").html(),configurationId:m,clearancePrice:v,isPreOrder:g}):"QuickViewInfoPage"===t&&(a=O("#catEntryId").val(),i=O("#storeId").val(),r=O("#catalogId").val(),s=O("#langId").val(),o=O("#emailSRC").val(),n=O(".wcs-product-description h6").text(),c=O("#skuEmailAvail").val(),l=O("#partNumber").val(),d=O("#productId").val(),p=O("#altText").val(),u=O("#title").val(),f=O("#categoryTypeForEmail").val(),w=O("#prodCatTypePDP").val(),g=O("#isPreOrder").val(),0<O("#isClearance").length&&"true"==O("#isClearance").val()?(h=O.trim(O("div.wcs-price-clearance>div.wcs-clear-sp-price").html()),v=O.trim(O("div.wcs-price-clearance>div.wcs-clear-strike-price>strike").html())):null!==(h=O.trim(O("#item_price span#wcs-offerPrice").html()))&&""!==h||(h=O.trim(O("#item_price span.wcs-offerPrice").html())),m=O("#configurationIdSocial").val(),$={storeId:i,catalogId:r,catEntryId:a,langId:s,emailSRC:o,metaTitle:n,sku:c,productId:d,partNumber:l,altText:p,title:u,categoryTypeForEmail:f,prodCatType:w,price:h,name:O(".wcs-product-description h6").html(),configurationId:m,clearancePrice:v,isPreOrder:g}),sendAjaxRequest("PreOrderRemindMeEmailView",appendNotificationData,$)}})},window.appendNotificationData=function(e){O("#wcs-preorder-emial-pop").remove(),O("body").append(e),display_Modal_1("wcs-preorder-emial-pop"),display_center_1(O("#wcs-preorder-emial-pop")),closeNotification(),window.forms=forms.add(O("#wcs-preorder-email-form")),validateForms(forms),validateEmail(),submitNotification(),O("#wcs-preorder-emial-pop .wcs-close-btn").off("click").on("click",function(e){O(e.target).closest(".wcs-quick-buy-lightbox").hide(),O(".wcs-fadeout-full").css("height","0px")})},window.appendNotificationConfirmMsg=function(e){var t=O("#preorder_notify_btn");O(".wcs-notify-container").hide(),O(t).parents(".wcs-pop-container").find(".wcs-thankyou-pop").remove(),O(t).parents(".wcs-pop-container").append(e),display_center_1(O(t).parents(".wcs-pop-container")),closeNotification()},window.submitNotification=function(){O("#preorder_notify_btn").off("click").on("click",function(e){if(O("#wcs-preorder-email-form").h5Validate("allValid")){e.stopPropagation(),e.preventDefault();var t,r=O("#catEntryIdVal").val(),s=O("#storeId").val(),o=O("#catalogId").val(),n=O("#langId").val(),l=O("#emailSRCVal").val(),p=O("#metaTitleVal").val(),u=O("#skuVal").val(),f=O("#partNumberVal").val(),w=O("#productIdVal").val(),h=O("#altText").val(),v=O("#title").val(),m=O("#preorderviewname").val();t=O("#remindviaemail").is(":checked")||O("#remindviaemail").parent().hasClass("wcs-c-on")?"on":"off";var g=O("#checkboxID").val(),$=O("#nameVal").val(),y=O("#configurationIdVal").val(),C=O("#priceVal").val(),k=O("#preorderemail").val(),S=O("#preorderemailAddress").val(),P=O("#clearancePriceVal").val(),_=O("#isPreOrder").val(),T=O("#roxSet_1").val(),R=function(e){for(x=function(e){for(nblk=1+(e.length+8>>6),blks=new Array(16*nblk),i=0;i<16*nblk;i++)blks[i]=0;for(i=0;i<e.length;i++)blks[i>>2]|=e.charCodeAt(i)<<i%4*8;return blks[i>>2]|=128<<i%4*8,blks[16*nblk-2]=8*e.length,blks}(e),a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=E(a,b,c,d,x[i+0],7,-680876936),d=E(d,a,b,c,x[i+1],12,-389564586),c=E(c,d,a,b,x[i+2],17,606105819),b=E(b,c,d,a,x[i+3],22,-1044525330),a=E(a,b,c,d,x[i+4],7,-176418897),d=E(d,a,b,c,x[i+5],12,1200080426),c=E(c,d,a,b,x[i+6],17,-1473231341),b=E(b,c,d,a,x[i+7],22,-45705983),a=E(a,b,c,d,x[i+8],7,1770035416),d=E(d,a,b,c,x[i+9],12,-1958414417),c=E(c,d,a,b,x[i+10],17,-42063),b=E(b,c,d,a,x[i+11],22,-1990404162),a=E(a,b,c,d,x[i+12],7,1804603682),d=E(d,a,b,c,x[i+13],12,-40341101),c=E(c,d,a,b,x[i+14],17,-1502002290),b=E(b,c,d,a,x[i+15],22,1236535329),a=A(a,b,c,d,x[i+1],5,-165796510),d=A(d,a,b,c,x[i+6],9,-1069501632),c=A(c,d,a,b,x[i+11],14,643717713),b=A(b,c,d,a,x[i+0],20,-373897302),a=A(a,b,c,d,x[i+5],5,-701558691),d=A(d,a,b,c,x[i+10],9,38016083),c=A(c,d,a,b,x[i+15],14,-660478335),b=A(b,c,d,a,x[i+4],20,-405537848),a=A(a,b,c,d,x[i+9],5,568446438),d=A(d,a,b,c,x[i+14],9,-1019803690),c=A(c,d,a,b,x[i+3],14,-187363961),b=A(b,c,d,a,x[i+8],20,1163531501),a=A(a,b,c,d,x[i+13],5,-1444681467),d=A(d,a,b,c,x[i+2],9,-51403784),c=A(c,d,a,b,x[i+7],14,1735328473),b=A(b,c,d,a,x[i+12],20,-1926607734),a=F(a,b,c,d,x[i+5],4,-378558),d=F(d,a,b,c,x[i+8],11,-2022574463),c=F(c,d,a,b,x[i+11],16,1839030562),b=F(b,c,d,a,x[i+14],23,-35309556),a=F(a,b,c,d,x[i+1],4,-1530992060),d=F(d,a,b,c,x[i+4],11,1272893353),c=F(c,d,a,b,x[i+7],16,-155497632),b=F(b,c,d,a,x[i+10],23,-1094730640),a=F(a,b,c,d,x[i+13],4,681279174),d=F(d,a,b,c,x[i+0],11,-358537222),c=F(c,d,a,b,x[i+3],16,-722521979),b=F(b,c,d,a,x[i+6],23,76029189),a=F(a,b,c,d,x[i+9],4,-640364487),d=F(d,a,b,c,x[i+12],11,-421815835),c=F(c,d,a,b,x[i+15],16,530742520),b=F(b,c,d,a,x[i+2],23,-995338651),a=L(a,b,c,d,x[i+0],6,-198630844),d=L(d,a,b,c,x[i+7],10,1126891415),c=L(c,d,a,b,x[i+14],15,-1416354905),b=L(b,c,d,a,x[i+5],21,-57434055),a=L(a,b,c,d,x[i+12],6,1700485571),d=L(d,a,b,c,x[i+3],10,-1894986606),c=L(c,d,a,b,x[i+10],15,-1051523),b=L(b,c,d,a,x[i+1],21,-2054922799),a=L(a,b,c,d,x[i+8],6,1873313359),d=L(d,a,b,c,x[i+15],10,-30611744),c=L(c,d,a,b,x[i+6],15,-1560198380),b=L(b,c,d,a,x[i+13],21,1309151649),a=L(a,b,c,d,x[i+4],6,-145523070),d=L(d,a,b,c,x[i+11],10,-1120210379),c=L(c,d,a,b,x[i+2],15,718787259),b=L(b,c,d,a,x[i+9],21,-343485551),a=I(a,olda),b=I(b,oldb),c=I(c,oldc),d=I(d,oldd);return D(a)+D(b)+D(c)+D(d)}(S);document.cookie="tealium_data_user_emailMd5="+R+";path=/;",sendAjaxRequest("SendPreOrderEmail",submitNotifyController,{storeId:s,catalogId:o,catEntryId:r,langId:n,emailSRC:l,URL:k,metaTitle:p,sku:u,productId:w,partNumber:f,altText:h,title:v,price:C,checkbox:g,privacyPolicy:t,emailAddress:S,viewName:m,name:$,configurationId:y,clearancePrice:P,isPreOrder:_,roxSet_1:T})}})},window.submitNotifyController=function(){var e=O("#preorderemailAddress").val(),t=O("#storeId").val(),a=O("#langId").val(),i={};i.emailAddress=e,i.storeId=t,i.langId=a,sendAjaxRequest("PreOrderRemindMeSuccessEmailView",appendNotificationConfirmMsg,i)},window.closeNotification=function(){O("#wcs-preorder-emial-pop .wcs-close-btn, #wcs-preorder-emial-pop a.wcs-myOrder-status-link, #wcs-preorder-emial-pop a.wcs_close_lightBox").off("click").on("click",function(e){isPdppage||O("#shopCartPage")&&0<O("#shopCartPage").length&&"ShopCart"==O("#shopCartPage").val()?(O(".wcs-fadeout-full").removeAttr("style"),O(".wcs-quick-buy-lightbox").hide()):(O("#wcs-preorder-emial-pop").hide(),"true"==window.isROX||0<O("#isRoxEnabled").length&&"true"===O("#isRoxEnabled").val()?O("#D_QuickView_Prod").removeClass("wcs-hidden").show():O("#D_QuickView").removeClass("wcs-hidden").show(),O(".wcs-fadeout-full").css("height","3000px")),e.stopPropagation(),e.preventDefault()})};var t="0123456789abcdef";function D(e){for(str="",j=0;j<=3;j++)str+=t.charAt(e>>8*j+4&15)+t.charAt(e>>8*j&15);return str}function I(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}function n(e,t,a,i,r,s){return I((o=I(I(t,e),I(i,s)))<<(n=r)|o>>>32-n,a);var o,n}function E(e,t,a,i,r,s,o){return n(t&a|~t&i,e,t,r,s,o)}function A(e,t,a,i,r,s,o){return n(t&i|a&~i,e,t,r,s,o)}function F(e,t,a,i,r,s,o){return n(t^a^i,e,t,r,s,o)}function L(e,t,a,i,r,s,o){return n(a^(t|~i),e,t,r,s,o)}O(function(){initNotification()})}(jQuery);var globalAppliedFactes,checkedFilters,checkedFiltersArray,checkedDivs,TilesView=Class({initialize:function(e){$.extend(Handlebars.partials,Rayban.templates),this.containerSel=e,this.plpTemplate=Rayban.templates["plp-template"],this.plpTemplateServer=Rayban.templates["plp-template-server"],this.eventType=null!==document.ontouchstart?"click":"touchstart"},render:function(e,t){!0===t?void 0!==e&&void 0!==e[0]&&void 0!==e[0].products&&void 0!==e[0].products.pageType&&"ProductListing"===e[0].products.pageType?$(this.containerSel).append(this.plpTemplateServer(e)):$(this.containerSel).append(this.plpTemplate(e)):$(this.containerSel).html(this.plpTemplate(e)),this.bindEvent()},bindEvent:function(){$(".quickViewLink").off(this.eventType).on(this.eventType,openQuickViewHandler),$(".customizeContainer").off(this.eventType).on(this.eventType,function(e){e.preventDefault();var t=e.currentTarget,a=$(t).data("url");!0===e.ctrlKey||!0===e.metaKey?window.open(a,"_newtab"):window.open(a,"_self")})}}),getUrlParameter=function(e){for(var t,a,i=unescape(window.location.search.substring(1)).split("&"),r="",s=0;s<i.length;s++)-1===i[s].indexOf("=")&&(i[s-1]=i[s-1]+"&"+i[s],i.splice(s,1));var o=!1;for(a=0;a<i.length;a++)if((t=i[a].split("="))[0]===e){if(void 0===t[1])return!0;o?r+="|"+decodeURIComponent(escape(t[1])):r=decodeURIComponent(escape(t[1])),o=!0}return-1!=r.indexOf("|")?r.split("|"):r},FacetView=Class({initialize:function(){this.searchFilterbarTemplate=Rayban.templates.search_filter_bar_template,this.sunglassesFilterbarTemplate=Rayban.templates.sunglasses_filter_bar_template,this.eyeglassesFilterbarTemplate=Rayban.templates.eyeglasses_filter_bar_template,this.filterProductCategoriesTemplate=Rayban.templates.filter_product_categories_template,this.filterProductDetailsTemplate=Rayban.templates.filter_product_details_template,this.filterSelectedTemplate=Rayban.templates.filter_selected_template},fetchFacetData:function(){var t=this,e={categoryID:$("#parentCategoryId").val(),storeId:$("#storeId").val(),catalogId:$("#catalogId").val(),langId:$("#langId").val(),searchTerm:$("#searchTerm").val(),facet:getUrlParameter("facet"),token:$("#token").val(),token1:$("#token1").val(),token2:$("#token2").val(),pageTemplateRedesign:$("#pageTemplateRedesign").val()};"SearchResults"==$("#pageType").val()&&(delete e.storeId,delete e.catalogId,delete e.langId,e.facet=getUrlParameter("facet"),e.searchTerm=getUrlParameter("searchTerm").split("+").join(" ")),$.ajax({url:$("#basePageURL").val(),type:"get",traditional:!0,data:e,success:function(e){t.render(e),t.bindEvent()}})},render:function(e){var t=this,l=[];if(data="object"!=typeof e?$.parseJSON(e):e,"CategoryListing"!==$("#pageTemplate").val()&&(void 0!==$("#producttype").val()?-1!==$("#producttype").val().indexOf("sunglasses")||-1!==$("#producttype").val().indexOf("accessories")?$("#wcs-filter-bar-container").html(t.sunglassesFilterbarTemplate(data)):-1!==$("#producttype").val().indexOf("eyeglasses")?$("#wcs-filter-bar-container").html(t.eyeglassesFilterbarTemplate(data)):$("#wcs-filter-bar-container").html(t.searchFilterbarTemplate(data)):$("#wcs-filter-bar-container").html(t.searchFilterbarTemplate(data))),expand_dropbox(),void 0!==data.PRODUCTTYPE)for(var a=0;a<data.PRODUCTTYPE.entry.length;a++)0===data.PRODUCTTYPE.entry[a].count&&'"Sunglasses Only"'==data.PRODUCTTYPE.entry[a].label?$(".wcs-second-group").find("a:first").attr("disabled","disabled"):0===data.PRODUCTTYPE.entry[a].count&&'"Optics Only"'==data.PRODUCTTYPE.entry[a].label&&$(".wcs-second-group").find("a:last").attr("disabled","disabled");data.APPLIED_FACETS&&(data.APPLIED_FACETS.RESET_ALL=data.RESET_ALL,$("#wcs-filter-bar-container").append(t.filterSelectedTemplate(data.APPLIED_FACETS))),void 0!==data&&void 0!==data.FRAME_SHAPE_FACET&&(data.FRAME_SHAPE_FACET.RESET_ALL=data.RESET_ALL),void 0!==data&&void 0!==data.SPECIALS&&(data.SPECIALS.RESET_ALL=data.RESET_ALL),void 0!==data&&void 0!==data.PRODUCT_DETAILS&&(data.PRODUCT_DETAILS.RESET_ALL=data.RESET_ALL),void 0!==data&&void 0!==data.PRODUCTTYPE&&(data.PRODUCTTYPE.RESET_ALL=data.RESET_ALL),$(".wcs-filter-inner-container").html(t.filterProductCategoriesTemplate(data.PRODUCTTYPE)),$(".wcs-filter-inner-container").append(t.filterProductDetailsTemplate(data.PRODUCT_DETAILS)),"MX"==$("#country").val()&&$(".wcs-sunglass-details .wcs-omega ul:first").css("text-transform","none"),t.renderEyeGlassDisplay(),data.APPLIED_FACETS&&data.APPLIED_FACETS.entry&&$.each(data.APPLIED_FACETS.entry,function(e,t){var a,i;if($.each([escape(t.key),encodeURIComponent(t.key)],function(e,t){if(i=t,0<(a=$("input[value='"+i+"']")).length)return!1}),!("LENS_TREATMENT_FACET"==t.mainLabel||"GENDER"==t.mainLabel)&&0<a.length){a.attr("checked","checked");var r=a.attr("id");a.parent().addClass("wcs-check"),$("label[for='"+r+"']").attr("onclick","Javascript:removeFacets('"+i+"');")}else{var s=t.key.split(","),o=[],n="";s.forEach(function(e,t){s[t]=escape(e),o[t]=encodeURIComponent(e)});var c=s.join(",");c=c.split("+").join(""),newValEncoded=o.join(","),newValEncoded=newValEncoded.split("+").join(""),$.each([c,newValEncoded],function(e,t){if(0<(n=$("a[value='"+t+"']")).length)return n.addClass("wcs-added"),n.attr("onclick","Javascript:removeFacets('"+t+"', true);"),!1}),$.each([c,newValEncoded],function(e,t){var a=$("input[value='"+t+"']");if(0<a.length){a.attr("checked","checked");var i=a.attr("id");return $("label[for='"+i+"']").attr("onclick","Javascript:removeFacets('"+t+"', true);"),!1}})}l.push(t.mainLabel.toUpperCase()+" > "+t.label.toLowerCase())}),data.sortOptions&&$.each(data.sortOptions,function(e,t){t.cssClass&&void 0!==t.cssClass&&l.push("SORT BY > "+t.label.toLowerCase())}),tealium_data2track.push({id:"WCS-X-Search-FilterUpdated",Filters_AttributesApplied_String:l.join("|")}),$.each($(".wcs-filter-refresh"),function(e,t){var a="";$.each($(t).find("input:checked"),function(e,t){a+=$(t).val()+","}),0<a.length&&(-1!=(a=a.substring(0,a.length-1)).indexOf("UNISEX")?$(t).find(".wcs-reset-icon-lg").attr("onclick","Javascript:removeFacets('"+a+"', true)"):$(t).find(".wcs-reset-icon-lg").attr("onclick","Javascript:removeFacets('"+a+"')"))}),$.each($(".wcs-frame-shape-model, .wcs-model-specials, .wcs-sunglass-details"),function(e,t){var a="";$.each($(t).find("input:checked"),function(e,t){a+=$(t).val()+","}),$.each($(t).find('a[onclick^="Javascript:removeFacets"]'),function(e,t){a+=$(t).eq(0).attr("value")+","}),a&&(a=a.substring(0,a.length),$(t).find(".wcs-reset-link").attr("href","Javascript:removeFacets('');"))}),window.element=$("#filterByDivArea"),window.element.length&&void 0===window.topOfElement&&void 0===window.bottomOfElement&&(window.topOfElement=window.element.offset().top,window.bottomOfElement=window.element.offset().top+window.element.outerHeight(!0),this.stickyPanelOnOff()),$("#wcs-sort-wrapper1 ul li").off("click").on("click",{self:this},this.sortByDropdownSelect),$(window).on("scroll onload",this.stickyPanelOnOff),this.hideAndShowViewHighlights(data)},sortByDropdownSelect:function(e){e.data.self;var t=$("#wcs-sort-wrapper1 ul li"),a=$("#basePageURL").val(),i=$(this).attr("data-entry-value");t.removeClass("selected"),$(this).addClass("selected"),$("#wcs-sort-display #wcs-selected-sort-option").val($(this).find(".wcs-selectedSortText").text());var r="orderBy="+$(this).attr("data-entry-value");if(void 0!==a&&-1===a.indexOf("orderBy="))a=a+"&"+r;else if(void 0!==a&&-1!==a.indexOf("orderBy=")){var s=a.split("orderBy=");if(void 0!==s&&2===s.length)if(void 0!==s[0]&&s[0].lastIndexOf("&")===s[0].length-1)if(void 0!==s[1]&&-1!==s[1].indexOf("&")){var o=s[1].indexOf("&"),n=s[1].lenght;a=s[0]+r+s[1].substring(o,n)}else a=s[0]+r;else if(void 0!==s[1]&&-1!==s[1].indexOf("&")){var c=s[1].indexOf("&"),l=s[1].lenght;a=s[0]+"?"+r+s[1].substring(c,l)}else a=void 0!==s[0]&&s[0].lastIndexOf("?")===s[0].length-1?s[0]+r:s[0]+"&"+r}$("#basePageURL").val(a),loadPanelWrapper(a,globalAppliedFactes),updateUrlParameter("orderBy",i),updateUrlParameter("pageSize",$("#facetPageSize").val()),$("#pageSize").val($("#facetPageSize").val())},bindEvent:function(){window.position_filterpannel(),window.filterbar(),window.open_filter(),window.close_filter(),window.filter_frame(),window.filter_color()},renderEyeGlassDisplay:function(){var e=$(".wcs-sunglass-details").children().length,t=$(".wcs-sunglass-details").children().first().find(".wcs-filter-frame-wrapper"),a=t.children("h6").length;if(4==e&&2==a){var i=t.children("h6").last().detach(),r=t.children("ul").last().detach(),s=$("<div>").addClass("wcs-290 wcs-columns wcs-alpha");s.append(i).append(r),$(".wcs-sunglass-details").children().first().after(s)}},stickyPanelOnOff:function(){var e=$(window).scrollTop()+$(window).height(),t=$(window).scrollTop();($(".wcs-sunglass-details").is(":visible")||$(".wcs-frame-shape-model").is(":visible"))&&window.element.hasClass("stickyPanel")&&($(".wcs-filter-inner-container > div").slideUp("slow"),$(".wcs-filter-link").removeClass("wcs-active").find(".wcs-down_arrow").animate({top:0},100),toggleSortbyDropdownStatus()),t>window.topOfElement&&t<=window.bottomOfElement?$(".plp-container").height()>$("#FrameShape").height()&&window.element.is(":visible")?(window.element.addClass("stickyPanel"),$("#FrameShape").addClass("filter-container-position-top")):(window.element.removeClass("stickyPanel"),$("#FrameShape").removeClass("filter-container-position-top")):t>=window.bottomOfElement&&t>window.topOfElement?$(".plp-container").height()>$("#FrameShape").height()&&window.element.is(":visible")?(window.element.addClass("stickyPanel"),$("#FrameShape").addClass("filter-container-position-top")):(window.element.removeClass("stickyPanel"),$("#FrameShape").removeClass("filter-container-position-top")):e<window.topOfElement&&e<window.bottomOfElement||e<window.bottomOfElement&&e>window.topOfElement||(window.element.removeClass("stickyPanel"),$("#FrameShape").removeClass("filter-container-position-top")),$(".plp-container").offset().top+$(".plp-container").outerHeight()<t?($("#filterByDivArea").hide(),$("#FrameShape").hide(),$(".wcs-filter-link").removeClass("wcs-active"),$("#productCategoriesContainer").hide(),$(".wcs-sunglass-details").hide(),$("#wcs-sort-display .wcs-custom-dropdown-select").hasClass("disabled-sort-by")&&($("#wcs-sort-display .wcs-custom-dropdown-select").removeClass("disabled-sort-by"),$("#wcs-sort-display .wcs-custom-dropdown-select input").removeClass("disabled-sort-by"))):(0!==$(".plp-container").height()?$("#filterByDivArea").show():$("#filterByDivArea").hide(),$("#FrameShape").show())},hideAndShowViewHighlights:function(e){"ProductListing"===$("#pageTemplate").val()&&e.clvPageURL?$(".view-hightlights-btn").show():$(".view-hightlights-btn").hide()}});$(document).ready(function(){var e=$("#pageTemplate").val();void 0!==e&&-1!=$.inArray(e,["ProductListing","SearchDispaly"])&&"true"!=$("#clearanceVariable").val()&&(window.facetView=new FacetView,"true"!=$("#clientSide").val()&&void 0!==$("#clientSide")&&window.facetView.fetchFacetData(),window.plpView=new TilesView(".plp-container"))}),window.applyFacets=function(e,t){var a=$("#basePageURL").val(),i=globalAppliedFactes,r="";r=void 0===t||""===t?createFacetValues(e,i):createFacetValuesExpression(e,i);try{var s=$("#pageTemplate").val(),o=$("#producttype").val();$("#userType").val();void 0===o&&void 0===s&&(o="Search",s="InternalSearchResults");for(var n=decodeURIComponent(r).split(","),c="",l=0,d=n.length;l<d;l++)if(n[l]){var p,u=n[l].split("=")[1].split(":"),f=u[1];-1!=f.indexOf("or")&&(p=f.split("+")[2]);var w=u[0];w=w.replace(/\(/g,"");var h,v,m=u[0].split("_"),g=m[m.length-3];if(void 0!==g?(h=g.indexOf("f"),v=g.match(/\d+/g)):g=w,null!=v&&void 0!==h&&-1!=h){$("#facetFieldNameMap").attr("value").replace(/ /g,"");$("#facetFieldNameMap").attr("value").replace(/\=/g,",");for(var b,y,C,k,S,P=$("#facetFieldNameMap").attr("value").replace(/ /g,"").split(","),x=0;x<P.length;x++)-1!=(b=P[x].split("="))[0].indexOf(w)?y=b[1]:-1!=b[0].indexOf(p)&&(C=b[1]);if(void 0!==y&&(k=(k=y.replace(/\"/g,"")).toLowerCase()),void 0!==C&&(S=(S=C.replace(/\"/g,"")).toLowerCase()),-1!=f.indexOf("or")&&null!=S&&""!==S){var _=f.split("+");c=c.concat(k,"_",_[0],"+or+",S,"|")}-1==f.indexOf("or")&&null!=k&&""!==k&&(c=c.concat(k,"_",f,"|"))}else c=c.concat(g,"_",f,"|")}c=c.slice(0,c.length-1)}catch(e){}loadPanelWrapper(a,r,"1"),$("#pageSize").val($("#facetPageSize").val()),void 0!==$("#pageType").val()&&"SearchResults"===$("#pageType").val()&&updateUrlParameter("pageSize",$("#facetPageSize").val()),$("#shownProductCount span:first-child").text($("#pageSize").val())},window.removeFacets=function(e,t){var a=$("#basePageURL").val();e=filterFacetParams(e);var r=globalAppliedFactes,s="";if(void 0!==r){if(void 0!==e&&""!==e&&(s=void 0===t||""===t?removeFacetValues(e,r):removeFacetValuesExpression(e,r)),(void 0===(globalAppliedFactes=s)||void 0!==s&&0===s.length||void 0!==s&&""===s)&&(checkedFiltersArray=[],checkedDivs=[]),void 0!==s&&0<s.length){var o=s.split(","),n=0,c=0;for(i=0;i<o.length;i++){var l=o[i].replace(/facet=/g,"");if(0===i&&(checkedFiltersArray=[]),checkedFiltersArray.push(l),""!==l&&$('input[value="'+l+'"]').parent().parent().hasClass("wcs-filter-frame")){var d=$($('input[value="'+l+'"]').parent().parent().children()[0]).attr("class").split(" ")[1];n=1,0===c&&(checkedDivs=[]),checkedDivs.push(d),c+=1}}0===n&&(checkedDivs=[])}loadPanelWrapper(a,s,"0")}$("#pageSize").val($("#facetPageSize").val()),void 0!==$("#pageType").val()&&"SearchResults"===$("#pageType").val()&&updateUrlParameter("pageSize",$("#facetPageSize").val()),$("#shownProductCount span:first-child").text($("#pageSize").val())},window.loadPanelWrapper=function(e,t,a){var i=new Array(3);i[0]="categoryListingMain",i[1]="filterByDivArea",i[2]="facetDivArea";var r=new Array(3);r[0]="categoryListingMain",r[1]="filterByDivArea",r[2]="facetDivArea",loadPanels(e,t,i,r,"POST",!1,a)},$("#facetDivArea").off("click").on("click",".wcs-filter-check",function(e){$(this).is(".disabled")||$(this).parent().is(".disabled")||($(this).is(".wcs-f-on")?($(this).removeClass("wcs-f-on"),$(this).parent().hasClass("wcs-filter-frame")&&$(this).parent().removeClass("wcs-check")):($(this).addClass("wcs-f-on"),$(this).parent().hasClass("wcs-filter-frame")&&$(this).parent().addClass("wcs-check"))),checkedFilters=$("label.wcs-f-on").find("input");var t=$("div.wcs-filter-frame.wcs-check").find("span.wcs-frame-icon");for((void 0===checkedDivs||void 0!==checkedDivs&&0<checkedDivs.length)&&(checkedDivs=[]),i=0;i<t.length;i++)checkedDivs.push($(t[i]).attr("class").split(" ")[1]);(void 0===checkedFiltersArray||void 0!==checkedFiltersArray&&0===checkedFiltersArray.length)&&(checkedFiltersArray=[]),$.each(checkedFilters,function(){checkedFiltersArray.push($(this).attr("value"))}),e.preventDefault()}),window.colorswatchsFn=function(){$(".wcs-color-icon").off("click").on("click",function(e){$(this).is(".wcs-color-unavailable")||($(this).is(".wcs-added")?$(this).removeClass("wcs-added"):$(this).addClass("wcs-added")),checkedFilters=$("a.wcs-added"),(void 0===checkedFiltersArray||void 0!==checkedFiltersArray&&0===checkedFiltersArray.length)&&(checkedFiltersArray=[]),$.each(checkedFilters,function(){checkedFiltersArray.push($(this).attr("value"))})})},colorswatchsFn();var facetFromURL=getUrlParameter("facet");0<facetFromURL.length?"string"==typeof facetFromURL?globalAppliedFactes="facet="+encodeURIComponent(getUrlParameter("facet")):"object"==typeof facetFromURL&&($.each(facetFromURL,function(e,t){""===globalAppliedFactes?globalAppliedFactes="facet="+encodeURIComponent(t):globalAppliedFactes+=",facet="+encodeURIComponent(t)}),globalAppliedFactes=globalAppliedFactes.replace("undefined,","")):globalAppliedFactes="";var framecolors=[];function preventEventPropagation(){return!1}function colorCarouselHoverHandler(){$(this).siblings("li").find(".wcs-carousel-image").removeClass("selected-color"),$(this).find(".wcs-carousel-image").addClass("selected-color");var e=$(this).data(),t=$(this).parents(".search-plp-tile"),a=$(".search-plp-tile-header .rc-label");t.find("#colorsCarouselOverlay #carouselHeader .selected-class").text($(this).index()+1),e.imageurl&&t.find("#SearchPlpTileBody img").attr("src",e.imageurl),e.remixurl&&t.find("#searchPlpTileHeader .customizeContainer").attr("data-url",e.remixurl),e.pdpurl&&t.parent("a").attr("href",e.pdpurl),e.prescriptionopticslabel?t.find(a).show():t.find(a).hide()}function colorCarouselClickHandler(){var e=$(this).data();window.location.href=e.pdpurl}function searchResultsLoadMoreContainer(){$("#searchResultsLoadMoreContainer .paging_controls").off("click").on("click",function(e){e.preventDefault();var t=location.href;$(".wcs-loading-icon-wrapper").show(),$(".wcs-loading-icon-wrapper").css("padding-bottom","115px"),$("#searchResultsLoadMoreContainer").hide();var a={},i=parseInt($("#pageNumber").val())+1;"SearchResults"!=$("#pageType").val()||isNaN(parseInt(getUrlParameter("pageSize")))||isNaN(parseInt($("#defaultPageSize").val()))||0===parseInt($("#defaultPageSize").val())||(i=parseInt(getUrlParameter("pageSize"))/parseInt($("#defaultPageSize").val())+1,i=Math.round(i)),$("#pageNumber").val(i);var r=parseInt($("#pageSize").val())+parseInt($("#facetPageSize").val());if("SearchResults"==$("#pageType").val()&&(r=parseInt($("#defaultPageSize").val())+parseInt($("#pageSize").val())),void 0===$("#pageType").val()&&-1!=t.indexOf("facet=")&&(r=isNaN(parseInt(getUrlParameter("pageSize")))?parseInt($("#pageSize").val())+parseInt($("#facetPageSize").val()):parseInt($("#facetPageSize").val())+parseInt(getUrlParameter("pageSize"))),$("#shownProductCount span:first-child").text(" "+r),$("#pageSize").val(r),"SearchResults"==$("#pageType").val()){var s=!1,o=parseInt(r/parseInt($("#newPageSize").val()));isNaN(o)||o%2==0||(s=!0),a={viewMode:$("#viewMode").val(),searchType:$("#searchType").val(),searchTermScope:$("#searchTermScope").val(),sType:$("#sType").val(),newpage:$("#newpage").val(),facet:getUrlParameter("facet"),clientSide:$("#clientSide").val(),pageNumber:i,pageSize:$("#defaultPageSize").val(),searchTerm:getUrlParameter("searchTerm").split("+").join(" "),enableCustomPagination:s}}t=-1!=t.indexOf("?")?-1!=t.indexOf("pageSize")?t.replace(/pageSize=[^&]+/,"pageSize="+r):t+"&pageSize="+r:t+"?pageSize="+r,history.replaceState(null,null,t),$.ajax({url:$("#nextPageSearch").val(),data:a,traditional:!0,success:function(e){$(".wcs-loading-icon-wrapper").hide(),$(".wcs-loading-icon-wrapper").css("padding-bottom","0"),$("#searchResultsLoadMoreContainer").show(),loadMoreProducts(e)}})})}function loadMoreProducts(e){"object"!=typeof e&&(e=$.parseJSON(e));Number(e.totalCount);var t,a=$.parseJSON(e.products);t=a.result?a.result.Category:new Array(a);var i=$(".plp-tile").last();if(window.plpView.render(t,!0),e.nextPageURL){$("#searchResultsLoadMoreContainer").show();var r=e.nextPageURL.split("amp;").join("");$("#nextPageSearch").val(r)}else $("#searchResultsLoadMoreContainer").hide();if("SearchResults"==$("#pageType").val()){var s=$(".categories").last().children();$(".categories").last().remove(),$(".categories").first().append(s)}$("html, body").animate({scrollTop:i.offset().top},300)}function openQuickViewHandler(e){e.preventDefault(),e.stopPropagation();var a=e.currentTarget,t={category_Id:$(a).data("catgroupid"),catentryId:$(a).data("catentryid"),catalogId:$("#catalogId").val(),storeId:$("#storeId").val(),langId:$("#langId").val(),responseFormat:"json"};0<$("#pdp_page").length?$(a).closest(".wcs-quick-buy").prev(".qv-overlay").show():$(".clearance-quick-view")&&0<$(".clearance-quick-view").length?$(a).closest(".clearance-quick-view").find(".qv-overlay").show():$(a).closest(".plp-tile").find(".qv-overlay").show();$.getJSON($("#quickViewAjax").text(),t,function(e){var t=[];t[0]=e.colors,t[1]=e.products,window.isROX="",("prescription"==$.trim($(a).data("isrox").toLowerCase())||0<$("#isRoxEnabled").length&&"true"===$("#isRoxEnabled").val())&&(window.isROX="true");getQuickViewValue(t,$(a).attr("id"));window.quickviewpopup=new QuickViewSummary(t),$(".qv-overlay").hide(),"prescription"==$.trim($(a).data("isrox").toLowerCase())||0<$("#isRoxEnabled").length&&"true"===$("#isRoxEnabled").val()?(QuickviewRox.prototype=window.quickviewpopup,QuickviewRox.prototype.constructor=QuickviewRox,window.quickviewRox=new QuickviewRox,quickviewRox.render()):quickviewpopup.render()}).error(function(e){tealium_data2track=tealium_data2track||[],tealium_data2track.push({id:"WCS-D-QuickViewOverlay-Loading-Error",Error_Source:"Server",Error_Code:e.responseText})})}function getQuickViewValue(e,t){for(var a=0,i=e.length;a<i;a++)return e[a]}$.each($("input.framecolors"),function(){framecolors.push($(this).attr("name"))}),window.removeApplyFacets=function(e,t){var a=$("#basePageURL").val(),r="";if(void 0!==globalAppliedFactes&&void 0!==e&&""!==e&&(r=removeFacetValues(e,globalAppliedFactes)),r=createFacetValues(t,r),(void 0===(globalAppliedFactes=r)||void 0!==r&&0===r.length||void 0!==r&&""===r)&&(checkedFiltersArray=[],checkedDivs=[]),void 0!==r&&0<r.length){var s=r.split(","),o=0,n=0;for(i=0;i<s.length;i++){var c=s[i].replace(/facet=/g,"");if(0===i&&(checkedFiltersArray=[]),checkedFiltersArray.push(c),""!==c&&$('input[value="'+c+'"]').parent().parent().hasClass("wcs-filter-frame")){var l=$($('input[value="'+c+'"]').parent().parent().children()[0]).attr("class").split(" ")[1];o=1,0===n&&(checkedDivs=[]),checkedDivs.push(l),n+=1}}0===o&&(checkedDivs=[])}loadPanelWrapper(a,r)},window.loadMoreResults=function(){$("#searchResultsLoadMoreContainer").remove();var e=new Array(1);if(e[0]=$("#searchResultsDiv").val(),nextPageURL=$("#nextPageSearch").val(),$("#searchResultsDiv").remove(),0<$("#nextPageSearch").length){var t="";0<$("#appliedFacets").length&&(t=$("#appliedFacets").val()),loadPanels(nextPageURL,t,e,null,"POST",!0)}},window.createFacetValues=function(e,t){var a="",r=e.split(",");for(i=0;i<r.length;i++)void 0!==t&&""!==t&&-1!=t.indexOf(r[i])||(void 0!==a&&0<a.length&&(a+=","),a=a+"facet="+r[i]);return void 0!==t&&(a=t+","+a),globalAppliedFactes=a},window.createFacetValuesExpression=function(e,t){var a="",r=e.split(",");for(i=0;i<r.length;i++)(void 0===t||""===t||-1==t.indexOf(r[i])||-1!=r[i].indexOf("UNISEX")||r[i].indexOf(escape($("#lensCombineValues").val())))&&(void 0!==a&&0<a.length?a+="+or+":a="facet=(",a+=r[i]);return a+=")",void 0!==t&&(a=t+","+a),globalAppliedFactes=a},window.removeFacetValues=function(e,t){var a,r,s="",o=t.split(",");for(i=0;i<o.length;i++)r=!1,-1!=o[i].indexOf("facet")&&((a=o[i].split("="))[1]=filterFacetParams(a[1]),(void 0!==framecolors[0]&&-1!=a[1].indexOf(framecolors[0])||void 0!==framecolors[1]&&-1!=a[1].indexOf(framecolors[1])||void 0!==framecolors[2]&&-1!=a[1].indexOf(framecolors[2])||void 0!==framecolors[3]&&-1!=a[1].indexOf(framecolors[3]))&&(a[1]=a[1].replace(/\+or\+/g,","),a[1]=a[1].replace(/%28/g,""),a[1]=a[1].replace(/%29/g,""),a[1]=a[1].replace(/\(/g,""),a[1]=a[1].replace(/\)/g,"")),-1!=e.indexOf(a[1])&&(r=!0),r||(void 0!==s&&0<s.length&&(s+=","),s+=o[i]));return globalAppliedFactes=s},window.removeFacetValuesExpression=function(e,t){var a,r="",s=t.split(",");for(facetValList=[],e=void 0!==e&&-1==e.indexOf("UNISEX")?-1!=t.indexOf("+")?e.replace(/,/g,"+or+"):e.replace(/,/g,"%2Bor%2B"):-1!=t.indexOf("+")?e.replace(",","+or+"):e.replace(",","%2Bor%2B"),facetValList=new Array(e),i=0;i<s.length;i++)if(!1,-1!=s[i].indexOf("facet")){for(a=s[i].split("="),j=0;j<facetValList.length;j++)-1!=a[1].indexOf(facetValList[j])&&(!0,s[i]=s[i].replace(facetValList[j],""),s[i]=s[i].replace("+or++or+","+or+"),s[i]=s[i].replace("%28+or+","%28"),s[i]=s[i].replace("%2Bor%2B","%2B"),s[i]=s[i].replace("(+or+","("),s[i]=s[i].replace("+or+%29","%29"),s[i]=s[i].replace("+or+)",")"),s[i]=s[i].replace("facet=%28%29",""),s[i]=s[i].replace("facet=(%2B)",""),s[i]=s[i].replace("facet=(%2B%2B)",""),s[i]=s[i].replace("facet=(%2B%2B%2B)",""),s[i]=s[i].replace("facet=()",""));r=""===r?s[i]:r+","+s[i]}return globalAppliedFactes=r},window.updateUrlParameter=function(e,t){var a,i=location.href,r=e+"="+t;if(-1!==i.indexOf(e)){var s=i.slice(i.indexOf(e),-1!==i.indexOf("&",i.indexOf(e))?i.indexOf("&",i.indexOf(e)):i.length);a=i.replace(s,r)}else a=-1!==i.indexOf("?")?i.concat("&"+r):i.concat("?"+r);history.replaceState(null,null,a)},window.tealium_data2track=window.tealium_data2track||[],$(document).ready(function(){var e=null!==document.ontouchstart?"click":"touchstart";$("#colorsCarouselOverlay .tileOverlayContent").off("click").on("click",preventEventPropagation),$("#colorsCarouselOverlay .tileOverlayContent ul li").off("hover").on("hover",colorCarouselHoverHandler),$("#colorsCarouselOverlay .tileOverlayContent ul li").off("click").on("click",colorCarouselClickHandler),$(".quickViewLink").off(e).on(e,openQuickViewHandler),searchResultsLoadMoreContainer(),null!==navigator.userAgent.match(/iPad/i)&&$(".tileOverlay").off("touchstart").on("touchstart",function(e){var t=$(this).closest("a").attr("href");window.location=t}),$(".customizeContainer").off(e).on(e,function(e){e.preventDefault();var t=e.currentTarget,a=$(t).data("url");e.ctrlKey||e.metaKey?window.open(a,"_newtab"):window.open(a,"_self")}),null===$("#nextPageSearch")||0===$("#nextPageSearch").length||""===$("#nextPageSearch").val()?$("#searchResultsLoadMoreContainer").hide():"true"!=$("#clientSide").val()&&$("#searchResultsLoadMoreContainer").show(),$("#colorsCarouselOverlay ul").each(function(){var e=$(this);$(this).bxSlider({infiniteLoop:!1,hideControlOnEnd:!0,slideWidth:60,slideMargin:12,pager:!1,minSlides:1,maxSlides:4,moveSlides:4,preloadImages:"all",responsive:!1,onSliderLoad:function(){setTimeout(function(){4<e.find("li").length?$(e.closest(".bx-wrapper").find(".bx-controls .bx-controls-direction a.bx-next")).eq(0).removeClass("disabled"):$(e.closest(".bx-wrapper").find(".bx-controls .bx-controls-direction a.bx-next")).eq(0).addClass("disabled")},200)}})}),$("#colorsCarouselOverlay .bx-controls-direction a.bx-prev,#colorsCarouselOverlay .bx-controls-direction a.bx-next").addClass("D_PLP_TilesArrows"),$.each($("#colorsCarouselOverlay .tileOverlayContent ul"),function(e,t){$(this).parents("#carouselBody").siblings("#carouselHeader").find(".selected-class").text($(this).find("li.selected-list-item").index()+1)})}),window.qvCarousel=null;var QuickViewSummary=Class({initialize:function(e){Handlebars.partials=Rayban.templates,this.product=e,this.containerId="","true"==window.isROX||0<$("#isRoxEnabled").length&&"true"===$("#isRoxEnabled").val()?this.containerId="D_QuickView_Prod":this.containerId="D_QuickView",this.container=$("#"+this.containerId),this.sliderContainer=this.container.find("#slider-container"),this.headerContainer=this.container.find("#header-container"),this.layoutContainer=this.container.find("#layout-container"),this.quickViewTemplate=Rayban.templates["quickview-template"],this.eventType=null!==document.ontouchstart?"click":"touchstart",this.isiPad=null!==navigator.userAgent.match(/iPad/i),this.sizeDropdownContainer=$("#wcs-size-display"),this.productSku="",this.selectedProductData=[]},bindEvent:function(e){e.container.find("#slider-container .wcs-carousel li a").off(e.eventType).on(e.eventType,{self:e},e.productListHandler),e.container.find(".wcs-close-btn, .wcs-fadeout-full, .wcs-fadeout").off(e.eventType).on(e.eventType,{self:e},e.close),$(".wcs-addtobag").off(e.eventType).on(e.eventType,{self:e},e.addToBagHandler),$(".wcs-custom-dropdown li").off(e.eventType).on(e.eventType,{self:e,fromElem:"size"},e.changeSizeDropDownHandler),$(".so-quickview-email-me").off(e.eventType).on(e.eventType,{self:e},e.openEmailPopUp),$("#D_QuickView_PolarBtn .dd-options li").off("click").on("click",{self:e,fromElem:"type"},e.changeSizeDropDownHandler)},render:function(){var e,a="";$.each(this.product[0].carousel,function(e,t){t.selected&&(a=t.details.value)}),this.productSKU=a,1<this.product[0].carousel.length?(this.preLoadimages(this.product[0].carousel),this.container.find("#slider-container").attr("style","display:block"),this.sliderRender(this.product[0])):this.container.find("#slider-container").attr("style","display:none"),e=this.product[0].hasOwnProperty("label")?this.product[0].label:"",this.selectedProductData=this.product[1][a],this.currencySymbol=this.product[0].currencySymbol,("true"==window.isROX||0<$("#isRoxEnabled").length&&"true"===$("#isRoxEnabled").val())&&(this.selectedProductData.addToBagFlag=this.product[1][this.selectedProductData.frameCatentryId].addToBagFlag,this.updateROXPrices()),this.layoutRender(this.product[1][a],e,"onReady"),window.display_center_1(this.container),window.show_full_fadeout_1(),this.container.show().removeClass("wcs-hidden").removeClass("wcs-hide"),load_scroller(),expand_dropbox(),this.bindEvent(this),this.checkifAddedToWishList(this.product[1][a].catentryId),window.initNotification()},sliderRender:function(t){var a=this;if(this.sliderContainer.html(""),this.sliderContainer.html(this.quickViewTemplate({p:"bottom_carousel",templateData:t})),"accessories"!=$("#productCatType").val()){var e=0,i=$("#D_QuickView_Prod_ColorsThumbs .wcs-selected").index();e=i/4,e=parseInt(e),window.qvCarousel=void 0,setTimeout(function(){4<$("#D_QuickView .wcs-carousel li").length?window.qvCarousel=$("#D_QuickView .wcs-carousel").bxSlider({infiniteLoop:!1,hideControlOnEnd:!0,slideWidth:110,startSlide:e,slideMargin:10,pager:!1,minSlides:1,maxSlides:4,moveSlides:4,preloadImages:"all",onSliderLoad:function(){var e=$(".wcs-carousel li:first").find(".wcs-quickView-product-list-frame").position().top;$(".frameLensLabelCntr").css({top:e+"px"}),a.container.find("#slider-container").css({visibility:"visible"}),a.container.find(".bx-prev").attr("id","D_QuickView_Prod_ColorsPrev"),a.container.find(".bx-next").attr("id","D_QuickView_Prod_ColorsNext"),t.length<=4?(a.container.find(".bx-prev").hide(),a.container.find(".bx-next").hide()):(a.container.find(".bx-prev").show(),a.container.find(".bx-next").show())}}):window.qvCarousel=a.container.find(".wcs-carousel").bxSlider({infiniteLoop:!1,hideControlOnEnd:!0,slideWidth:110,startSlide:e,slideMargin:10,pager:!1,controls:!1,minSlides:1,maxSlides:4,moveSlides:4,preloadImages:"all",onSliderLoad:function(){var e=$(".wcs-carousel li:first").find(".wcs-quickView-product-list-frame").position().top;$(".frameLensLabelCntr").css({top:e+"px"}),a.container.find("#slider-container").css({visibility:"visible"}),a.container.find(".bx-prev").attr("id","D_QuickView_Prod_ColorsPrev"),a.container.find(".bx-next").attr("id","D_QuickView_Prod_ColorsNext"),t.length<=4?(a.container.find(".bx-prev").hide(),a.container.find(".bx-next").hide()):(a.container.find(".bx-prev").show(),a.container.find(".bx-next").show())}})},500)}},layoutRender:function(e,t,a){var i=this;this.layoutContainer.html(this.quickViewTemplate({p:"quickview_desc",products:e})),expand_dropbox(),$(".wcs-size-dropdown li").off(this.eventType).on(this.eventType,this.changeSizeDropDownHandler),window.initNotification(),$("#D_QuickView_PolarSelection").ddslick({width:128,imagePosition:"left",background:"#fff",onSelected:function(e){i.adjustOptionsHeight($("#D_QuickView_PolarSelection")),$(".dd-option").parent().show(),$(".dd-option-selected").parent().hide()}});var r=$("#D_QuickView_PolarSelection");1==r.find(".dd-options li").length?($(".dd-select, .dd-selected, .dd-selected").off("click"),r.find(".dd-pointer").hide()):r.find(".dd-pointer").show(),$(".dd-select").on("click",function(){$(this).find(".dd-pointer").is(":visible")&&$(this).toggleClass("open-shadow")}),1==$("ul.wcs-custom-dropdown").find("li").length?($("#wcs-size-display").addClass("no-event"),$(".wcs-custom-dropdown-select").addClass("no-event"),$(".wcs-custom-dropdown-select .wcs-dropdown-icon ").hide()):$(".wcs-custom-dropdown-select .wcs-dropdown-icon ").show(),i.callAnalytics(e,a)},adjustOptionsHeight:function(i){i.find(".dd-option").each(function(){var e=$(this),t=e.find(".dd-option-description"),a=i.find(".dd-option-image");t.length<=0&&0<a.length&&e.find(".dd-option-text").css("line-height","14px")}),$(".dd-selected-text").css("line-height","14px")},addToBagHandler:function(e){e.preventDefault();var t=e.data;0<t.self.container.find("#wcs-size-selectedSize").length&&-1!=t.self.container.find("#wcs-size-selectedSize").attr("class").indexOf("dummy-select")?t.self.container.find(".qty-stock-msg").removeClass("wcs-hide"):(t.self.container.find(".wcs-addedtobag").show(),$(".quickview-prod-addtocart").hide(),t.self.container.find(" .wcs-addedtobag").text($("#addingText").val()+".."),t.self.isiPad||product_ID_fn(e))},close:function(e){e.preventDefault();var t=e.data;window.hide_full_fadeout(t.self.containerId),t.self.container.hide()},productListHandler:function(e){e.preventDefault();var t=e.data.self;t.container.find(".qty-stock-msg").addClass("wcs-hide"),t.productSku=$(e.target).closest("li").data("product_sku");var a=t.product[1][t.productSku];t.selectedProductData=a,("true"==window.isROX||0<$("#isRoxEnabled").length&&"true"===$("#isRoxEnabled").val())&&(t.selectedProductData.addToBagFlag=t.product[1][t.selectedProductData.frameCatentryId].addToBagFlag,t.updateROXPrices()),t.container.find("#slider-container .wcs-carousel li").removeClass("wcs-selected"),$(e.target).closest("li").addClass("wcs-selected"),t.layoutRender(a,"",""),t.bindEvent(t),t.checkifAddedToWishList(a.catentryId)},checkifAddedToWishList:function(a){var i=this,e=$("#wishListCatentryIds").val();void 0!==e&&(e=e.replace("[","").replace("]","").split(",")),$.each(e,function(e,t){$.trim(a)!=$.trim(t)||i.container.find(".wcs-fav-container").find("span").hasClass("wcs-quickbuy-favourite")&&(i.container.find(".wcs-fav-container").find("span").removeClass("wcs-quickbuy-favourite").addClass("wcs-quickbuy-tickMark"),i.container.find(".wcs-fav-container").find("a").addClass("wcs-favourite-added").text(i.container.find(".wcs-fav-container").find("a").data("save-label")))})},changeSizeDropDownHandler:function(e){e.preventDefault();var t=e.data.self,a=e.currentTarget;"size"==e.data.fromElem?this.productSKU=$(a).data("catid"):"type"==e.data.fromElem&&(this.productSKU=$(a).find(".dd-option-value").val());var i=[],r="";if("true"==window.isROX||0<$("#isRoxEnabled").length&&"true"===$("#isRoxEnabled").val()?"size"==e.data.fromElem?($("#frameCatentryId").val(this.productSKU),t.mergeLensframeData(),(i=t.selectedProductData).frameCatentryId=this.productSKU,r="onFrameChange"):(i=t.product[1][this.productSKU],t.selectedProductData=i,t.mergeLensframeData()):(i=t.product[1][this.productSKU],t.selectedProductData=i),t.container.find(".qty-stock-msg").addClass("wcs-hide"),"true"==$(a).find(".dd-option-isDummy").val()||!0===$(a).find(".dd-option-isDummy").val())return t.sizeDropdownContainer=$("#wcs-size-display"),t.sizeDropdownContainer.html(t.quickViewTemplate({p:"dummy_select_qv",products:i})),expand_dropbox(),void t.bindEvent(t);t.layoutRender(i,"",r),t.bindEvent(t),t.checkifAddedToWishList(i.catentryId)},openEmailPopUp:function(e){var t=e.data,a=e.currentTarget,i=$(a).data("catid"),r=t.self.product[1][i];storeID=$("#storeId").val(),catalogID=$("#catalogId").val(),langId=$("#langId").val(),emailSRC="EmailTest",productId=r.catentryId,metaTitle=$.trim(r.modelName),sku=r.displaySKU,partNumber=r.partNumber,altText=r.altText,title=$.trim(r.modelName),categoryTypeForEmail=r.productType,prodCatType=r.productType,name=$.trim(r.modelName),"TRUE"==r.onSaleVal?(price=$.trim(r.offerPrice),clearancePrice=$.trim(r.listPrice)):(price=$.trim(r.offerPrice),clearancePrice=""),t={storeId:storeID,catalogId:catalogID,catEntryId:productId,langId:langId,emailSRC:emailSRC,metaTitle:metaTitle,sku:sku,productId:productId,partNumber:partNumber,altText:altText,title:title,categoryTypeForEmail:categoryTypeForEmail,prodCatType:prodCatType,price:price,name:name,clearancePrice:clearancePrice},sendAjaxRequest("PreOrderRemindMeEmailView",appendNotificationData,t)},preLoadimages:function(e){var i=null;i=0===$("#preloadQVImgContainer").length?$("<div>").attr("id","preloadQVImgContainer").hide():$("#preloadQVImgContainer").hide(),$.each(e,function(e,t){var a=$("<img>").attr("src",t.details.imageUrl+"?$594$");a.attr("width","1"),a.attr("height","1"),i.append(a)}),this.container.append(i)},callAnalytics:function(e,t){window.tealium_data2track=window.tealium_data2track||[];var a={},i={},r=e.partNumber,s="";void 0!==e.unFormattedPrice&&(s=e.unFormattedPrice),i.Category=e.productCategory,i.Units=1,i.Price=s;var o="";"Y"==e.addToBagFlag?o="Available":"ACTIVE"==e.lifecycleVal||void 0===e.lifecycleVal?(0===e.buyableqty&&(o="NotAvailable"),0<e.buyableqty&&(o="NotSellable")):o="NotSellable",i.Status=o,i.DataSource=e;var n=i.DataSource;n.hasOwnProperty("listPrice")&&"FALSE"==n.onSaleVal&&(n.promotionalPrice=n.offerPrice,i.DataSource=n);a[""+r]=i,window.tealium_data2track.push({id:"WCS-X-QuickViewOverlay-QuickviewProds-Init",Products:a}),window.tealium_data2track.push({id:"WCS-D-QuickViewOverlay-Loading-Ready"})}}),QuickviewRox=function(){this.bindEvent=function(e){QuickViewSummary.prototype.bindEvent.apply(e,[this]),$(".quickView-rox .prescriptionButton").off(e.eventType).on(e.eventType,{self:e},e.changePrescription)},this.changePrescription=function(e){var t=e.data.self;return $(e.currentTarget).hasClass("prescriptionButton")&&(t.productSKU=$(e.currentTarget).find(".prescription-val").val(),t.selectedProductData=t.product[1][t.productSKU],t.selectedProductData.addToBagFlag=t.product[1][t.selectedProductData.frameCatentryId].addToBagFlag,t.updateROXPrices(),t.layoutRender(t.selectedProductData,"",""),t.bindEvent(t),t.checkifAddedToWishList(t.selectedProductData.catentryId)),!1},this.checkifAddedToWishList=function(e){var t=$("#wishListCatentryIds").val(),a=this.product[1][e].frameCatentryId;a+="_"+this.product[1][e].catentryId;var r=this.product[1][e].mandatoryServices.split(",");if(1==r.length)a+="_"+this.product[1][e].mandatoryServices;else for(i=0;i<r.length;i++)a+="_"+r[i];void 0!==t&&(t=t.replace("[","").replace("]","").split(",")),$.each(t,function(e,t){$.trim(a)!=$.trim(t)||$("#D_QuickView_Prod .wcs-fav-container").find("span").hasClass("wcs-quickbuy-favourite")&&($("#D_QuickView_Prod .wcs-fav-container").find("span").removeClass("wcs-quickbuy-favourite").addClass("wcs-quickbuy-tickMark"),$("#D_QuickView_Prod .wcs-fav-container").find("a").addClass("wcs-favourite-added").text($("#D_QuickView_Prod .wcs-fav-container").find("a").data("save-label")))})},this.mergeLensframeData=function(){var e=$("#frameCatentryId").val(),t=JSON.parse(JSON.stringify(quickviewRox.product[1][e])),a=JSON.parse(JSON.stringify(quickviewRox.product[1][quickviewRox.selectedProductData.catentryId]));self=this,$.each(t,function(e,t){a.hasOwnProperty(e)&&"addToBagFlag"!=e&&"selectedSizeValue"!=e&&"size"!=e&&"framePrice"!=e&&"modelSize"!=e&&"modelSizeDisplay"!=e&&"selectedSize"!=e||(self.selectedProductData[e]=t)}),self.updateROXPrices()},this.updateROXPrices=function(){self=this;var e,t,a,i,r,s=$("#frameCatentryId").val()?$("#frameCatentryId").val():quickviewRox.selectedProductData.frameCatentryId,o=JSON.parse(JSON.stringify(quickviewRox.product[1][s])),n=JSON.parse(JSON.stringify(quickviewRox.product[1][quickviewRox.selectedProductData.catentryId])),c=0;o.hasOwnProperty("unformattedFramePrice")&&n.hasOwnProperty("unformattedLensPrice")&&(e=o.hasOwnProperty("unformattedFramePrice")?o.unformattedFramePrice:0,t=n.hasOwnProperty("unformattedLensPrice")?n.unformattedLensPrice:0,a=(parseFloat(e)+parseFloat(t)).toFixed(2)),(o.hasOwnProperty("unformattedFramePromoPrice")||n.hasOwnProperty("unformattedLensPromoPrice"))&&(i=o.hasOwnProperty("unformattedFramePromoPrice")?o.unformattedFramePromoPrice:o.unformattedFramePrice,r=n.hasOwnProperty("unformattedLensPromoPrice")?n.unformattedLensPromoPrice:n.unformattedLensPrice,c=(parseFloat(i)+parseFloat(r)).toFixed(2)),c&&a&&c<a?(self.selectedProductData.listPrice=self.currencySymbol?self.currencySymbol+" "+a:a,self.selectedProductData.offerPrice=self.currencySymbol?self.currencySymbol+" "+c:c):a&&(delete self.selectedProductData.listPrice,self.selectedProductData.offerPrice=self.currencySymbol?self.currencySymbol+" "+a:a)},this.callAnalytics=function(e,t){window.tealium_data2track=window.tealium_data2track||[];var a={},i={},r=e.partNumber,s="";void 0!==e.unFormattedPrice&&(s=e.unFormattedPrice),i.Category="prescription-sunglasses","onReady"!=t&&"onFrameChange"!=t||(r=this.product[1][e.frameCatentryId].partNumber),i.Units=1,i.Price=s;var o="";"Y"==e.addToBagFlag?o="Available":"ACTIVE"==e.lifecycleVal||void 0===e.lifecycleVal?(0===e.buyableqty&&(o="NotAvailable"),0<e.buyableqty&&(o="NotSellable")):o="NotSellable",i.Status=o,i.DataSource=e;a[""+r]=i,window.tealium_data2track.push({id:"WCS-X-QuickViewOverlay-QuickviewProds-Init",Products:a}),window.tealium_data2track.push({id:"WCS-D-QuickViewOverlay-Loading-Ready"})}};function redirectCartUrl(){var e=$("#OrderId").val(),t=$("#shipModeId2").val(),a=$("#expRedirectUrl").val(),i={};i.orderId=e,i.shipModeId=t,$.ajax({type:"POST",url:"AjaxShipChargeUpdate",data:i,async:!1,success:function(e){$(location).attr("href",a)}})}window.filterbar=function(){$(".wcs-filter-bar > label").off("click").on("click",function(){$('.wcs-filter-link[data-type="wcs-frame-sunglass-filter"]').trigger("click")}),toggleSortbyDropdownStatus()},window.position_filterpannel=function(){if($(".wcs-filter-type").length<1)$(".wcs-filter-container").css({top:"","margin-bottom":""});else{var e=$(".wcs-filter-type").height();$(".wcs-filter-container").css({top:-e+"px","margin-bottom":-e+"px"})}},window.open_filter=function(){$(".wcs-filter-link").off("click").on("click",function(e){if(e.preventDefault(),$(this).hasClass("wcs-active"))$(".wcs-filter-container .wcs-close-btn").trigger("click"),$("#wcs-sort-display .wcs-custom-dropdown-select").removeClass("disabled-sort-by"),$("#wcs-sort-display .wcs-custom-dropdown-select input").removeClass("disabled-sort-by");else{position_filterpannel();var t=$(this).attr("data-type");$(".wcs-filter-link .wcs-down_arrow").hide(),$("#wcs-sort-display .wcs-custom-dropdown-select").addClass("disabled-sort-by"),$("#wcs-sort-display .wcs-custom-dropdown-select input").addClass("disabled-sort-by"),$("#wcs-sort-display #wcs-sort-wrapper1").addClass("wcs-hide"),$(".wcs-filter-inner-container > div").is(":visible")?($(this).find(".wcs-down_arrow").css("top","8px").css("display","block"),$(".wcs-filter-inner-container > div").hide(),$(".wcs-filter-link").removeClass("wcs-active"),$(this).addClass("wcs-active"),"wcs-frame-shape-filter"==t?$(".wcs-filter-inner-container").find(".wcs-frame-shape-model").show():"wcs-frame-models-filter"==t?$(".wcs-filter-inner-container").find(".wcs-model-specials").show():"wcs-frame-sunglass-filter"==t?("MX"==$("#country").val()&&$(".wcs-sunglass-details .wcs-omega ul:first").css("text-transform","none"),$(".wcs-filter-inner-container").find(".wcs-sunglass-details").show()):"wcs-frame-optics-filter"==t&&$(".wcs-filter-inner-container").find(".wcs-optics-details").show()):($(this).find(".wcs-down_arrow").animate({top:8},200).css("display","block"),$(".wcs-filter-inner-container > div").hide(),$(".wcs-filter-link").removeClass("wcs-active"),$(this).addClass("wcs-active"),"wcs-frame-shape-filter"==t?$(".wcs-filter-inner-container .wcs-frame-shape-model").slideDown("fast"):"wcs-frame-models-filter"==t?$(".wcs-filter-inner-container").find(".wcs-model-specials").slideDown("fast"):"wcs-frame-sunglass-filter"==t?("MX"==$("#country").val()&&$(".wcs-sunglass-details .wcs-omega ul:first").css("text-transform","none"),$(".wcs-filter-inner-container").find(".wcs-sunglass-details").slideDown("fast")):"wcs-frame-optics-filter"==t&&$(".wcs-filter-inner-container").find(".wcs-optics-details").slideDown("fast"))}})},window.close_filter=function(){$(".wcs-filter-container .wcs-close-btn").off("click").on("click",function(){$(".wcs-filter-inner-container > div").slideUp("fast"),$(".wcs-filter-link").removeClass("wcs-active").find(".wcs-down_arrow").animate({top:0},100),toggleSortbyDropdownStatus()})},window.close_filter_outside=function(){$(document).mouseup(function(e){var t=$("#FrameShape"),a=$("#filterByDivArea");!0!==$(".wcs-sunglass-details").is(":visible")&&!0!==$(".wcs-frame-shape-model").is(":visible")||t.is(e.target)||0!==t.has(e.target).length||a.is(e.target)||0!==a.has(e.target).length||$(".wcs-filter-container .wcs-close-btn").trigger("click")})},window.filter_frame=function(){$(".wcs-filter-frame .wcs-frame-icon-wrap").off("click").on("click",function(){$(this).parent().hasClass("disabled")||$(this).parent().addClass("wcs-check").find(".wcs-filter-check").trigger("click")})},window.filter_color=function(){$(".wcs-color-icon").off("click").on("click",function(e){e.preventDefault(),$(this).hasClass("wcs-color-unavailable")||($(this).hasClass("wcs-added")?$(this).removeClass("wcs-added"):$(this).addClass("wcs-added"))})},window.toggleSortbyDropdownStatus=function(){$(".wcs-filter-link").hasClass("wcs-active")?($("#wcs-sort-display .wcs-custom-dropdown-select").addClass("disabled-sort-by"),$("#wcs-sort-display .wcs-custom-dropdown-select input").addClass("disabled-sort-by"),$("#wcs-sort-display #wcs-sort-wrapper1").addClass("wcs-hide")):($("#wcs-sort-display .wcs-custom-dropdown-select").removeClass("disabled-sort-by"),$("#wcs-sort-display .wcs-custom-dropdown-select input").removeClass("disabled-sort-by"))},function(e,d,t){e.myAccount=new function(){function l(e,t){var a="";if(t){var i=t;-1!=i.indexOf(e)&&(a=(i=i.substring(i.indexOf(e))).split("&")[0].split("=")[1]),-1!=a.indexOf("#")&&(a=a.split("#")[0])}return a}function e(){var e=d(".wcs-status-shipped-rightContent").attr("data-attr");d(".wcs-status-shipped-leftContent").attr("data-text")==e&&d(".wcs-status-shipped-leftContent").addClass("wcs-trackOrder-shipped"),d(".wcs-account-switchDetails").off("click").on("click",function(){reset_editDetail_form(),d("#emailSignUp-inactive").parent().addClass("wcs-hide"),d("#emailSignUp").parent().removeClass("wcs-hide"),d("#wcs-account-changeDetails, #wcs-account-edit-form, #wcs-account-editDetails, #wcs-account-preferences").toggleClass("wcs-hide"),d(".wcs-myPreferences .wcs-label-check").toggleClass("wcs-label-check-edit"),this.init=function(){return this}}),d(".wcs-accont-cancelEdit").off("click").on("click",function(){var e,t=d("#wcs-account-firstName").html(),a=d("#wcs-account-lastName").html(),i=d("#wcs-account-phoneNumber").html(),r=d("#wcs-account-dob").html();""!==r&&(d.browser.msie&&parseInt(d.browser.version,10),e=d.trim(r).split("/")),d("#emailSignUp").is(":checked")?d("#emailSignUp").attr("checked","checked").parent().addClass("wcs-c-on"):d("#emailSignUp").removeAttr("checked").parent().removeClass("wcs-c-on"),d("#emailSignUp-inactive").parent().removeClass("wcs-hide"),d("#emailSignUp").parent().addClass("wcs-hide"),d("#wcs-account-edit-form input[name='firstName']").val(t),d("#wcs-account-edit-form input[name='lastName']").val(a),d("#wcs-account-edit-form input[name='phone1']").val(i),""!==e?(d("#wcs-month-load").val(e[0]),d("#wcs-day-load").val(e[1]),d("#wcs-year-load").val(e[2])):(d("#wcs-month-load").val(d("#wcs-dob_month").val()),d("#wcs-day-load").val(d("#wcs-dob_day").val()),d("#wcs-year-load").val(d("#wcs-dob_year").val())),d("#wcs-account-changeDetails, #wcs-account-edit-form, #wcs-account-editDetails, #wcs-account-preferences").toggleClass("wcs-hide"),d(".wcs-myPreferences .wcs-label-check").toggleClass("wcs-label-check-edit"),d("#wcs-account-edit-form input[type='radio']").removeClass("ui-state-valid"),d("#wcs-account-edit-form input[type='radio']").parent().removeClass("wcs-r-on"),d("#wcs-account-edit-form input[type='radio'][checked='checked']").addClass("ui-state-valid"),d("#wcs-account-edit-form input[type='radio'][checked='checked']").parent().addClass("wcs-r-on")}),window.cancel_link=function(){d(".wcs-quick-buy-lightbox a.wcs-myOrder-status-link,.wcs-quick-buy-lightbox #wcs_close_lightBox").off("click").on("click",function(){d(this).closest(".wcs-quick-buy-lightbox").children("span.wcs-close-btn").trigger("click"),d(this).closest(".wcs-quick-buy-lightbox").find(".wcs-row").find("input").removeClass("ui-state-error")})},cancel_link(),d(".wcs-myOrder-status-details").off("click").on("click",function(){var t,a,e,i,r,s=d(this).attr("data-text"),o=d(this).attr("id"),n=d(this).parent().parent().attr("orderId"),c=d("#"+s).attr("ajaxLoaded");"wcs-myOrder-viewDetails"==o&&"false"==c?(t=n,a=s,e=l("storeId",location.href),i=l("catalogId",location.href),(r={}).orderId=t,r.storeId=e,r.catalogId=i,d.ajax({type:"POST",url:"OrderItemDetailsView",data:r,success:function(e){d("#wcs_orderHistory_viewDetails_"+t).html(e),d("#wcs_orderHistory_viewDetails_"+t).attr("ajaxLoaded","true"),d(".wcs-myOrder-status-details[data-text="+a+"]").toggleClass("wcs-hide"),d(".wcs-orderHistory-viewDetails[id="+a+"]").toggleClass("wcs-hide"),d(".wcs-myOrder-details-content.wcs-myOrder-history-content[data-attr="+a+"]").toggleClass("wcs-hide"),show_light_box(),d(".wcs-icon.wcs-info.wcs-tip").hover(function(e){d(this).children("p").toggleClass("wcs-hidden");var t=d(this).children("p:not('.wcs-hide')").height()/2,a=12-t;d(this).children("p").css("top",a),d(this).children("p").children("span.wcs-notification-arrow").css("top",t-10)}),d(".wcs-myorders-cancel-order-link").off("click").on("click",function(){var e=d("#wcs_myOrder_cancelOrder").attr("data-order-lighbox");d("#wcs-cancel-order-form input[name=orderId]").val(e),d("#wcs-cancel-order-form").submit()}),d(".wcs-myorders-re-order-link").off("click").on("click",function(){var e=d(this).attr("data-order");d("#wcs-re-order-form input[name=fromOrderId]").val(e),d("#wcs-re-order-form input[name=reOrderId]").val(e),d("#wcs-re-order-form").submit()}),openLinksInNewTab(),0<d(".D_Payment_ViewPickupBtnOverlay").length&&deliveryObj.viewOrderDetailsAjax()},error:function(e,t,a){}})):(d(".wcs-myOrder-status-details[data-text="+s+"]").toggleClass("wcs-hide"),d(".wcs-orderHistory-viewDetails[id="+s+"]").toggleClass("wcs-hide"),d(".wcs-myOrder-details-content.wcs-myOrder-history-content[data-attr="+s+"]").toggleClass("wcs-hide"),0<d(".D_Payment_ViewPickupBtnOverlay").length&&deliveryObj.viewOrderDetailsAjax()),prevOrderId=d("#printPrevOrderId").val(),""===prevOrderId?(d("#printPrevOrderId").val(n),d("#wcs_print_preview").attr("id","wcs_print_preview_"+n)):(d("#wcs_print_preview_"+prevOrderId).attr("id","wcs_print_preview_"+n),d("#printPrevOrderId").val(n))}),d(".wcs-myOrder-status-details").parent(".wcs-myOrder-status-title").unbind("click").click(function(e){e.target==this&&d(this).find(".wcs-myOrder-status-details:visible").click()}),d(".wcs-order-history-circle").off("click").on("click",function(){var e=d(this).parent().attr("data-attr");d(".wcs-myOrder-status-viewDetails[data-text="+e+"]").trigger("click")}),d(".wcs-account-edit-save").off("click").on("click",function(){if(!d(this).hasClass("wcs-btn-disable")){var e=d("#wrapper4val").val(),t=d("#wrapper5val").val(),a=d("#wrapper6val").val(),i=calculateAgeUsingDate(t,e,a);if(d("#wcs-dob-subscribe-error").removeClass("wcs-show").hide(),i<18?d("#wcs-dob-error").addClass("wcs-show").show():d("#wcs-dob-error").removeClass("wcs-show").hide(),""===e||""===t||""===a)d("#wcs-dob").remove();else{var r=a+"-"+t+"-"+e;d("#wcs-dob").val(r)}var s=d("#wcs-EmailPrefVal").val(),o=d("#curentTime").val();if(d("#userType").val(),"null"!=s?d("#emailSignUp").is(":checked")?(d("#emailSignUp-inactive").attr("checked","checked").parent().addClass("wcs-c-on"),d("#emailTimeStamp").val(o),d("#emailSubs").val(1)):(d("#emailSignUp-inactive").removeAttr("checked").parent().removeClass("wcs-c-on"),d("#emailTimeStamp").val(o),d("#emailSubs").val(0)):d("#emailSignUp").is(":checked")?(d("#emailSignUp-inactive").attr("checked","checked").parent().addClass("wcs-c-on"),d("#emailTimeStamp").val(o),d("#emailSubs").val(1)):(d("#emailSignUp-inactive").removeAttr("checked").parent().removeClass("wcs-c-on"),d("#emailTimeStamp").remove(),d("#emailSubs").remove()),!d("#wcs-dob-error").is(":visible")){var n=d("#wcs-account-edit-form");n.find("input:text.required:visible").trigger("blur"),show_error(n.find("input.ui-state-error")),n.find(".wcs-dropdown-validation").length&&show_dropDown_error_message(n.find(".wcs-dropdown-validation")),n.find(".ui-state-error").length?d("#wcs-save").addClass("wcs-btn-disable"):d("#wcs-account-edit-form").submit()}}}),d(".wcs-myorders-cancel-order-link").off("click").on("click",function(){var e=d("#wcs_myOrder_cancelOrder").attr("data-order-lighbox");d("#wcs_myOrder_cancelOrder").attr("data-amout-lighBox"),d("#county").val(),0<d("a[data-forcerefund='true']").length&&(d("#wcs-cancel-order-form input[name=forcedCancel]").val("true"),d("#wcs-cancel-order-form input[name=forcedCancelWithRefund]").val("true")),d("#wcs-cancel-order-form input[name=orderId]").val(e),d("#wcs-cancel-order-form").submit()}),d(".wcs-myorders-re-order-link").off("click").on("click",function(){var e=d(this).attr("data-order");d("#wcs-re-order-form input[name=fromOrderId]").val(e),d("#wcs-re-order-form input[name=reOrderId]").val(e),d("#wcs-re-order-form").submit()})}function t(){d("div.wcs-myOrder-details-content").each(function(){var t=d(this).find("div.wcs-myOrder-rows");d(this).find("div.wcs-myOrder-status-section").each(function(e){t[e]&&d(this).height(t.eq(e).height()-20)})})}return window.reset_editDetail_form=function(){d("#wcs-save").removeClass("wcs-btn-disable"),d("#wcs-dob-error").hide(),d("#wcs-dob-subscribe-error").hide(),d("div.wcs-months-dd").find(".wcs-red-border").removeClass("wcs-red-border"),d("#wcs-account-edit-form .wcs-row").removeAttr("style"),d("#wcs-account-edit-form .wcs-error-message").removeClass("wcs-show"),d("#wcs-account-edit-form input").removeClass("ui-state-error h5-active"),d("#wcs-account-edit-form .wcs-custom-dropdown-container").removeClass("ui-state-error")},window.zipCodeCAValidation=function(){if(0<d("#zip_code").length){if("billingZipCode"==d("#zip_code").attr("name")&&"CA"!=d("#billing-country").val().toUpperCase())return!0;trimmedZip=d("#zip_code").val().replace(/ /g,""),d("#zip_code").val(trimmedZip.substring(0,3)+" "+trimmedZip.substring(3,6))}return!0},d(".wcs-en_CA #delivery_information_form,.wcs-fr_CA #delivery_information_form").submit(function(){return zipCodeCAValidation()}),this.init=function(){return e(),0<d("div.wcs-myOrder-details-content").length&&(t(),d(window).on("load",function(){t()})),d(".wcs-user-register-wrapper .wcs-close-btn").off("click").on("click",function(){Assign_value(d("#userEmail"),d("#guestUserEmail")),d(".wcs-guest-checkout-container").removeClass("wcs-hide"),d(".wcs-user-register-wrapper").addClass("wcs-hide"),d(".wcs-create-account-link").css("visibility","visible"),hide_form_errors("user_register_form"),d(".wcs-note-red").hide()}),d(".wcs-create-account-link").off("click").on("click",function(){d("form").find("input[type=submit]").removeClass("wcs-btn-disable").attr("disabled",!1),Assign_value(d("#guestUserEmail"),d("#userEmail")),Assign_value(d("#guestUserEmail"),d("#email1")),d(".wcs-user-register-wrapper").removeClass("wcs-hide"),d(".wcs-note-red").hide(),$cached.forgot_password_form.removeClass("wcs-hide wcs-show").hide()}),d("#wcs-createAcct-flag").val()&&d(".wcs-user-register-wrapper").removeClass("wcs-hide"),this},this.init()},d(function(){window.show_forgot_password_form=function(){d('form[name="forgot_password_form"]').removeClass("wcs-hide wcs-show").show(),d("div.wcs-forget-password-success").addClass("wcs-hide"),d("div.wcs-forget-password-elements").removeClass("wcs-hide")},d("#forgot_password").off("click").on("click",function(){show_forgot_password_form(),d(this).css("color","#666"),d(".wcs-user-register-wrapper").addClass("wcs-hide"),""!==d("#loginEmail").val()&&(d("#forgotPassword_email").val(d("#loginEmail").val()),d("#forgotPassword_email").blur())}),d("#user_login_form").find("#wcs_logon_password").off("keyup"),d("#user_login_form").find("#wcs_logon_password").on("input",function(){var e=/^.*(?=.{7})(?=.*\d)(?=.*[a-zA-Z]).*$/.test(d(this).val());e&&d("#user_login_form").find("#loginEmail").hasClass("ui-state-valid")?d("#login_submit").addClass("ui-state-valid"):e||d("#login_submit").removeClass("ui-state-valid")})}),window.openChatWindowDirect=function(){show_full_fadeout_1();var e=d("#wcs-support-chat-direct-popup"),t=.5*d(window).width(),a=.75*d(window).height(),i=e.css({height:a,width:t}).find("iframe").css({height:a,width:t});i.attr("src",i.data("src")),display_center_1(e),e.show()};var a=d("div.wcs-fadeout-full");d("#delivery_information_form_add #wcs-addAddr, .wcs-details-addNewAddress.wcs-modal-box").off("click").on("click",function(){0<d("#delivery_information_form_add .wcs-error-message.wcs-inline-block").length&&window.setTimeout(function(){a.height(d(document).height())},10)}),d("#delivery_information_form_add input.required").off("change").on("change",function(){0<d("#delivery_information_form_add .wcs-error-message.wcs-inline-block").length&&window.setTimeout(function(){a.height(d("#wcs_myDetails_addHomeAddress").height()+d(".wcs-myDetails-lightbox-form-button").height())},10)})}(window.rayban=window.rayban||{},jQuery),$("#expShpCart").die("click").live("click",function(){redirectCartUrl()});var ProductSearch=function(){$.extend(Handlebars.templates,Handlebars.partials);var a=this;this.searchTitleTemplate=Rayban.templates.search_title_template,this.contentResultsTemplate=Rayban.templates.content_result_template,this.preprocess=function(){$(document).on("click","#newSearchContainer .wcs-slide-search-btn",this.newSearchButtonHandler),$(document).on("keyup","#newSearchContainer .new-search-text",this.newSearchTextKeyupHandler),this.onSearchPageLoad()},this.loadNewSearchTemplate=function(e){$(".wcs-search-product-title").append(this.searchTitleTemplate(e))},this.showLoadingSearchResult=function(){$("#wcs-loading-search-results").height($(document).height()).show()},this.hideLoadingSearchResult=function(){$("#wcs-loading-search-results").height(0).hide()},this.onSearchPageLoad=function(){if("SearchResults"==$("#pageType").val()){var e=$("#searchPageURL").val();a.showLoadingSearchResult();var t={viewMode:$("#viewMode").val(),searchType:$("#searchType").val(),searchTermScope:$("#searchTermScope").val(),sType:$("#sType").val(),newpage:$("#newpage").val(),facet:getUrlParameter("facet"),clientSide:$("#clientSide").val(),pageSize:getUrlParameter("pageSize"),searchTerm:getUrlParameter("searchTerm").split("+").join(" "),orderBy:getUrlParameter("orderBy")};$.ajax({url:e,data:t,type:"get",traditional:!0,success:function(e){"object"!=typeof e&&(e=$.parseJSON(e)),a.loadNewSearchTemplate(e),a.successSearchReuslt(e,a)}})}},this.newSearchButtonHandler=function(){if(a.removeQuerystringFromUrl("facet"),a.removeQuerystringFromUrl("orderBy"),globalAppliedFactes="",$(".wcs-filter-inner-container > div").slideUp("fast"),$(".wcs-filter-link").removeClass("wcs-active").find(".wcs-down_arrow").animate({top:0},100),""!==$("#D_Search_Top_NewSearchEnter").val()){var e=$("#searchPageURL").val();a.showLoadingSearchResult();var t={viewMode:$("#viewMode").val(),searchType:$("#searchType").val(),searchTermScope:$("#searchTermScope").val(),sType:$("#sType").val(),newpage:$("#newpage").val(),facet:getUrlParameter("facet"),clientSide:$("#clientSide").val(),pageSize:$("#newPageSize").val(),searchTerm:$("#D_Search_Top_NewSearchEnter").val()};$.ajax({url:e,data:t,type:"get",traditional:!0,success:function(e){"object"!=typeof e&&(e=$.parseJSON(e)),a.successSearchReuslt(e,a)}})}},this.newSearchTextKeyupHandler=function(e){13===e.keyCode&&a.newSearchButtonHandler()},this.successSearchReuslt=function(e,t){var a=/"[^"]*"/,i=/"[^"]*"$/,r=Number(e.totalCount),s=$("#newPageSize").val();updateUrlParameter("searchTerm",e.searchTerm),updateUrlParameter("pageSize",s);var o,n,c=new Array($.parseJSON(e.products)),l=$.parseJSON(e.contentdata);if(o=l&&null!==l?Number(l.totalContentCount):0,tealium_data2track.push({id:"WCS-X-Search-PageReady",Search_ResultItemsQnt:r,Search_ResultPagesQnt:o,Search_Keyword:e.searchTerm}),l&&null!==l&&(l.paginationCount=t.getContentPageCount(l.totalContentCount),t.loadContentResults(l,e.searchTerm)),null!==l&&0!==l.totalContentCount||0!==r?$("#espotContainer").show():$("#espotContainer").hide(),0===o&&0===r?($(".search-suggestions-container").show(),$("#DESK_Search_NoProductsBanners").show(),$("#DESK_Search_MostPopular").show(),$(".wcs-search-pages-title").hide()):(0!==o&&0===r?($(".search-suggestions-container").hide(),$("#DESK_Search_NoProductsBanners").hide(),$("#DESK_Search_MostPopular").show()):($(".search-suggestions-container").hide(),$("#DESK_Search_NoProductsBanners").hide(),$("#DESK_Search_MostPopular").hide()),$(".wcs-search-pages-title").show()),$("#pageNumber").val("1"),$("#pageSize").val($("#newPageSize").val()),$("#shownProductCount span:first-child").text($("#newPageSize").val()),$("#shownProductCount .totalCount").text(" "+r),$("#shownProductCount .totalCountText").text(" "+e.totalCountText),null!==l&&0!==l.totalContentCount)if(0===r){$(".wcs-page-results-cntr").show(),$("#pagesResultTitle").hide(),$("#NopagesResultTitle").show(),$("#NopagesResultTitle").find("h2:first-child").text(e.contentTermText);var d=$("#NopagesResultTitle h2:last-child").html();void 0!==d&&(n=d.replace(i,'"'+getUrlParameter("searchTerm").split("+").join(" ")+'"'),$("#NopagesResultTitle h2:last-child").html(n)),$("#NopagesResultTitle").find("h2:last-child .product-count").text(l.totalContentCount)}else{$(".wcs-page-results-cntr").show(),$("#pagesResultTitle").show(),$("#NopagesResultTitle").hide(),$("#pagesResultTitle").find("h2:first-child").text(e.contentTermText);var p=$("#pagesResultTitle h2:last-child").html();void 0!==p&&(n=p.replace(i,'"'+getUrlParameter("searchTerm").split("+").join(" ")+'"'),$("#pagesResultTitle h2:last-child").html(n)),$("#pagesResultTitle").find("h2:last-child .product-count").text(l.totalContentCount)}else $(".wcs-page-results-cntr").hide(),$("#pagesResultTitle").hide(),$("#NopagesResultTitle").hide();var u=null;if(window.plpView.render(c),void 0!==c&&void 0!==c[0]&&void 0!==c[0].products&&void 0!==c[0].products.product&&c[0].products.product.length&&($("#pageSize").val(c[0].products.product.length),$("#shownProductCount span:first-child").text(" "+$("#pageSize").val()),updateUrlParameter("pageSize",$("#pageSize").val())),0===r){$("#filterByDivArea").hide(),$("#facetDivArea").hide(),$(".wcs-search-results-cntr").hide();var f=$("#NosearchResultTitle h1").html();if(void 0!==f&&(u=f.replace(a,'"'+getUrlParameter("searchTerm").split("+").join(" ")+'"'),$("#NosearchResultTitle h1").html(u)),$("#NosearchResultTitle h2 .product-count").hide(),$(".wcs-no-search-results-cntr").show(),$("#NosearchResultTitle h2").text(e.totalCountText),$("#NosearchResultTitle").show(),$("#searchResultTitle").hide(),$("#newSearchContainer").addClass("no-products"),void 0!==e.spellCorrection){$("#spellCorrectionLink").show();var w=$("#spellCorrectionLink").find(".spell-correction-suggestion a");w.attr("href",e.spellCorrection.url.split("amp;").join("")),w.text(e.spellCorrection.label)}else $("#spellCorrectionLink").hide()}else{$(".wcs-no-search-results-cntr").hide();var h=$("#searchResultTitle h1").html();if(void 0!==h&&(u=h.replace(a,'"'+getUrlParameter("searchTerm").split("+").join(" ")+'"'),$("#searchResultTitle h1").html(u)),$("#newSearchContainer").removeClass("no-products"),window.facetView.fetchFacetData(),$("#filterByDivArea").show(),$("#facetDivArea").show(),$(".wcs-search-results-cntr").show(),$("#NosearchResultTitle").hide(),$("#searchResultTitle").show(),$("#searchResultTitle h2 .product-count").show(),$("#searchResultTitle h2").html(e.totalCountText),$("#searchResultTitle h2").prepend("<span class='product-count'>"+r+" </span>"),e.nextPageURL){$("#searchResultsLoadMoreContainer").show();var v=e.nextPageURL.split("amp;").join("");$("#nextPageSearch").val(v)}else $("#searchResultsLoadMoreContainer").hide()}if(e.nextContentPageURL){var m=e.nextContentPageURL.split("amp;").join("");$("#nextContentPageUrl").val(m)}t.hideLoadingSearchResult()},this.loadContentResults=function(e,t){$("#contentResultContainer").html(this.contentResultsTemplate(e)),e.contents&&0<e.contents.length&&$("#contentResultContainer .content-result a, #contentResultContainer .content-result div").wrapInTag({tag:"strong",words:t.split(" ")})},this.getContentPageCount=function(e){for(var t=[],a=Math.ceil(e/10),i=0;i<a;i++){var r={};r.pageNumber=i+1,0===i&&(r.className="selected"),t.push(r)}if(1<t.length)return t},this.removeQuerystringFromUrl=function(e){for(var t=location.href;-1!==t.indexOf(e);)-1!=t.indexOf("?"+e)&&(t=t.replace(new RegExp("\\?"+e+"=[^&]+"),"")),-1!=t.indexOf("&"+e)&&(t=t.replace(new RegExp("&"+e+"=[^&]+"),""));history.replaceState(null,null,t)}};$(function(){window.productSearchObj=new ProductSearch,productSearchObj.preprocess()});var pageSearch=function(){var s=this;this.contentResultsTemplate=Rayban.templates.content_result_template,this.preprocess=function(){$(document).on("click","#pageNumbers .content-page-number",this.contentPageChangeHandler)},this.contentPageChangeHandler=function(e){window.scroll(0,$(".wcs-search-pages-title").offset().top);var t=parseInt($(this).text());$(".content-page-number").removeClass("selected"),$(this).addClass("selected"),s.loadMoreContentPageResults(t)},this.loadMoreContentPageResults=function(r){location.href;$(".wcs-loading-icon-wrapper-content").show(),$(".wcs-loading-icon-wrapper").css("padding-bottom","115px"),$("#contentResultContainer #pageNumbers").addClass("disabled-page-nembers");var e={},t=parseInt($("#pageNumber").val())+1;"SearchResults"!=$("#pageType").val()||isNaN(parseInt(getUrlParameter("pageSize")))||isNaN(parseInt($("#defaultPageSize").val()))||0===parseInt($("#defaultPageSize").val())||(t=getUrlParameter("pageSize")/parseInt($("#defaultPageSize").val())+1,t=parseInt(t)),$("#pageNumber").val(t),"SearchResults"==$("#pageType").val()&&(e={viewMode:$("#viewMode").val(),searchType:$("#searchType").val(),searchTermScope:$("#searchTermScope").val(),sType:$("#sType").val(),newpage:$("#newpage").val(),facet:getUrlParameter("facet"),clientSide:$("#clientSide").val(),pageNumber:t,pageSize:$("#defaultPageSize").val(),searchTerm:getUrlParameter("searchTerm").split("+").join(" "),pageNumberContent:r,pageSizeContent:10}),$.ajax({url:$("#nextContentPageUrl").val(),data:e,traditional:!0,success:function(e){$(".wcs-loading-icon-wrapper-content").hide(),$(".wcs-loading-icon-wrapper").css("padding-bottom","0"),$("#contentResultContainer #pageNumbers").removeClass("disabled-page-nembers");var t=$.parseJSON(e),a=$.parseJSON(t.contentdata);if(a&&null!==a&&(a.paginationCount=s.getContentPageCount(a.totalContentCount,r),s.loadContentResults(a,t.searchTerm)),t.nextContentPageURL){var i=t.nextContentPageURL.split("amp;").join("");$("#nextContentPageUrl").val(i)}}})},this.loadContentResults=function(e,t){$("#contentResultContainer").html(this.contentResultsTemplate(e)),e.contents&&0<e.contents.length&&$("#contentResultContainer .content-result a, #contentResultContainer .content-result div").wrapInTag({tag:"strong",words:t.split(" ")})},this.getContentPageCount=function(e,t){for(var a=[],i=Math.ceil(e/10),r=0;r<i;r++){var s={};s.pageNumber=r+1,r===t-1&&(s.className="selected"),a.push(s)}if(1<a.length)return a}};$(function(){window.pageSearchObj=new pageSearch,pageSearchObj.preprocess()});
//# sourceMappingURL=listing.js.map
