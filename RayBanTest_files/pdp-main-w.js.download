!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=48)}([function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Core=void 0;var i=n(4),r=n(7),o=n(8),s=n(16),l=null,c=function e(){return a(this,e),l||(l=this),this.Logger=i.Logger,this.PubSub=r.PubSub,this.Utilities=o.Utilities,this.Cookies=s.Cookies,l};t.Core=new c},,function(e,t,n){"use strict";function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&c.isObject(e)&&e instanceof a)return e;var i=new a;return i.parse(e,t,n),i}function r(e){return c.isString(e)&&(e=i(e)),e instanceof a?e.format():a.prototype.format.call(e)}function o(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var l=n(9),c=n(12);t.parse=i,t.resolve=o,t.resolveObject=s,t.format=r,t.Url=a;var d=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(f),v=["'"].concat(h),m=["%","/","?",";","#"].concat(v),w=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},P={javascript:!0,"javascript:":!0},$={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=n(13);a.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),i=-1!==a&&a<e.indexOf("#")?"?":"#",r=e.split(i),o=/\\/g;r[0]=r[0].replace(o,"/"),e=r.join(i);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var u=p.exec(s);if(u)return this.path=s,this.href=s,this.pathname=u[1],u[2]?(this.search=u[2],this.query=t?C.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=d.exec(s);if(f){f=f[0];var h=f.toLowerCase();this.protocol=h,s=s.substr(f.length)}if(n||f||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var D="//"===s.substr(0,2);!D||f&&P[f]||(s=s.substr(2),this.slashes=!0)}if(!P[f]&&(D||f&&!$[f])){for(var S=-1,_=0;_<w.length;_++){var k=s.indexOf(w[_]);-1!==k&&(-1===S||k<S)&&(S=k)}var I,E;E=-1===S?s.lastIndexOf("@"):s.lastIndexOf("@",S),-1!==E&&(I=s.slice(0,E),s=s.slice(E+1),this.auth=decodeURIComponent(I)),S=-1;for(var _=0;_<m.length;_++){var k=s.indexOf(m[_]);-1!==k&&(-1===S||k<S)&&(S=k)}-1===S&&(S=s.length),this.host=s.slice(0,S),s=s.slice(S),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var L=this.hostname.split(/\./),_=0,R=L.length;_<R;_++){var x=L[_];if(x&&!x.match(g)){for(var O="",A=0,M=x.length;A<M;A++)x.charCodeAt(A)>127?O+="x":O+=x[A];if(!O.match(g)){var N=L.slice(0,_),j=L.slice(_+1),U=x.match(b);U&&(N.push(U[1]),j.unshift(U[2])),j.length&&(s="/"+j.join(".")+s),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=l.toASCII(this.hostname));var F=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+F,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!y[h])for(var _=0,R=v.length;_<R;_++){var V=v[_];if(-1!==s.indexOf(V)){var H=encodeURIComponent(V);H===V&&(H=escape(V)),s=s.split(V).join(H)}}var z=s.indexOf("#");-1!==z&&(this.hash=s.substr(z),s=s.slice(0,z));var q=s.indexOf("?");if(-1!==q?(this.search=s.substr(q),this.query=s.substr(q+1),t&&(this.query=C.parse(this.query)),s=s.slice(0,q)):t&&(this.search="",this.query={}),s&&(this.pathname=s),$[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",W=this.search||"";this.path=F+W}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",a=this.hash||"",i=!1,r="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(r=C.stringify(this.query));var o=this.search||r&&"?"+r||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||$[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),a&&"#"!==a.charAt(0)&&(a="#"+a),o&&"?"!==o.charAt(0)&&(o="?"+o),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+i+n+o+a},a.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(c.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var n=new a,i=Object.keys(this),r=0;r<i.length;r++){var o=i[r];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var d=s[l];"protocol"!==d&&(n[d]=e[d])}return $[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!$[e.protocol]){for(var u=Object.keys(e),p=0;p<u.length;p++){var f=u[p];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||P[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",m=n.search||"";n.path=v+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var w=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=g||w||n.host&&e.pathname,y=b,C=n.pathname&&n.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],D=n.protocol&&!$[n.protocol];if(D&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),b=b&&(""===h[0]||""===C[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,C=h;else if(h.length)C||(C=[]),C.pop(),C=C.concat(h),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(D){n.hostname=n.host=C.shift();var S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!C.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var _=C.slice(-1)[0],k=(n.host||e.host||C.length>1)&&("."===_||".."===_)||""===_,I=0,E=C.length;E>=0;E--)_=C[E],"."===_?C.splice(E,1):".."===_?(C.splice(E,1),I++):I&&(C.splice(E,1),I--);if(!b&&!y)for(;I--;I)C.unshift("..");!b||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),k&&"/"!==C.join("/").substr(-1)&&C.push("");var T=""===C[0]||C[0]&&"/"===C[0].charAt(0);if(D){n.hostname=n.host=T?"":C.length?C.shift():"";var S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return b=b||n.host&&C.length,b&&!T&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},,function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(6),o=new r.Storage,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"green",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"white";o.fetch("rbDebug")&&console.info("%c "+e+" ","background: "+t+"; color: "+n+";")};t.Logger=function(){function e(){a(this,e)}return i(e,null,[{key:"info",value:function(e){s(e,"green")}},{key:"debug",value:function(e){s(e,"#0E0E83")}},{key:"error",value:function(e){s(e,"red")}},{key:"log",value:function(e){s(e,"#FFFF00","black")}},{key:"warn",value:function(e){s(e,"#FFA500","black")}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){a(this,e),this.PDP={BIND_EVENTS:"BIND_EVENTS",CAROUSEL_CLICK:"CAROUSEL_CLICK",UPDATE_LENS:"UPDATE_LENS",SIZE_CHANGE:"SIZE_CHANGE",POLARIZED_CHANGE:"POLARIZED_CHANGE",DATA_AVAILABILITY_SUCCESS:"DATA_AVAILABILITY_SUCCESS",UPDATE_PRESCRIPTION:"UPDATE_PRESCRIPTION",UPDATE_ROXABLE_SECTION:"UPDATE_ROXABLE_SECTION",UPDATE_SELECTED_PRODUCT_DATA:"UPDATE_SELECTED_PRODUCT_DATA",UPDATE_VIEW_ALL:"UPDATE_VIEW_ALL",ROX_CAROUSEL_UPDATE:"ROX_CAROUSEL_UPDATE",RENDER_PRICE_DETAILS:"RENDER_PRICE_DETAILS",PRESCRIPTION_LENS_SELECTED:"PRESCRIPTION_LENS_SELECTED",PRESCRIPTION_LENS_DATA:"PRESCRIPTION_LENS_DATA",SITE_MAIN_CHECK_WISHLIST_ADD:"SITE_MAIN_CHECK_WISHLIST_ADD",SITE_MAIN_BENEFITPRICINGCALL:"SITE_MAIN_BENEFITPRICINGCALL"}}return i(e,[{key:"getPDPEvents",value:function(){return this.PDP}},{key:"getDataChangeEventName",value:function(){return this.dataChangeEventName}},{key:"getViewChangeEventName",value:function(){return this.dataChangeEventName}},{key:"getPriceChangeEventName",value:function(){return this.dataChangeEventName}}]),e}();t.events=new r},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=null;t.Storage=function(){function e(){return a(this,e),void 0===window.browserLocalObject&&(window.browserLocalObject={}),o||(o=this),this.storageType=window.sessionStorage,this.stringifyCheck=!1,o}return r(e,[{key:"stringify",value:function(e){return this.stringifyCheck?JSON.stringify(e):e}},{key:"parse",value:function(e){try{return JSON.parse(e)}catch(t){return e}}},{key:"isBrowserStorageSupported",value:function(){try{return this.storageType.setItem("testStorage","1"),this.storageType.removeItem("testStorage"),!0}catch(e){return!1}}},{key:"findDataType",value:function(e){"object"===(void 0===e?"undefined":i(e))?this.stringifyCheck=!0:this.stringifyCheck=!1}},{key:"save",value:function(e,t){this.findDataType(t),this.isBrowserStorageSupported()?this.storageType.setItem(e,this.stringify(t)):window.browserLocalObject[e]=t}},{key:"fetch",value:function(e){return this.isBrowserStorageSupported()?this.parse(this.storageType.getItem(e)):window.browserLocalObject[e]}},{key:"fetchAll",value:function(){return this.isBrowserStorageSupported()?this.storageType:window.browserLocalObject}},{key:"remove",value:function(e){this.isBrowserStorageSupported()?this.storageType.removeItem(e):delete window.browserLocalObject[e]}},{key:"removeAll",value:function(){this.isBrowserStorageSupported()?this.storageType.clear():window.browserLocalObject={}}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PubSub=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(4);t.PubSub=function(){function e(){a(this,e)}return i(e,null,[{key:"publish",value:function(e,t){r.Logger.info("Published event: "+e),$.publish(e,t)}},{key:"subscribe",value:function(e,t){r.Logger.log("Subscribed to event: "+e),$.subscribe(e,t)}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Utilities=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),s=function(e){return e&&e.__esModule?e:{default:e}}(o);t.Utilities=function(){function e(){a(this,e)}return r(e,null,[{key:"getUrlParameter",value:function(e){return s.default.parse(window.location.href,!0).query[e]}},{key:"removeURLParam",value:function(e,t){var n=t.split("?")[0],a=[],i=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==i){a=i.split("&");for(var r=a.length-1;r>=0;r-=1)a[r].split("=")[0]===e&&a.splice(r,1);n=a.length?n+"?"+a.join("&"):n}return n}},{key:"extends",value:function(){for(var e=this,t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=1;r<n.length;r++){var o=void 0;for(o in n[r])n[r].hasOwnProperty(o)&&("object"===i(n[0][o])&&"object"===i(n[r][o])?e.extends(n[0][o],n[r][o]):n[0][o]=n[r][o])}return n[0]}},{key:"htmlDecode",value:function(e){return e?e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&").replace(/&nbsp;/g," ").replace(/&copy;/g,"©").replace(/&reg;/g,"®").replace(/&times;/g,"×").replace(/&trade;/g,"™"):e}}]),e}()},function(e,t,n){(function(e,a){var i;!function(r){function o(e){throw RangeError(R[e])}function s(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function l(e,t){var n=e.split("@"),a="";return n.length>1&&(a=n[0]+"@",e=n[1]),e=e.replace(L,"."),a+s(e.split("."),t).join(".")}function c(e){for(var t,n,a=[],i=0,r=e.length;i<r;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<r?(n=e.charCodeAt(i++),56320==(64512&n)?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),i--)):a.push(t);return a}function d(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=A(e>>>10&1023|55296),e=56320|1023&e),t+=A(e)}).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:P}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,n){var a=0;for(e=n?O(e/S):e>>1,e+=O(e/t);e>x*C>>1;a+=P)e=O(e/x);return O(a+(x+1)*e/(e+D))}function h(e){var t,n,a,i,r,s,l,c,p,h,v=[],m=e.length,w=0,g=k,b=_;for(n=e.lastIndexOf(I),n<0&&(n=0),a=0;a<n;++a)e.charCodeAt(a)>=128&&o("not-basic"),v.push(e.charCodeAt(a));for(i=n>0?n+1:0;i<m;){for(r=w,s=1,l=P;i>=m&&o("invalid-input"),c=u(e.charCodeAt(i++)),(c>=P||c>O((y-w)/s))&&o("overflow"),w+=c*s,p=l<=b?$:l>=b+C?C:l-b,!(c<p);l+=P)h=P-p,s>O(y/h)&&o("overflow"),s*=h;t=v.length+1,b=f(w-r,t,0==r),O(w/t)>y-g&&o("overflow"),g+=O(w/t),w%=t,v.splice(w++,0,g)}return d(v)}function v(e){var t,n,a,i,r,s,l,d,u,h,v,m,w,g,b,D=[];for(e=c(e),m=e.length,t=k,n=0,r=_,s=0;s<m;++s)(v=e[s])<128&&D.push(A(v));for(a=i=D.length,i&&D.push(I);a<m;){for(l=y,s=0;s<m;++s)(v=e[s])>=t&&v<l&&(l=v);for(w=a+1,l-t>O((y-n)/w)&&o("overflow"),n+=(l-t)*w,t=l,s=0;s<m;++s)if(v=e[s],v<t&&++n>y&&o("overflow"),v==t){for(d=n,u=P;h=u<=r?$:u>=r+C?C:u-r,!(d<h);u+=P)b=d-h,g=P-h,D.push(A(p(h+b%g,0))),d=O(b/g);D.push(A(p(d,0))),r=f(n,w,a==i),n=0,++a}++n,++t}return D.join("")}function m(e){return l(e,function(e){return E.test(e)?h(e.slice(4).toLowerCase()):e})}function w(e){return l(e,function(e){return T.test(e)?"xn--"+v(e):e})}var g=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof a&&a);var b,y=2147483647,P=36,$=1,C=26,D=38,S=700,_=72,k=128,I="-",E=/^xn--/,T=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=P-$,O=Math.floor,A=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:c,encode:d},decode:h,encode:v,toASCII:w,toUnicode:m},void 0!==(i=function(){return b}.call(t,n,t,e))&&(e.exports=i)}()}).call(t,n(10)(e),n(11))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(14),t.encode=t.stringify=n(15)},function(e,t,n){"use strict";function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var l=1e3;r&&"number"==typeof r.maxKeys&&(l=r.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var d=0;d<c;++d){var u,p,f,h,v=e[d].replace(s,"%20"),m=v.indexOf(n);m>=0?(u=v.substr(0,m),p=v.substr(m+1)):(u=v,p=""),f=decodeURIComponent(u),h=decodeURIComponent(p),a(o,f)?i(o[f])?o[f].push(h):o[f]=[o[f],h]:o[f]=h}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function a(e,t){if(e.map)return e.map(t);for(var n=[],a=0;a<e.length;a++)n.push(t(e[a],a));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?a(o(e),function(o){var s=encodeURIComponent(i(o))+n;return r(e[o])?a(e[o],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[o]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Cookies=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(17),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.Cookies=function(){function e(){a(this,e)}return i(e,null,[{key:"get",value:function(e){return o.default.get(e)}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";o.default.set(e,t,{expires:Number.parseInt(n),path:a})}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";o.default.remove(e,{path:t})}}]),e}()},function(e,t,n){var a,i;!function(r){var o=!1;if(a=r,void 0!==(i="function"==typeof a?a.call(t,n,t,e):a)&&(e.exports=i),o=!0,e.exports=r(),o=!0,!o){var s=window.Cookies,l=window.Cookies=r();l.noConflict=function(){return window.Cookies=s,l}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}function t(n){function a(t,i,r){var o;if("undefined"!=typeof document){if(arguments.length>1){if(r=e({path:"/"},a.defaults,r),"number"==typeof r.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*r.expires),r.expires=s}r.expires=r.expires?r.expires.toUTCString():"";try{o=JSON.stringify(i),/^[\{\[]/.test(o)&&(i=o)}catch(e){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var l="";for(var c in r)r[c]&&(l+="; "+c,!0!==r[c]&&(l+="="+r[c]));return document.cookie=t+"="+i+l}t||(o={});for(var d=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,p=0;p<d.length;p++){var f=d[p].split("="),h=f.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var v=f[0].replace(u,decodeURIComponent);if(h=n.read?n.read(h,v):n(h,v)||h.replace(u,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===v){o=h;break}t||(o[v]=h)}catch(e){}}return o}}return a.set=a,a.get=function(e){return a.call(a,e)},a.getJSON=function(){return a.apply({json:!0},[].slice.call(arguments))},a.defaults={},a.remove=function(t,n){a(t,"",e(n,{expires:-1}))},a.withConverter=t,a}return t(function(){})})},,,function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.updateModelService=function(){function e(){a(this,e)}return i(e,null,[{key:"setSPDZoomURL",value:function(e){window.selectedProductData.zoomURL=e}},{key:"updateSelectedProduct",value:function(e){window.selectedProductData=window.pdpdata.products[e]}},{key:"updateSelectedFrame",value:function(){window.pdpModel.selectedFrame=$("#pdpFrameCatId").val()}},{key:"updateSelectedProductFrameDetails",value:function(){var e=window.pdpModel,t=window.selectedProductData;e.frameData=e.PDPOriginalData.products[e.selectedFrame]||[],e.lensData=e.PDPOriginalData.products[t.catentryId]||{},e.frameData.length&&!e.frameData.hasOwnProperty("listPrice")&&delete t.listPrice,$.each(e.frameData,function(n,a){e.lensData.hasOwnProperty(n)?("selectedSizeValue"===n&&(t[n]=a),"searchSimilarURL"===n&&(t[n]=a)):t[n]=a})}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.dataAvailabilityService=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(43);t.dataAvailabilityService=function(){function e(){a(this,e)}return i(e,null,[{key:"get",value:function(){var e=this,t=$("#wcs_configs").data()?$("#wcs_configs").data().clearanceParam:void 0,n={storeId:$("#storeId").val(),catalogId:$("#catalogId").val(),langId:$("#langId").val(),catEntries:$("#pdpCatEntryIds").val()};n[t]=window.Rayban.utilities.getUrlParameter(t);var a=window.location.protocol+"//"+window.location.hostname+encodeURI(window.location.pathname)+"/ProductStylesJSONView",i=$(".wcs-shipping-info-wrapper div:first-child,.wcs-shipping-info-wrapper span,.sr_pdp"),l=$("#right_main").find(".loading");return $.ajax({type:"GET",url:a,data:n,dataType:"json",beforeSend:function(){$(".loader").show(),l.show(),i.hide()},complete:function(){i.show(),$(".loader").hide(),l.hide(),r.Core.PubSub.publish(o.events.getPDPEvents().BIND_EVENTS)},success:function(t){window.availabilityData=t,e.set(),s.config.Rayban.config.pdp.constants.storeIdValue,"true"===s.config.Rayban.config.pdp.constants.chinaPdpEnabledFlag&&$(".wcs-email-preorder-button ").length>0&&$("#left_carousel").css("margin-top","0px"),r.Core.PubSub.publish(o.events.getPDPEvents().DATA_AVAILABILITY_SUCCESS,{selectedProductData:window.selectedProductData})},error:function(e){$(".loader").hide(),(window.tealium_data2track||[]).push({id:"WCS-X-PDP-Loading-Error",Error_Source:"Server",Error_Code:e.responseText})}})}},{key:"set",value:function(){var e=window.availabilityData[window.isRox?$("#pdpFrameCatId").val():window.selectedProductData.catentryId];e.availabilityMessage=r.Core.Utilities.htmlDecode(e.availabilityMessage),e.availabilityDate=r.Core.Utilities.htmlDecode(e.availabilityDate),window.selectedProductData.availabilityData=e}},{key:"setRoxOpticsData",value:function(e){var t=window.availabilityData[e];t.availabilityMessage=r.Core.Utilities.htmlDecode(t.availabilityMessage),t.availabilityDate=r.Core.Utilities.htmlDecode(t.availabilityDate),window.pdpdata.products[e].availabilityData=t}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){$(e).RBVideoOverlay()},$.fn.RBVideoOverlay=function(e){var t=$.extend({videoSelector:"video",overlaySelector:".rb-video-overlay"},e);return this.each(function(){var e=$(this),n=$(t.videoSelector,e).get(0),a=$(t.overlaySelector,e);e.on("click",function(){n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2?(n.pause(),a.fadeIn()):(n.play(),a.fadeOut())})})},e.exports=t.default},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.benefitPricingCallService=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5);t.benefitPricingCallService=function(){function e(){a(this,e)}return i(e,null,[{key:"get",value:function(e,t,n,a){var i=this,s={};s.pageTypeIns="PDP",window.Rayban&&window.Rayban.rcInstance&&window.Rayban.rcInstance.selectedLensesId?(s.roxLensCatentryId=Rayban.rcInstance.selectedLensesId,s.roxFrameCatentryId=Rayban.rcInstance.frameDetails.uniqueID):(s.roxLensCatentryId="undefined"!=typeof pdpRoxInst?pdpRoxInst.selectedProductData.catentryId:window.selectedProductData.catentryId,s.roxFrameCatentryId=$("#pdpFrameCatId").val()),$("#D_PDP_Prod .page-loader").show(),$.ajax({type:"GET",url:"RoxInsurancePricing",data:s}).done(function(s){if(s=JSON.parse(s),window.isRoxInsurance=!0,window.Rayban&&window.Rayban.rcInstance&&window.Rayban.rcInstance.selectedLensesId)"0"===s.pricingResultCode?(window.Rayban.rcInstance.updatePrices("insurance",s),$(".insurance-price-error-container").addClass("wcs-hide")):window.Rayban.rcInstance.updatePrices("prescription");else{if("0"===s.pricingResultCode&&(selectedProductData.isInsurance="Y",selectedProductData.insFramePrice=s.frameFinalPrice,selectedProductData.insLensPrice=s.lensFinalPrice,selectedProductData.insPrice=s.totalFinalPrice,selectedProductData.originalPrice=s.totalOriginalPrice,selectedProductData.lensDiscount=s.lensDiscount,selectedProductData.frameDiscount=s.frameDiscount),"renderForcolorThumbClickHandler"===e)window.dragClick=!1,r.Core.PubSub.publish(o.events.getPDPEvents().CAROUSEL_CLICK,{selectedProductData:selectedProductData,clickedElData:t});else if("renderPolarSelectionHandler"===e)r.Core.PubSub.publish(o.events.getPDPEvents().POLARIZED_CHANGE,{selectedProductData:selectedProductData,value:n.value});else if("renderSizeDropDownHandler"===e)r.Core.PubSub.publish(o.events.getPDPEvents().SIZE_CHANGE,{selectedProductData:selectedProductData,value:n.value});else if("renderChangePrescriptionHandler"===e){var l=$(a.currentTarget).find(".prescription-val").val();r.Core.PubSub.publish(o.events.getPDPEvents().UPDATE_PRESCRIPTION,{selectedProductData:selectedProductData,selectedVal:l})}else"renderPdpRoxViewAllHandler"===e?r.Core.PubSub.publish(o.events.getPDPEvents().UPDATE_VIEW_ALL):r.Core.PubSub.publish(o.events.getPDPEvents().RENDER_PRICE_DETAILS);$(".insurance-price-error-container").addClass("wcs-hide")}"0"!==s.pricingResultCode&&"-1"!==s.pricingResultCode&&i.showInsurencePriceError(),$("html, body").animate({scrollTop:0},1e3)}).fail(function(){window.Rayban&&window.Rayban.rcInstance&&window.Rayban.rcInstance.selectedLensesId?window.Rayban.rcInstance.updatePrices("prescription"):i.rightHeaderRender(),i.showInsurencePriceError(),$("html, body").animate({scrollTop:0},1e3)}).complete(function(){$("#D_PDP_Prod .page-loader").hide()})}},{key:"showInsurancePriceError",value:function(){var e=$("#DESK_PDP_ROX_Insurance_Price_Error").html();e&&($(".insurance-price-error-container").html(e),$(".insurance-price-error-container").removeClass("wcs-hide"))}}]),e}()},,,function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Common=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(20),l=n(21),c=n(23);t.Common=function(){function e(){var t=this;a(this,e),r.Core.Logger.info("Common Module triggered"),r.Core.PubSub.subscribe(o.events.getPDPEvents().DATA_AVAILABILITY_SUCCESS,function(e,n){t.renderDropdowns(),window.isRoxInsurance||t.callAnalytics("onReady")}),r.Core.PubSub.subscribe(o.events.getPDPEvents().PRESCRIPTION_LENS_DATA,function(e,n){t.checkifAddedToWishList()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_PRESCRIPTION,function(e,n){t.renderDropdowns(),t.replaceURL(n.selectedVal),t.callAnalytics("onFrameChange"),t.checkifAddedToWishList(),t.changeStandardPDPURL()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().SIZE_CHANGE,function(e,n){t.renderDropdowns(),t.replaceURL(n.value),t.checkifAddedToWishList(),t.changeStandardPDPURL(),t.callAnalytics("onChange")}),r.Core.PubSub.subscribe(o.events.getPDPEvents().POLARIZED_CHANGE,function(e,n){t.replaceURL(n.value),t.renderDropdowns(),t.checkifAddedToWishList(),t.changeStandardPDPURL(),window.isRox?t.callAnalytics("onFrameChange"):t.callAnalytics("onChange")}),r.Core.PubSub.subscribe(o.events.getPDPEvents().CAROUSEL_CLICK,function(e,n){t.renderMetaTitleDescription(),t.renderDropdowns(),$("#main-image-container").css({visibility:"visible"}),t.replaceURL(n.prodSku),t.checkifAddedToWishList(),t.changeStandardPDPURL(),t.callAnalytics("onChange")}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_LENS,function(e,n){t.renderMetaTitleDescription(),t.renderDropdowns(),$("#main-image-container").css({visibility:"visible"}),t.replaceURL(n.prodSku),t.checkifAddedToWishList(),t.changeStandardPDPURL(),t.callAnalytics("onChange")}),r.Core.PubSub.subscribe(o.events.getPDPEvents().SITE_MAIN_CHECK_WISHLIST_ADD,function(e,n){t.checkifAddedToWishList()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().ROX_CAROUSEL_UPDATE,function(e,n){t.changeStandardPDPURL(),t.callAnalytics("onFrameChange")}),this.renderDropdowns(),this.checkifAddedToWishList(),this.renderMetaTitleDescription(),this.changeStandardPDPURL()}return i(e,[{key:"replaceURL",value:function(e){e&&null!==window.pdpdata.products[e]&&window.history.replaceState&&(r.Core.Utilities.getUrlParameter("co")?window.history.replaceState(null,null,window.pdpdata.products[e].linkDetailsView+"&co=true"):window.history.replaceState(null,null,window.pdpdata.products[e].linkDetailsView))}},{key:"changeStandardPDPURL",value:function(){window.selectedProductData.hasOwnProperty("stdPDPUrl")&&$("#stdPDPUrl").attr("href",window.selectedProductData.stdPDPUrl)}},{key:"renderDropdowns",value:function(){var e=this;this.polarSelection=$("#D_PDP_Prod_PolarSelection").ddslick({width:128,imagePosition:"left",background:"#fff",onSelected:function(t){if($("#wcs-size-pdp-display .qty-stock-msg").addClass("wcs-hide"),s.updateModelService.updateSelectedProduct(t.selectedData.value),s.updateModelService.updateSelectedFrame(),s.updateModelService.updateSelectedProductFrameDetails(),l.dataAvailabilityService.set(),!0===t.selectedData.isDummy||"true"===t.selectedData.isDummy)e.dummySizeRender(),e.renderDropdowns(),r.Core.PubSub.publish(o.events.getPDPEvents().UPDATE_ROXABLE_SECTION,{selectedProductData:window.selectedProductData}),$("#wcs-size-pdp-display .dd-option-selected").hide();else{if(!window.isRox&&window.isVTO){var n=window.selectedProductData.partNumber;window.VTOIntegration&&window.VTOIntegration.changeUpc&&window.VTOIntegration.changeUpc(n)}window.isRoxInsurance?c.benefitPricingCallService.get("renderPolarSelectionHandler",null,t.selectedData,null):r.Core.PubSub.publish(o.events.getPDPEvents().POLARIZED_CHANGE,{selectedProductData:window.selectedProductData,value:t.selectedData.value})}}}),$("#D_PDP_Prod_PolarSelection").css({visibility:"visible"}),$("#D_PDP_Prod_SizeDropdownBtn").ddslick({width:90,background:"#fff",onSelected:function(e){if($("#wcs-size-pdp-display .qty-stock-msg").addClass("wcs-hide"),window.isRox?$("#pdpFrameCatId").val(e.selectedData.value):s.updateModelService.updateSelectedProduct(e.selectedData.value),s.updateModelService.updateSelectedFrame(),s.updateModelService.updateSelectedProductFrameDetails(),l.dataAvailabilityService.set(),!window.isRox&&window.isVTO){var t=selectedProductData.partNumber;window.VTOIntegration&&window.VTOIntegration.changeUpc&&window.VTOIntegration.changeUpc(t)}window.isRoxInsurance?c.benefitPricingCallService.get("renderPolarSelectionHandler",null,e,null):$.publish(o.events.getPDPEvents().SIZE_CHANGE,{selectedProductData:window.selectedProductData,value:e.selectedData.value})}}),$("#D_PDP_Prod_SizeDropdownBtn .dd-select small").hide(),this.adjustOptionsHeight($("#polarNonPolar")),$("#D_PDP_Prod_PolarSelection .dd-option").parent().show(),$("#D_PDP_Prod_PolarSelection .dd-option-selected").parent().hide();var t=$("#D_PDP_Prod_PolarSelection");1==t.find(".dd-options li").length?($("#D_PDP_Prod_PolarSelection .dd-select,#D_PDP_Prod_PolarSelection .dd-selected,#D_PDP_Prod_PolarSelection .dd-selected").off("click"),t.find(".dd-pointer").hide()):t.find(".dd-pointer").show();var n=$("#D_PDP_Prod_SizeDropdownBtn");1==n.find(".dd-options li").length?($("#D_PDP_Prod_SizeDropdownBtn .dd-select,#D_PDP_Prod_SizeDropdownBtn .dd-selected,#D_PDP_Prod_SizeDropdownBtn .dd-selected").off("click"),n.find(".dd-pointer").hide()):n.find(".dd-pointer").show(),$(".dd-select").on("click",function(e){$(e.currentTarget).find(".dd-pointer").is(":visible")&&$(e.currentTarget).toggleClass("open-shadow")})}},{key:"dummySizeRender",value:function(){$("#wcs-size-pdp-display").html(Rayban.templates["pdp-template"]({p:"dummy_select",templateData:window.selectedProductData}))}},{key:"adjustOptionsHeight",value:function(e){e.find(".dd-option").each(function(t,n){var a=$(n),i=a.find(".dd-option-description"),r=e.find(".dd-option-image");i.length<=0&&r.length>0&&a.find(".dd-option-text").css("line-height","14px")}),$(".dd-selected-text").css("line-height","14px")}},{key:"callAnalytics",value:function(e){tealium_data2track=tealium_data2track||[];var t={},n={},a="",i=window.isRox?window.pdpdata.products[$("#pdpFrameCatId").val()].partNumber:window.selectedProductData.partNumber;window.isRox?(a=$("#right_header_price #wcs-productprice").text().replace(/[^0-9.,]/g,""),n.Category="prescription-sunglasses"):void 0!==window.selectedProductData.offerPrice&&(a=$("#priceVal").val(),n.Category=window.selectedProductData.productCategory),n.Units=1,n.Price=a,window.isRoxInsurance&&void 0!==window.selectedProductData.originalPrice&&(a=window.selectedProductData.originalPrice.replace(/[^0-9.,]/g,""),n.Price=a,n.PriceFull=a);var r="";if("Y"===window.selectedProductData.availabilityData.addToBagFlag?r="Available":"ACTIVE"===window.selectedProductData.availabilityData.lifecycleVal||void 0===window.selectedProductData.availabilityData.lifecycleVal?(0===window.selectedProductData.availabilityData.buyableqty&&(r="NotAvailable"),window.selectedProductData.availabilityData.buyableqty>0&&(r="NotSellable")):r="NotSellable",n.Status=r,n.DataSource=window.selectedProductData,!window.isRox){var o=n.DataSource;o.hasOwnProperty("listPrice")&&"FALSE"==o.onSaleVal&&(o.promotionalPrice=o.offerPrice,n.DataSource=o)}t[""+i]=n,"onReady"==e?tealium_data2track.push({id:"WCS-X-PDP-Prods-Update",Products:t}):tealium_data2track.push({id:"WCS-X-PDP-Prods-Init",Products:t}),tealium_data2track.push({id:"WCS-X-PDP-Loading-Ready"})}},{key:"checkifAddedToWishList",value:function(){var e=$("#wishListCatentryIds").val()||"",t=void 0,n=[],a=void 0,i=void 0,r=void 0;window.isStandard&&(t=window.selectedProductData.catentryId);var o=e.replace("[","").replace("]","").split(",");if($.each(o,function(e,t){var a=$.trim(t).split("_").sort().join("_");a&&n.push(a)}),e=n,window.isRox||window.isRoxOptics){a=window.opticsData?window.opticsData.frameCatId:$("#pdpFrameCatId").val(),a+="_"+(window.opticsData?window.opticsData.lensCatId:window.selectedProductData.catentryId),i=window.opticsData?window.opticsData.mandatoryServices:window.selectedProductData.mandatoryServices,r=i.length?"[object Array]"===Object.prototype.toString.call(i)?i:i.split():[];for(var s=0;s<r.length;s++)a+="_"+r[s];a=a.split("_").sort().join("_")}e.length&&($(".wcs-fav-container .wcs-icon-relative").removeClass("wcs-pdp-tickMark"),$("#D_PDP_Prod_AddToWishList").text($("#D_PDP_Prod_AddToWishList").data("revert-label")).removeClass("wcs-favourite-added"),$.each(e,function(e,n){$.trim(t)!==$.trim(n)&&$.trim(a)!==$.trim(n)||($(".wcs-fav-container .wcs-icon-relative").addClass("wcs-pdp-tickMark"),$("#D_PDP_Prod_AddToWishList").text($("#D_PDP_Prod_AddToWishList").data("save-label")).addClass("wcs-favourite-added"))}))}},{key:"renderMetaTitleDescription",value:function(){var e=window.selectedProductData.resolvedSkuGridLensBridgeVal,t=window.selectedProductData.frameColor,n=window.selectedProductData.frameMaterial,a=window.selectedProductData.lensColor,i=window.selectedProductData.lensTreatment,r=window.selectedProductData.lensesTabLabel,o=window.selectedProductData.modelName;if(-1!==e.indexOf("RX")?e=e.replace("RX","RB"):-1!==e.indexOf("RY")&&(e=e.replace("RY","RB")),t&&"undefined"!==t&&-1!==t.indexOf(";")&&(t=t.replace(";","")),void 0!==$("#productTypeKeywordVal").val()){var s=void 0,l="";"Prescription-sunglasses"===$("#productTypeKeywordVal").val()?-1!=window.selectedProductData.modelName.indexOf("RB")?($("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+$("#modelNo").val()+" "+t.trim()+", "+$("#modelNo").val().trim()+" "+window.selectedProductData.lensColor+" "+$("#pdpMetaWithRXTitle").val()+" | "+$("#pdpMetaTitleTrademark").val()),$("meta[name=description]").attr("content",$("#pdpMetaShop").val()+" "+$("#pdpMetaTitle").val()+" "+$("#modelNo").val().trim()+", "+$("#modelNo").val()+" "+$("#roxWith").val()+" "+window.selectedProductData.lensColor+" "+$("#pdpMetaWithRXTitle").val()+" "+$("#pdpAt").val()+" "+$("#pdpMetaTitleTrademark").val()+$("#pdpMetaDescSuffix").val())):($("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+$("#productName").val()+" "+$("#pdpIn").val()+t.trim()+", "+$("#modelNo").val()+" "+window.selectedProductData.lensColor+" "+$("#pdpMetaWithRXTitle").val()+" | "+$("#pdpMetaTitleTrademark").val()),$("meta[name=description]").attr("content",$("#pdpMetaShop").val()+" "+$("#pdpMetaTitle").val()+" "+$("#productName").val()+" "+$("#pdpIn").val()+" "+$("#frameColorVal").val().trim()+", "+$("#modelNo").val()+" "+$("#roxWith").val()+" "+window.selectedProductData.lensColor+" "+$("#pdpMetaWithRXTitle").val()+" "+$("#pdpAt").val()+" "+$("#pdpMetaTitleTrademark").val()+" "+$("#pdpMetaDescSuffix").val())):"Sunglasses"==$("#productTypeKeywordVal").val()?"GB"==$("#storeIdentifier").val()?-1!=window.selectedProductData.modelName.indexOf("RB")?("FALSE"==window.selectedProductData.polarizedId?$("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+$("#productTypeKeywordVal").val()+" "+o+" - "+$("#pdpIn").val()+t+" "+n+", "+a+" "+i+" "+r.replace(":"," | ")+$("#pdpMetaTitleTrademark").val()):$("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+$("#productTypeKeywordVal").val()+" "+o+" - "+$("#pdpIn").val()+t+" "+n+", "+a+" "+i+" "+$("#pdpPolarizedLenses").val().replace("-","| ")+$("#pdpMetaTitleTrademark").val()),s=$("meta[name=title]").attr("content"),s=s.replace("|",$("#pdpAt").val()),$("meta[name=description]").attr("content",s+" "+$("#pdpMetaDescSuffix").val())):("FALSE"==window.selectedProductData.polarizedId?$("meta[name=title]").attr("content",o+" "+$("#productTypeKeywordVal").val()+" "+$("#pdpIn").val()+" "+t+" "+n+", "+a+" "+i+" "+r.replace(":"," - ")+$("#modelNo").val()+" | "+$("#pdpMetaTitleTrademark").val()):$("meta[name=title]").attr("content",o+" "+$("#productTypeKeywordVal").val()+" "+$("#pdpIn").val()+" "+t+" "+n+", "+a+" "+i+" "+$("#pdpPolarizedLenses").val()+" "+$("#modelNo").val()+" | "+$("#pdpMetaTitleTrademark").val()),s=$("meta[name=title]").attr("content"),s=s.replace("|",$("#pdpAt").val()),$("meta[name=description]").attr("content",s+" "+$("#pdpMetaDescSuffix").val())):-1!=window.selectedProductData.modelName.indexOf("RB")?(l=$("#localeLenses").val().split(","),$.inArray($("#wcsCoutryAndLangId").val(),l),$("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+e+" "+$("#pdpIn").val()+" "+t+", "+$("#pdpLenses").val()+" | "+$("#pdpMetaTitleTrademark").val()),s=$("meta[name=title]").attr("content"),s=s.replace("|",$("#pdpAt").val()),"KR"==$("#storeIdentifier").val()?$("meta[name=description]").attr("content",s+" "+$("#pdpMetaDescSuffix").val()):$("meta[name=description]").attr("content",$("#pdpMetaShop").val()+" "+s+" "+$("#pdpMetaDescSuffix").val())):("FALSE"==window.selectedProductData.polarizedId?$("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+$("#productName").val()+" "+$("#pdpIn").val()+" "+t+", "+e+" | "+$("#pdpMetaTitleTrademark").val()):"KR"==$("#storeIdentifier").val()?$("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+$("#productName").val()+" "+$("#pdpIn").val()+" "+t+" "+n+", "+$("#pdpPolarizedLenses").val()+" "+e+" | "+$("#pdpMetaTitleTrademark").val()):$("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+$("#productName").val()+" "+$("#pdpIn").val()+" "+t+", "+$("#pdpPolarizedLenses").val()+" "+e+" | "+$("#pdpMetaTitleTrademark").val()),s=$("meta[name=title]").attr("content"),s=s.replace("|",$("#pdpAt").val()),"KR"==$("#storeIdentifier").val()?$("meta[name=description]").attr("content",s+" "+$("#pdpMetaDescSuffix").val()):$("meta[name=description]").attr("content",$("#pdpMetaShop").val()+" "+s+" "+$("#pdpMetaDescSuffix").val())):"Eyeglasses"==$("#productTypeKeywordVal").val()?"GB"===$("#storeIdentifier").val()?-1!=window.selectedProductData.modelName.indexOf("RB")?($("meta[name=title]").attr("content",$("#pdp_prescription_text_2").val()+" "+$("#modelNo").val()+" "+t+" "+$("#frameMaterialVal").val()+" | "+$("#pdpMetaTitleTrademark").val()),s=$("meta[name=title]").attr("content"),s=s.replace("|",$("#pdpAt").val()),$("#shoppable").val(),$("meta[name=description]").attr("content",$("#pdpMetaShop").val()+" "+s+" "+$("#pdpDiscoverText").val()+" "+$("#pdpMetaTitleTrademark").val()+" "+$("#pdpWebsiteText").val())):($("meta[name=title]").attr("content",$("#productName").val()+" "+$("#pdp_prescription_text").val()+" "+t+" "+$("#frameMaterialVal").val()+" - "+$("#modelNo").val()+" | "+$("#pdpMetaTitleTrademark").val()),s=$("meta[name=title]").attr("content"),s=s.replace("|",$("#pdpAt").val()),$("#shoppable").val(),$("meta[name=description]").attr("content",$("#pdpMetaShop").val()+" "+s+" "+$("#pdpDiscoverText").val()+" "+$("#pdpMetaTitleTrademark").val()+" "+$("#pdpWebsiteText").val())):("KR"==$("#storeIdentifier").val()?$("meta[name=title]").attr("content",$("#pdp_meta_data_eyeglasses").val()+" "+e+" "+$("#pdpIn").val()+" "+t+" "+$("#frameMaterialVal").val()+" | "+$("#pdpMetaTitleTrademark").val()):$("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+e+" "+$("#pdpIn").val()+" "+t+" | "+$("#pdpMetaTitleTrademark").val()),s=$("meta[name=title]").attr("content"),s=s.replace("|",$("#pdpAt").val()),"yes"==$("#shoppable").val()?"KR"==$("#storeIdentifier").val()?$("meta[name=description]").attr("content",s+" "+$("#pdpMetaDescSuffix").val()):$("meta[name=description]").attr("content",$("#pdpMetaShop").val()+" "+s+" "+$("#pdpMetaDescSuffix").val()):$("meta[name=description]").attr("content",$("#pdpMetaDiscover").val()+" "+$("#pdpMetaTitle").val()+" "+e+" "+$("#pdpIn").val()+" "+t+" "+$("#pdpAt").val()+" "+$("#pdpMetaTitleTrademark").val())):"Accessories"==$("#productTypeKeywordVal").val()||"Accessory"==$("#productTypeKeywordVal").val()?"GB"==$("#storeIdentifier").val()?($("meta[name=title]").attr("content",o+" "+window.selectedProductData.frontInnerColor+" | "+$("#pdpMetaTitleTrademark").val()),$("meta[name=description]").attr("content",$("meta[name=title]").attr("content")+$("#pdpCaseMetaCaseSuffix").val())):($("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+$("#productName").val()+" "+$("#pdpIn").val()+" "+window.selectedProductData.frameColor+" | "+$("#pdpMetaTitleTrademark").val()),s=$("meta[name=title]").attr("content"),s=s.replace("|",$("#pdpAt").val()),$("meta[name=description]").attr("content",$("#pdpMetaShopAccessories").val()+" "+$("#pdpMetaPrefix").val()+" "+$("#pdpIn").val()+" "+t+" "+$("#pdpAt").val()+" "+$("#pdpMetaTitleTrademark").val()+" "+$("#pdpMetaDescSuffix").val())):"GIFT_CARD_TYPE"==$("#productTypeKeywordVal").val()&&($("meta[name=title]").attr("content",$("#pdpMetaTitle").val()+" "+$("#productName").val()+" | "+$("#pdpMetaTitleTrademark").val()),$("meta[name=description]").attr("content",$("#pdpMetaShop").val()+" "+$("#pdpMetaTitle").val()+" "+$("#productName").val()+" "+$("#pdpAt").val()+" "+$("#pdpMetaTitleTrademark").val()+" "+$("#pdpMetaDescSuffix").val()))}document.title=$("meta[name=title]").attr("content")}}],[{key:"backURL",value:function(){var e=document.domain,t="";if(void 0!==(t=$("#back_text").val())&&0!==t.length){-1!=document.referrer.indexOf(e)&&window.history.length>1&&($("a.backLink").attr("href","javascript: history.go(-1)"),$("span.backLabel").text(t))}}},{key:"updatePDPType",value:function(e){window.isRoxOptics=e,window.isStandard=!window.isRox&&!window.isRoxOptics}},{key:"hideOverlayNavigations",value:function(e){e.preventDefault()}},{key:"isInsuranceEnabled",value:function(){return window.isRoxInsurance}},{key:"showHideTooltip",value:function(e){$(e.currentTarget).hasClass("rox-note-tooltip-icon")&&($(".rox-prescription-tooltip").is(":visible")?$(".rox-prescription-tooltip").hide():$(".rox-prescription-tooltip").show()),e.stopPropagation()}},{key:"showContactUs",value:function(e){$("#wcs_contact_us_content").show(),$("html,body").animate({scrollTop:$("#wcs_contact_us_content").offset().top},"slow"),setTimeout(function(){$("#wcs_contact_us").trigger("click")},200)}}]),e}()},,,,,function(module,exports,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageService=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_config=__webpack_require__(43),_updateModelService=__webpack_require__(20),ImageService=exports.ImageService=function(){function ImageService(){_classCallCheck(this,ImageService)}return _createClass(ImageService,null,[{key:"s7SpinSetExistResponse",value:function s7SpinSetExistResponse(jsonData,someString){var responseData=eval(jsonData);window.spin360Arr.push(responseData["catalogRecord.exists"]),window.isSpin=responseData["catalogRecord.exists"],"1"===responseData["catalogRecord.exists"]?($("#wcs_enlarge_pipe").show(),$(".wcs-360-view").show(),$(".wcs-scene7-toggle .wcs-enlarge").show()):($("#wcs_enlarge_pipe").hide(),$(".wcs-360-view").hide())}},{key:"zoomRender",value:function(){var e=this,t=null;$("#zoom_slider").html("");var n=$("#wcs-data-image-url").val();if(window.pdpZoomSlider&&window.pdpZoomSlider.destroySlider(),$.each(window.zoomArr,function(e,n){if($.each(n,function(e,a){if(window.selectedProductData.imageUrl.indexOf(a)>0)return t=n,!1}),null!==t)return!1}),null!==t)$.each(t,function(e,t){var a=n+t+"?$zoom$";selectedProductData.zoomURL=a,$("#zoom_slider").append(Rayban.templates["pdp-template"]({p:"left_main_zoom",templateData:window.selectedProductData}))});else if(window.isRox){var a="";a=window.pdpdata.products[$("#pdpFrameCatId").val()].productPartNumber+"_"+window.selectedProductData.productPartNumber;var i=n+"RayBan/"+a+"_shad_qt?$zoom$";_updateModelService.updateModelService.setSPDZoomURL(i),$("#zoom_slider").append(Rayban.templates["pdp-template"]({p:"left_main_zoom",templateData:window.selectedProductData}))}this.deferloadFn(),$("#zoom_slider li").length>1?window.pdpZoomSlider=$("#zoom_slider").bxSlider({minSlides:1,infiniteLoop:!1,moveSlides:1,hideControlOnEnd:!0,responsive:!1,onSliderLoad:function(){$("#D_PDP_Prod_MainPictZoomOverlay").find(".bx-prev").attr({id:"D_PDP_Prod_MainPictZoomOverlayPrev"}),$("#D_PDP_Prod_MainPictZoomOverlay").find(".bx-next").attr({id:"D_PDP_Prod_MainPictZoomOverlayNext"}),$("#zoom_slider img").each(function(t,n){WcsBrowser.isIpad||e.displayMagnifyGlass(n)})}}):window.pdpZoomSlider=$("#zoom_slider").bxSlider({minSlides:1,infiniteLoop:!1,moveSlides:1,hideControlOnEnd:!0,responsive:!1,pager:!1,controls:!1,onSliderLoad:function(){$("#D_PDP_Prod_MainPictZoomOverlay").find(".bx-prev").attr({id:"D_PDP_Prod_MainPictZoomOverlayPrev"}),$("#D_PDP_Prod_MainPictZoomOverlay").find(".bx-next").attr({id:"D_PDP_Prod_MainPictZoomOverlayNext"}),$("#zoom_slider img").each(function(t,n){WcsBrowser.isIpad||e.displayMagnifyGlass(n)})}})}},{key:"displayMagnifyGlass",value:function(e){var t=$(e).attr("data-big")||$(e).attr("defer-img");$(e).mlens({imgSrc:t,imgSrc2x:$(e).attr("data-big2x"),lensShape:"circle",lensSize:["35%","55%"],borderSize:2,borderColor:"#b2b2b2",borderRadius:0,zoomLevel:1,responsive:!0})}},{key:"deferloadFn",value:function(){$(".wcs-zoom-img img").each(function(e,t){var n=$(t).attr("defer-img");$(t).attr("src",n),$(t).attr("data-big",n)})}},{key:"displayColorPreview",value:function(e){if(!$(e.currentTarget).hasClass("wcs-selected")){var t=$(e.currentTarget).position().left,n=$(e.currentTarget).position().left,a=$(e.currentTarget).data();"none"===$("#D_PDP_Prod_ColorThumbs .wcs-carousel").css("transform")&&$("#D_PDP_Prod_ColorThumbs .wcs-carousel").css({transform:"translate3d(0px, 0px, 0px)","transition-duration":"0s"});var i=$("#D_PDP_Prod_ColorThumbs .wcs-carousel").css("transform").split(/[()]/)[1],r=i.split(",")[4],o=r.replace(/[\W_]+/g," ");$("#preview_"+a.product_sku).find(".before").css({left:t-o+80}),$("#preview_"+a.product_sku).find(".after").css({left:n-o+82}),$("#preview_"+a.product_sku).addClass("transition"),$(".headerSubSection").css({visibility:"hidden",opacity:0}),$("#D_PDP_Prod_PolarSelection").css({visibility:"hidden",opacity:0})}}},{key:"hideColorPreview",value:function(){$(".colorOverlay").removeClass("transition"),$(".headerSubSection").css({visibility:"visible",opacity:1}),$("#D_PDP_Prod_PolarSelection").css({visibility:"visible",opacity:1})}},{key:"openEnlargeView",value:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget).closest("ul").attr("id"),n=$(e.currentTarget).closest(".mainSlider").data(),a=null;if($("#s7spin_container").remove(),$("#wcs-data-image-spin").val(n.image_spin),$(".wcs-enlargeView").click(),$.each(window.mainImageSliderArr,function(e,n){$(n.selector).attr("id")==t&&(a=window.mainImageSliderArr[e])}),null!==a||0!==$("#isRoxEnabled").length&&"true"===$("#isRoxEnabled").val()){if(null!==a){var i=a.getCurrentSlide();$("#D_PDP_Prod_MainPictZoomOverlay").height($(window).height()),$("#D_PDP_Prod_MainPictZoomOverlay").addClass("active"),pdpZoomSlider.redrawSlider(),pdpZoomSlider.goToSlide(i)}else $("#D_PDP_Prod_MainPictZoomOverlay").height($(window).height()),$("#D_PDP_Prod_MainPictZoomOverlay").addClass("active"),pdpZoomSlider.redrawSlider();$("#zoomContainer").height($(window).height()),setTimeout(function(){$("header").hide(),$(".wcs-shipping-bar").hide(),$("#pdp_page").hide(),$("footer").hide()},510)}}},{key:"showEnlargeView",value:function(e){$("#s7enlarge_container").show(),$(".wcs-scene7-drag").hide(),$("#s7spin_container").hide(),$(e.currentTarget).find("span").eq(1).addClass("wcs-color0"),$(".wcs-spin-label").removeClass("wcs-color0"),"1"==window.isSpin?($("#wcs_enlarge_pipe").show(),$(".wcs-360-view").show(),$(".wcs-scene7-toggle .wcs-enlarge").show()):($("#wcs_enlarge_pipe").hide(),$(".wcs-360-view").hide())}},{key:"triggerEnlargeView",value:function(e){$(e.currentTarget).closest(".mainSlider").find(".wcs-enlarge-view").trigger("click")}},{key:"closeZoomOverlay",value:function(){$("#pdp_page").show(),$("#D_PDP_Prod_MainPictZoomOverlay").removeClass("active"),pdpZoomSlider.redrawSlider(),$(".wcs-shipping-bar").show(),$("header").show(),$("#pdp_page").show(),$("footer").show()}},{key:"fetchS7Images",value:function(){var e=this,t="",n=$("#wcs-data-image-url").attr("value");t=$("#wcs-data-image-spin").attr("value"),$("#isRoxEnabled").length>0&&"true"==$("#isRoxEnabled").val()&&"1"!=window.isSpin&&$("#mainImgSlider_"+window.selectedProductData.catentryId+" .main360text").hide(),$(".mainSlider").filter(":visible").each(function(a,i){var r=$(i).data();e.getProdImageSet(r.image_data,n+"RayBan"),e.getS7ProdSetExists("req=exists,json&handler=s7SpinSetExistResponse",n+t,"s7SpinSetExistResponse")})}},{key:"getProdImageSet",value:function(e,t){var n=this,a=navigator.userAgent.toLowerCase();a.match(/ipad/i)&&a.match(/crios/i)&&(e=e.replace("{",""),e=e.replace("}","")),$.ajax({type:"GET",url:t,data:e,dataType:"jsonp",crossDomain:!0,error:function(e,t,n){},success:s7ImgSetResponse,complete:function(){n.zoomRender(),$(".wcs-enlarge-view").off("click").on("click",n.openEnlargeView)}})}},{key:"getS7ProdSetExists",value:function(e,t,n){$.ajax({type:"GET",url:t,data:e,dataType:"jsonp",crossDomain:!0,success:n,error:function(e,t,n){}})}},{key:"s7ImgSetResponse",value:function s7ImgSetResponse(jsonData){var someString="";if("true"===_config.config.Rayban.config.pdp.constants.chinaPdpEnabledFlag)this.s7ImgSetResponseChina(jsonData,someString);else{var imgArrSet=[];if(window.imgSetSkuVal&&jsonData.set&&jsonData.set.n&&jsonData.set.n!=imgSetSkuVal)return!1;var responseData=eval(jsonData),$mainImageCarouselContainer=$(".mainSlider[data-set='"+jsonData.set.n+"'] ul"),imageUrl=$("#wcs-data-image-url").attr("value"),imagePreset=$("#wcs-data-image-preset").val(),imageCount=responseData.set.item.length,loadingContainer=$(".mainSlider[data-set='"+jsonData.set.n+"']").find(".loading");if("unknown"==responseData.set.type&&$("#isRoxEnabled").length>0&&"true"==$("#isRoxEnabled").val()&&($mainImageCarouselContainer=$("#mainImgSlider_"+window.selectedProductData.catentryId+" ul"),loadingContainer=$("#mainImgSlider_"+window.selectedProductData.catentryId).find(".loading")),loadingContainer.show(),void 0!==imageCount)$.each(responseData.set.item,function(e,t){var n=$mainImageCarouselContainer.find("li").eq(0).clone();if(n.find(".wcs-productContainer-new").remove(),n.find(".pdp-polarized-badge").remove(),n.find(".pdp-vm-wrapper").remove(),void 0!==t.i){var a=imageUrl+t.i.n+"?"+imagePreset;imgArrSet.push(t.i.n),-1==n.find("img").attr("src").indexOf(t.i.n)&&(n.find("img").prop("src",a),$mainImageCarouselContainer.append(n))}});else{var $cloneLi=$mainImageCarouselContainer.find("li").eq(0).clone(),item="";if("unknown"==responseData.set.type&&$("#isRoxEnabled").length>0&&"true"==$("#isRoxEnabled").val()){var partNumber="";partNumber=window.pdpdata.products[$("#pdpFrameCatId").val()].productPartNumber+"_"+window.selectedProductData.productPartNumber;var imagesMap=imageUrl+"RayBan/"+partNumber+"_shad_qt?"+imagePreset;imgArrSet.push("RayBan/"+partNumber+"_shad_qt"),-1==$cloneLi.find("img").attr("src").indexOf("RayBan/"+partNumber+"_shad_qt")&&($cloneLi.find("img").prop("src",imagesMap),$mainImageCarouselContainer.html($cloneLi))}else if("unknown"!==responseData.set.type){item=responseData.set.item;var _imagesMap=imageUrl+item.i.n+"?"+imagePreset;imgArrSet.push(item.i.n),-1==$cloneLi.find("img").attr("src").indexOf(item.i.n)&&($cloneLi.find("img").prop("src",_imagesMap),$mainImageCarouselContainer.append($cloneLi))}}window.zoomArr.push(imgArrSet);var pdpMainSlider=null;pdpMainSlider=$mainImageCarouselContainer.find("li").length>1?$mainImageCarouselContainer.bxSlider({minSlides:1,infiniteLoop:!1,moveSlides:1,responsive:!1,hideControlOnEnd:!0,onSliderLoad:function(){loadingContainer.hide(),WcsBrowser.isIpad&&($(".wcs-zoom-label-container").css({visibility:"visible"}),$(".bx-controls-direction").css({visibility:"visible"}))}}):$mainImageCarouselContainer.bxSlider({minSlides:1,infiniteLoop:!1,moveSlides:1,responsive:!1,hideControlOnEnd:!0,pager:!1,controls:!1,onSliderLoad:function(){loadingContainer.hide(),WcsBrowser.isIpad&&$(".wcs-zoom-label-container").css({visibility:"visible"})}}),window.mainImageSliderArr.push(pdpMainSlider)}}},{key:"s7ImgSetResponseChina",value:function s7ImgSetResponseChina(jsonData,someString){var imgArrSet=[];if(window.imgSetSkuVal&&jsonData.set&&jsonData.set.n&&jsonData.set.n!==imgSetSkuVal)return!1;var responseData=eval(jsonData),$mainImageCarouselContainer=$(".mainSlider[data-set='"+jsonData.set.n+"'] ul"),imageUrl=$("#wcs-data-image-url").attr("value"),imageCount=responseData.set.item.length,loadingContainer=$(".mainSlider[data-set='"+jsonData.set.n+"']").find(".loading"),imagePreset=$("#wcs-data-image-preset").val();if(loadingContainer.show(),void 0!==imageCount)$.each(responseData.set.item,function(e,t){var n=$mainImageCarouselContainer.find("li").eq(0).clone();if(n.find(".wcs-productContainer-new").remove(),n.find(".pdp-polarized-badge").remove(),n.find(".pdp-vm-wrapper").remove(),void 0!==t.i){var a=imageUrl+t.i.n+"?"+imagePreset;imgArrSet.push(t.i.n),-1==n.find("img").attr("src").indexOf(t.i.n)&&(n.find("img").prop("src",a),$mainImageCarouselContainer.append(n))}});else{var $cloneLi=$mainImageCarouselContainer.find("li").eq(0).clone(),item=responseData.set.item,imagesMap=imageUrl+item.i.n+"?"+imagePreset;imgArrSet.push(item.i.n),$cloneLi.find("img").prop("src",imagesMap),$mainImageCarouselContainer.html($cloneLi)}window.zoomArr.push(imgArrSet),$mainImageCarouselContainer.find("li").length>5?window.pdpMainSlider=$mainImageCarouselContainer.bxSlider({minSlides:5,infiniteLoop:!1,moveSlides:5,hideControlOnEnd:!0,slideWidth:60,mode:"vertical",onSliderLoad:function(){loadingContainer.hide(),$('#left-main-container div[id^="mainImgSlider_"] ul:first-child li:first-child').addClass("golden-border"),WcsBrowser.isIpad&&($(".wcs-enlarge-over").css({visibility:"visible"}),$(".wcs-zoom-label-container").css({visibility:"visible"}))}}):window.pdpMainSlider=$mainImageCarouselContainer.bxSlider({minSlides:5,infiniteLoop:!1,moveSlides:5,hideControlOnEnd:!0,slideWidth:60,mode:"vertical",controls:!1,onSliderLoad:function(){loadingContainer.hide(),$('#left-main-container div[id^="mainImgSlider_"] ul:first-child li:first-child').addClass("golden-border"),WcsBrowser.isIpad&&($(".wcs-enlarge-over").css({visibility:"visible"}),$(".wcs-zoom-label-container").css({visibility:"visible"}))}}),window.pdpMainSlider.getSlideCount()<=1?$("#left-main-container").css("visibility","hidden"):$("#left-main-container").css("visibility","visible")}}]),ImageService}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(33);Object.defineProperty(t,"radio",{enumerable:!0,get:function(){return a(i).default}});var r=n(34);Object.defineProperty(t,"tooltip",{enumerable:!0,get:function(){return a(r).default}});var o=n(35);Object.defineProperty(t,"tabs",{enumerable:!0,get:function(){return a(o).default}});var s=n(36);Object.defineProperty(t,"OverlayManager",{enumerable:!0,get:function(){return a(s).default}});var l=n(22);Object.defineProperty(t,"videoOverlay",{enumerable:!0,get:function(){return a(l).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){$(e).RBRadio()},$.fn.RBRadio=function(){return this.each(function(){$(this).on("click",function(){var e=$("input[type=radio]",$(this));e.length&&!e.is("checked")&&e.prop("checked",!0)})})},e.exports=t.default},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.default=function(e,t){var n=new l(e,t);o.push(n),e.RBTooltip=n};var r=n(0),o=[],s=function(){if(o&&o.length)for(var e=0;e<o.length;e+=1)o[e].hide()},l=function(){function e(t,n){if(a(this,e),!t)throw new Error("Tooltip trigger not found");this.trigger=t,this.settings=r.Core.Utilities.extends(e.defaults,n),this.init(),this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.isVisible=this.isVisible.bind(this),this.getTooltipDiv=this.getTooltipDiv.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.toggle=this.toggle.bind(this)}return i(e,[{key:"init",value:function(){if(this.tooltipSelector=this.trigger.getAttribute("href"),this.tooltipDiv=this.getTooltipDiv(),!this.tooltipDiv)throw new Error("Tooltip not found: "+this.tooltipSelector);this.bindEvents()}},{key:"bindEvents",value:function(){var e=this,t=e.settings.events;e.trigger.addEventListener(t[0],function(t){t.preventDefault(),e.show()},!1),e.trigger.addEventListener(t[1],function(t){t.preventDefault(),e.hide()},!1)}},{key:"isVisible",value:function(){var e=window.getComputedStyle(this.tooltipDiv);return"none"!==e.display&&"hidden"!==e.visibility}},{key:"getTooltipDiv",value:function(){return document.querySelector(this.tooltipSelector)}},{key:"show",value:function(){s(),this.tooltipDiv.classList.add(this.settings.activeClass)}},{key:"hide",value:function(){this.tooltipDiv.classList.remove(this.settings.activeClass)}},{key:"toggle",value:function(){this.isVisible()?this.hide():this.show()}}],[{key:"hideAll",value:function(){s()}}]),e}();l.defaults={events:["mouseover","mouseout"],activeClass:"active"},e.exports=t.default},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.default=function(e,t){var n=new o(e,t);e.RBTabs=n};var r=n(0),o=function(){function e(t,n){a(this,e),this.settings=r.Core.Utilities.extends(e.defaults,n),this.trigger=t,this.selectors=this.trigger.querySelectorAll(this.settings.tabSelectorsQuery),this.tabs=this.trigger.querySelectorAll(this.settings.tabsQuery),this.init()}return i(e,[{key:"init",value:function(){var e=this,t=void 0,n=void 0;if(e.selectors&&e.selectors.length)for(t=0;t<e.selectors.length;t+=1)n=e.selectors[t],n.addEventListener("click",function(t){var n=e.settings.tabRetriever(t.target);n&&e.showTab(t.target,n),t.preventDefault()},!1)}},{key:"showTab",value:function(e,t){var n=this,a=void 0;if(n.selectors&&n.selectors.length)for(a=0;a<n.selectors.length;a+=1)n.selectors[a].classList.remove(n.settings.activeClass);if(e.classList.add(n.settings.activeClass),n.tabs&&n.tabs.length)for(a=0;a<n.tabs.length;a+=1)n.tabs[a].classList.remove(n.settings.activeClass);t.classList.add(n.settings.activeClass),n.settings.onShowTab(t)}}]),e}();o.defaults={tabsQuery:".rb-tab",tabSelectorsQuery:".rb-tab-selector",activeClass:"active",tabRetriever:function(e){return document.getElementById(e.getAttribute("rel"))},onShowTab:function(e){}},e.exports=t.default},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayManager=t.Overlay=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=[],s=function(e,t){e&&(e.className+=" "+t)},l=function(e,t){e&&(e.className=e.className.replace(t,""))},c=function(){for(var e=0;e<o.length;e+=1)o[e].close()},d=t.Overlay=function(){function e(t,n){a(this,e),this.settings=r.Core.Utilities.extends(e.defaults,n),this.trigger=t,this.overlayId=this.trigger.getAttribute("href"),this.overlayDiv=document.querySelector(this.overlayId),this.closeTrigger=null,this.innerDiv=null,this.bindActions=this.bindActions.bind(this),this.scrollTop=this.scrollTop.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this),this.setContent=this.setContent.bind(this),this.overlayDiv?(this.innerDiv=this.overlayDiv.querySelector("div"),this.closeTrigger=this.overlayDiv.querySelector("."+this.settings.closeButtonClass),this.bindActions()):r.Core.Logger.error("No overlay found for "+this.trigger.getAttribute("href"))}return i(e,[{key:"bindActions",value:function(){var e=this;this.overlayDiv.addEventListener("click",function(t){t.target===e.overlayDiv&&e.close(),t.preventDefault()},!1),document.addEventListener("keydown",function(e){27===e.keyCode&&c()},!1),e.closeTrigger?e.closeTrigger.addEventListener("click",function(t){t.preventDefault(),e.close()},!1):r.Core.Logger.error("Not close link set.")}},{key:"scrollTop",value:function(){$(this.overlayDiv).animate({scrollTop:0},200)}},{key:"open",value:function(){c(),this.scrollTop(),s(this.overlayDiv,"active"),s(document.querySelector("body"),this.settings.bodyClassName)}},{key:"close",value:function(){l(document.querySelector("body"),this.settings.bodyClassName),l(this.overlayDiv,"active")}},{key:"setContent",value:function(e,t){this.innerDiv.querySelector("."+this.settings.contentDivClassName).innerHTML=e,"function"==typeof t&&t()}}],[{key:"closeAll",value:function(){c()}}]),e}();d.defaults={cssClass:"rb-overlay",closeButtonClass:"rb-overlay-close-trigger",triggerCssClass:"rb-overlay-trigger",bodyClassName:"rb-overlay-open",contentDivClassName:"rb-overlay-content"};var u=t.OverlayManager=function(){function e(t){a(this,e),this.settings=r.Core.Utilities.extends(d.defaults,t),this.initAll=this.initAll.bind(this),this.setupOverlay=this.setupOverlay.bind(this)}return i(e,[{key:"initAll",value:function(){for(var e=document.querySelectorAll("."+this.settings.triggerCssClass),t=0;t<e.length;t+=1){e[t].RBOverlay||this.setupOverlay(e[t])}}},{key:"setupOverlay",value:function(e,t){var n=null;return e.RBOverlay?r.Core.Logger.debug("overay already set."):(n=new d(e,this.settings),o.push(n),e.RBOverlay=n,t||e.addEventListener("click",function(e){var t=e.target;e.preventDefault(),t.RBOverlay.open()},!1)),n}}]),e}();t.default=u},,,,,,,function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){a(this,e),this.Rayban=this.Rayban||{},this.Rayban.config=this.Rayban.config||{},this.Rayban.config.pdp={PO:{storeId:$("#storeIdentifier")},constants:{storeIdValue:$("#storeIdentifier").val(),chinaPdpEnabledFlag:$("#ChinaPDPEnabledFlag").val()||"false"}}};t.config=new i},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Carousel=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(20),l=n(21),c=n(23);t.Carousel=function(){function e(){var t=this;a(this,e),r.Core.Logger.info("Carousel module triggered"),r.Core.PubSub.subscribe(o.events.getPDPEvents().DATA_AVAILABILITY_SUCCESS,function(e,n){t.setColorsCarouselUnavailability()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().ROX_CAROUSEL_UPDATE,function(e,n){t.renderRoxCarousel(n.carouselData)}),this.carouselRender(),this.carouselPreviewRender()}return i(e,[{key:"setColorsCarouselUnavailability",value:function(){var e=[];$("#left_carousel #D_PDP_Prod_ColorThumbs li").each(function(t,n){var a=$(n),i=window.isRox?$("#pdpFrameCatId").val():$(n).data("product_sku"),r=void 0!==window.pdpdata.products[i].priceDisabledCat?window.pdpdata.products[i].priceDisabledCat:"N";0===window.availabilityData[i].buyableqty&&"Y"!==r&&(a.find(".wcs-main-image").addClass("unavailable"),window.availabilityData[i].currentlyUnavailableLabel?$("#preview_"+i).find(".infoLeft span").text(window.availabilityData[i].currentlyUnavailableLabel):window.availabilityData[i].notSellableOnlineMsg&&$("#preview_"+i).find(".infoLeft span").text(window.availabilityData[i].notSellableOnlineMsg),e.push(i))})}},{key:"updateColorPreviewprice",value:function(){var e=window.pdpdata.products[$("#pdpFrameCatId").val()],t=e.hasOwnProperty("unformattedFramePrice")?e.unformattedFramePrice:0,n=e.hasOwnProperty("unformattedFramePromoPrice")?e.unformattedFramePromoPrice:t,a=void 0,i=void 0,r=void 0,o=void 0,s=0,l=void 0,c="",d=void 0;$("#color-carousel-preview-container .colorOverlay").each(function(u,p){a=$(p).attr("id").split("_")[1],d=window.pdpdata.products[a],e.hasOwnProperty("unformattedFramePrice")&&d.hasOwnProperty("unformattedLensPrice")&&(i=d.hasOwnProperty("unformattedLensPrice")?d.unformattedLensPrice:0,r=(parseFloat(t)+parseFloat(i)).toFixed(2),l=parseFloat(r).toLocaleString($("html").attr("lang"),{maximumFractionDigits:2,minimumFractionDigits:2})),(e.hasOwnProperty("unformattedFramePromoPrice")||d.hasOwnProperty("unformattedLensPromoPrice"))&&(o=d.hasOwnProperty("unformattedLensPromoPrice")?d.unformattedLensPromoPrice:i,s=(parseFloat(n)+parseFloat(o)).toFixed(2),c=parseFloat(s).toLocaleString($("html").attr("lang"),{maximumFractionDigits:2,minimumFractionDigits:2})),s&&r&&r>s?($(p).find(".previewPrice").text($.trim(window.pdpModel.currency.currency)+" "+c),$(p).find(".strikePreviewPriceInner").text($.trim(window.pdpModel.currency.currency)+" "+l)):r&&$(p).find(".previewPrice").text($.trim(window.pdpModel.currency.currency)+" "+l)})}},{key:"carouselPreviewRender",value:function(){if(window.isRox){var e=$("#pdpFrameCatId").val(),t=window.pdpdata.products[e].productPartNumber;window.pdpdata.colors.carousel.forEach(function(e){if("lensColor"==e.type){var n=JSON.parse(JSON.stringify(window.pdpdata.products[e.details.value]));n.imageUrl=$("#wcs-data-image-url").val()+"RayBan/"+t+"_"+e.details.productPartNumber+"_shad_qt?"+$("#wcs-data-image-preset").val(),$("#color-carousel-preview-container").append(Rayban.templates["pdp-template"]({p:"left_main_carousel_preview",templateData:n}))}}),this.updateColorPreviewprice()}else window.pdpdata.colors.carousel.forEach(function(e){$("#color-carousel-preview-container").append(Rayban.templates["pdp-template"]({p:"left_main_carousel_preview",templateData:window.pdpdata.products[e.details.value]}))})}},{key:"carouselRender",value:function(){window.pdpdata.colors.carousel.length<=4&&$("#D_PDP_Prod_ColorsViewAll").hide();var e=$("#D_PDP_Prod_ColorThumbs .wcs-selected").index(),t=e/4;t=parseInt(t),"accessories"!==$("#productCatType").val()&&(window.pdpCarousel=$("#left_carousel ul").bxSlider({infiniteLoop:!1,hideControlOnEnd:!0,slideWidth:110,startSlide:t,slideMargin:12,pager:!1,minSlides:1,maxSlides:4,moveSlides:4,preloadImages:"all",responsive:!1,onSliderLoad:function(){var e=$(".wcs-carousel li:first").find(".wcs-quickView-product-list-frame").position().top;$(".frameLensLabelCntr").css({top:e+"px"}),window.pdpdata.colors.carousel.length<=4?($("#D_PDP_Prod_ColorThumbs .bx-prev").hide(),$("#D_PDP_Prod_ColorThumbs .bx-next").hide()):($("#D_PDP_Prod_ColorThumbs .bx-prev").show(),$("#D_PDP_Prod_ColorThumbs .bx-next").show())}})),"true"!=$("#isenable_rlp_UGC").val()?$("#pdp_page .wcs-four .wcs-jCarouselLite ul, .wcs-pdp-page .wcs-four .wcs-jCarouselLite ul").bxSlider({maxSlides:4,minSlides:1,moveSlides:4,slideWidth:231,slideMargin:15,infiniteLoop:!1,pager:!0,hideControlOnEnd:!0,onSliderLoad:function(){$("#pdp_page .wcs-four .wcs-jCarouselLite ul a").length<=4&&$("#pdp_page .wcs-four .wcs-jCarouselLite .bx-wrapper .bx-controls").hide(),$(".wcs-pdp-page .wcs-four .wcs-jCarouselLite ul a").length<=4&&$(".wcs-pdp-page .wcs-four .wcs-jCarouselLite .bx-wrapper .bx-controls").hide()}}):($(".wcs-pdp-page .wcs-four .wcs-jCarouselLite ul.remixContainer").bxSlider({maxSlides:1,minSlides:1,moveSlides:1,slideWidth:960,slideMargin:15,infiniteLoop:!1,pager:!1,hideControlOnEnd:!0,onSliderLoad:function(){$(".wcs-pdp-page .wcs-four .wcs-jCarouselLite ul a").length<=4&&$(".wcs-pdp-page .wcs-four .wcs-jCarouselLite .bx-wrapper .bx-controls").hide()}}),$("#pdp_page .wcs-four .wcs-jCarouselLite ul").bxSlider({maxSlides:4,minSlides:1,slideWidth:231,slideMargin:15,infiniteLoop:!1,pager:!0,hideControlOnEnd:!0,onSliderLoad:function(){$("#pdp_page .wcs-four .wcs-jCarouselLite ul a").length<=4&&$("#pdp_page .wcs-four .wcs-jCarouselLite .bx-wrapper .bx-controls").hide()}}))}},{key:"renderRoxCarousel",value:function(e){$("#left_carousel").html(Rayban.templates["pdp-template"]({p:"left_carousel",templateData:e})),this.carouselRender()}}],[{key:"colorThumbClickHandler",value:function(e){e.preventDefault();var t=$(e.currentTarget).data();s.updateModelService.updateSelectedProduct(t.product_sku),s.updateModelService.updateSelectedFrame(),s.updateModelService.updateSelectedProductFrameDetails(),l.dataAvailabilityService.set(),$(".colorOverlay").removeClass("transition"),$("#left_carousel #D_PDP_Prod_ColorThumbs li").removeClass("wcs-selected"),$(e.currentTarget).addClass("wcs-selected"),window.isRoxInsurance?c.benefitPricingCallService.get("renderForcolorThumbClickHandler",t,null,null):r.Core.PubSub.publish(o.events.getPDPEvents().CAROUSEL_CLICK,{selectedProductData:window.selectedProductData,clickedElData:t,prodSku:t.product_sku})}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Tabs=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(32);t.Tabs=function(){function e(){var t=this;a(this,e),r.Core.Logger.info("Tabs Module triggered"),r.Core.PubSub.subscribe(o.events.getPDPEvents().DATA_AVAILABILITY_SUCCESS,function(e,n){t.bindFreeShippingPopup(),t.moreOrLess(),t.tabComponentRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_PRESCRIPTION,function(e,n){t.bindFreeShippingPopup(),t.tabComponentRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().CAROUSEL_CLICK,function(e,n){t.bindFreeShippingPopup(),t.tabComponentRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_LENS,function(e,n){t.bindFreeShippingPopup(),t.tabComponentRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().SIZE_CHANGE,function(e,n){t.bindFreeShippingPopup(),t.tabComponentRender(),t.contactUsClickEvent()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().POLARIZED_CHANGE,function(e,n){t.bindFreeShippingPopup(),t.tabComponentRender(),t.contactUsClickEvent()})}return i(e,[{key:"bindFreeShippingPopup",value:function(){var e=this;$(".shipping-returns-link").off("click").on("click",function(t){e.openFreeShippingPopup()})}},{key:"tabComponentRender",value:function(){if($("#right_tabs").html(Rayban.templates["pdp-template"]({p:"right_tabs",templateData:window.selectedProductData})),window.isRox){var e=$("#pdpFrameCatId").val(),t=window.selectedProductData.catentryId,n=window.pdpdata.products[e].mfPartNumber_ntk,a=n+"_"+t;if(window.pdpdata.hasOwnProperty("lensGuide")){var i=window.Rayban.utilities.interpolateString(window.selectedProductData.prescriptionMoreInfoToolTipContent,window.pdpdata.lensGuide[a]);$("#right_tabs").html(Rayban.templates["pdp-template"]({p:"right_tabs",templateData:window.selectedProductData,lensData:window.pdpdata.lensGuide[a],moreInfoLens:i}))}this.showAdvantageTabContent(),(0,s.tooltip)(document.querySelector(".precription-moreinfo--tooltip"))}$(".more-block").outerHeight()>50&&this.moreOrLess()}},{key:"moreOrLess",value:function(){if(!$(".wcs-pdp-tab-content").find(".continued").length){var e=$(".more-block").outerHeight()||0,t=$("#readMore").val(),n=$("#readLess").val();if(!(e<50)){$(".more-less .more-block").css({height:90,overflow:"hidden"}),$(".more-less").append('<span class="continued">[&hellip;]</span><a href="#" class="adjust">'+n+"</a>"),$("a.adjust").html(t);var a=$(".wcs-pdp-tab-content").height()+32;$(".wcs-pdp-tab-content").css("height",a+"px"),$(".adjust").toggle(function(e){$(e.currentTarget).parents("div:first").find(".more-block").css({height:"auto",overflow:"visible"}),$(e.currentTarget).parents("div:first").find("span.continued").css("display","none"),$(e.currentTarget).addClass("adjust-readless").html(n),$(".wcs-pdp-tab-content").css("height",$(".wcs-pdp-tabs").height()-45+"px")},function(e){$(e.currentTarget).parents("div:first").find(".more-block").css({height:90,overflow:"hidden"}),$(e.currentTarget).parents("div:first").find("span.continued").css("display","block"),$(e.currentTarget).html(t),$(e.currentTarget).removeClass("adjust-readless"),$(".wcs-pdp-tab-content").css("height",a+"px")})}}}},{key:"showAdvantageTabContent",value:function(){var e=$("#DESK_PDP_ROX_Advantages").html();""!==e&&void 0!==e&&$("#rox-advantages").html(e)}},{key:"contactUsClickEvent",value:function(){$("#wcs-contact_more").unbind("click").bind("click",function(e){$("html, body").animate({scrollTop:$(document).height()},1e3).promise().then(function(){$("#wcs_contact_us").click()})})}},{key:"openFreeShippingPopup",value:function(){$("#wcs-shippingreturns-popup-div").show();var e=$("#wcs-shippingreturns-popup-div"),t=$(document).scrollTop(),n=$(window).height(),a=e.height();a+40>n&&(t-=a+40-n,t<1&&(t=0),$(document).scrollTop(t));var i=($(window).width()-e.width())/2,r=($(window).height()-e.height())/2+t;r=n>a?(n-a)/2+t:t+40,e.css({left:i,top:r});var o=$("body"),s=$(document).height(),l=$(".wcs-fadeout-full")[0];$(l).removeClass("wcs-hide"),$(o).is("ipad")||$(o).is("android")?$(l).css({"min-height":"100%","z-index":"101"}):$(l).css({height:s+"px","z-index":"101"})}},{key:"getRoxSet",value:function(){var e=$("#pdpFrameCatId").val()+"_"+window.selectedProductData.catentryId,t=window.selectedProductData.mandatoryServices,n=t.split(",");if(1==n.length)e+="_"+window.selectedProductData.mandatoryServices;else for(var a=0;a<n.length;a++)e+="_"+n[a];return e}}],[{key:"tabHandler",value:function(e){e.preventDefault();var t=$(e.currentTarget).attr("href");$(".wcs-pdp-tab"+t).show().siblings().hide(),$(e.currentTarget).parent("li").addClass("active").siblings().removeClass("active")}},{key:"openEmailPopUp",value:function(e){e.stopPropagation(),e.preventDefault(),$("#wcs-pageName")&&$("#wcs-pageName").length>0&&"productDisplayPage"==$("#wcs-pageName").val()?window.isPdppage=!0:window.isPdppage=!1;var t="";t=window.isRox?$("#pdpFrameCatId").val():$("#itemCatEntryId").val();var n=$("#storeId").val(),a=$("#catalogId").val(),i=$("#langId").val(),r=$.trim(window.pdpdata.products[t].modelName),o=window.pdpdata.products[t].displaySKU,s=window.pdpdata.products[t].partNumber,l=window.pdpdata.products[t].altText,c=$.trim(window.pdpdata.products[t].modelName),d=window.pdpdata.products[t].productType,u=window.pdpdata.products[t].productType,p=$.trim(window.pdpdata.products[t].modelName),f=void 0,h=void 0;"TRUE"==window.pdpdata.products[t].onSaleVal?(f=$.trim(window.pdpdata.products[t].offerPrice),h=$.trim(window.pdpdata.products[t].listPrice)):(f=$.trim(window.pdpdata.products[t].offerPrice),h="");var v=[];$("#isRoxEnabled").length>0&&"true"==$("#isRoxEnabled").val()&&(f=$("#right_header_price #wcs-productprice").text()),v={storeId:n,catalogId:a,catEntryId:t,langId:i,emailSRC:"EmailTest",metaTitle:r,sku:o,productId:t,partNumber:s,altText:l,title:c,categoryTypeForEmail:d,prodCatType:u,price:f,name:p,clearancePrice:h},window.isRox&&(v.roxLensProductPartNumber=window.selectedProductData.productPartNumber,v.roxFrameProductPartNumber=window.pdpdata.products[$("#pdpFrameCatId").val()].productPartNumber,v.roxSet_1=this.getRoxSet()),$.ajax({url:"PreOrderRemindMeEmailView",data:v||"",type:"POST",dataType:"html",success:window.appendNotificationData})}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RightMain=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(21),l=n(20),c=n(23);t.RightMain=function(){function e(){var t=this;a(this,e),r.Core.Logger.info("Right Main module triggered"),r.Core.PubSub.subscribe(o.events.getPDPEvents().DATA_AVAILABILITY_SUCCESS,function(e,n){t.rightMainRender(),t.updateRoxableSection()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_PRESCRIPTION,function(e,n){t.rightMainRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().CAROUSEL_CLICK,function(e,n){t.rightMainRender(),t.updateRoxableSection()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_LENS,function(e,n){t.rightMainRender(),t.updateRoxableSection()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().SIZE_CHANGE,function(e,n){t.rightMainRender(),t.updateRoxableSection()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().POLARIZED_CHANGE,function(e,n){t.rightMainRender(),t.updateRoxableSection()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_ROXABLE_SECTION,function(e,n){t.updateRoxableSection()})}return i(e,[{key:"rightMainRender",value:function(){$("#right_main").html(Rayban.templates["pdp-template"]({p:"right_main",templateData:window.selectedProductData})),$("body").hasClass("wcs-en_US")&&window.shoprunnerUpdateContent(),"true"===$.cookie("isCSRSession")&&this.renderCsrInformation(window.selectedProductData.partNumber,window.selectedProductData.availabilityData.buyableqty),window.isRox&&($(".rox-lensType-wrapper").html(Rayban.templates["pdp-template"]({p:"right_lensType_container",templateData:window.selectedProductData})),this.setPrescriptionSelect()),this.renderApplePayButton(),$(".wcs-ordernow.ordernow-icon span").addClass("order-recvd-date"),"CN"!=$("#storeIdentifier").val()&&$("#right_main").append($("#right_main").nextUntil("#right_tabs"))}},{key:"renderApplePayButton",value:function(){$("#applePayEnabled")&&$("#applePayEnabled").length>0&&"Y"===$("#applePayEnabled").val()&&$("#applePayEnabledInPDP")&&$("#applePayEnabledInPDP").length>0&&"Y"===$("#applePayEnabledInPDP").val()&&(window.applePayObj=new ApplePay,applePayDesktop.prototype=window.applePayObj,applePayDesktop.prototype.constructor=applePayDesktop,window.applePayDesktopInst=new applePayDesktop,applePayDesktopInst.initialize(),applePayDesktopInst.preprocess())}},{key:"setPrescriptionSelect",value:function(){"single-vision"===window.selectedProductData.prescriptionTypeCode.toLowerCase()?($(".rox-lenstype-single-vision .wcs-label-radio").addClass("wcs-r-on"),$("#single-vision_radio").attr("checked",!0),$(".rox-lenstype-progressive .wcs-label-radio").removeClass("wcs-r-on"),$("#progressive_radio").attr("checked",!1)):($(".rox-lenstype-progressive .wcs-label-radio").addClass("wcs-r-on"),$("#progressive_radio").attr("checked",!0),$(".rox-lenstype-single-vision .wcs-label-radio").removeClass("wcs-r-on"),$("#single-vision_radio").attr("checked",!1))}},{key:"renderCsrInformation",value:function(e,t){if("true"!==$.cookie("isCSRSession"))return null;if(0===$("#csr-pdp-info").length){var n="";$(".so-pdpContainer").before('<div id="csr-pdp-info"></div>'),n+='<div id="csr-pdp-upc"><label>UPC Number: </label><span> '+e+"</span></div>",n+='<div id="csr-pdp-inventory"><label>Inventory: </label><span>'+t+"</span></div>",$("#csr-pdp-info").html(n)}else $("#csr-pdp-upc span").html(e),$("#csr-pdp-inventory span").html(t)}},{key:"updateRoxableSection",value:function(){if("true"==window.selectedProductData.roxable&&$("#DESK_PDP_ROX_Sun").length>0&&$(".pdp-rox-info-wrapper").length>0){$(".pdp-rox-info-wrapper").html($("#DESK_PDP_ROX_Sun").html());var e=window.selectedProductData.roxPDPUrl;$(".pdp-roxable-btn").attr("href",e)}}}],[{key:"changePrescription",value:function(e){var t=$(e.currentTarget).find(".prescription-val").val();return l.updateModelService.updateSelectedProduct(t),l.updateModelService.updateSelectedProductFrameDetails(),s.dataAvailabilityService.set(),window.isRoxInsurance?(c.benefitPricingCallService.get("renderChangePrescriptionHandler",null,null,e),$("#applePayEnabled")&&$("#applePayEnabled").length>0&&"Y"===$("#applePayEnabled").val()&&$("#applePayEnabledInPDP")&&$("#applePayEnabledInPDP").length>0&&"Y"===$("#applePayEnabledInPDP").val()&&(window.applePayObj=new ApplePay,applePayDesktop.prototype=window.applePayObj,applePayDesktop.prototype.constructor=applePayDesktop,window.applePayDesktopInst=new applePayDesktop,applePayDesktopInst.initialize(),applePayDesktopInst.preprocess())):r.Core.PubSub.publish(o.events.getPDPEvents().UPDATE_PRESCRIPTION,{selectedProductData:window.selectedProductData,selectedVal:t}),!1}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.roxClearDesktop=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),l=n(5),c=n(61);t.roxClearDesktop=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),o(t,[{key:"showHideTooltip",value:function(e){$(e.currentTarget).hasClass("rox-note-tooltip-icon")&&($(".rox-prescription-tooltip").is(":visible")?$(".rox-prescription-tooltip").hide():$(".rox-prescription-tooltip").show()),e.stopPropagation()}},{key:"initializeLensesTooltip",value:function(){var e=this;window.WcsBrowser&&!window.WcsBrowser.isIpad?$(".rc-info-lenses-box .rox-note-tooltip-icon").off("hover").on("hover",function(t){e.showHideTooltip(t)}):($(".rc-info-lenses-box .rox-note-tooltip-icon").off("click").on("click",function(t){e.showHideTooltip(t)}),$(".rc-info-lenses-box .rox-prescription-tooltip").off("click").on("click",function(e){e.stopPropagation()}),$("body").on("touchstart",function(e){$(e.srcElement).closest(".rox-lenstype-note-wrapper").hasClass("rox-lenstype-note-wrapper")||$(e.srcElement).closest("rox-prescription-tooltip").hasClass("rox-prescription-tooltip")||$(".rox-prescription-tooltip").is(":visible")&&$(".rox-prescription-tooltip").hide()}))}},{key:"bind",value:function(){var e=this;$("body").on("click",".rc-add-lenses-bt, .rc-info-lenses-change, .rc-pdp-enabled .rc-change-lenses",function(t){t.preventDefault(),e.openLensOverlay(t.currentTarget)}),$("body").on("click",".rc-info-lenses-remove",function(t){e.clear(),t.preventDefault()}),$(".rc-read-more").RBScrollTo(),this.initializeLensesTooltip()}}],[{key:"reloadView",value:function(e){switch(e.dataType){case"prescription":window.selectedProductData.lensPrice=e.data.lensPriceStr,window.selectedProductData.productType="OPTICAL",window.selectedProductData.listPrice=e.data.listPrice?e.data.listPrice:null,s.Core.PubSub.publish(l.events.getPDPEvents().RENDER_PRICE_DETAILS,{colorsData:{frameLabel:window.pdpdata.colors.frameLabel,roxLensLblinPriceSection:window.pdpdata.colors.roxLensLblinPriceSection?window.pdpdata.colors.roxLensLblinPriceSection:"Lenses:"}}),setTimeout(function(){document.getElementById("rx-framePrice").innerHTML=e.data.framePriceStr,document.getElementById("wcs-productprice").innerHTML=e.data.totalStr},100);break;case"insurance":window.selectedProductData.originalPrice=e.data.totalOriginalPrice,window.selectedProductData.insPrice=e.data.totalPrice,window.selectedProductData.productType="OPTICAL",window.selectedProductData.frameDiscount=e.data.frameDiscount,window.selectedProductData.insFramePrice=e.data.frameFinalPrice,window.selectedProductData.lensDiscount=e.data.lensDiscount,window.selectedProductData.lensPrice=e.data.lensOriginalPrice,window.selectedProductData.insLensPrice=e.data.lensFinalPrice,window.selectedProductData.isInsurance="Y",window.selectedProductData.availabilityData.notSellableOnlineMsg=!1,s.Core.PubSub.publish(l.events.getPDPEvents().RENDER_PRICE_DETAILS,{colorsData:{frameLabel:window.pdpdata.colors.frameLabel,roxLensLblinPriceSection:window.pdpdata.colors.roxLensLblinPriceSection?window.pdpdata.colors.roxLensLblinPriceSection:"Lenses:"}}),setTimeout(function(){document.getElementById("rx-framePrice").innerHTML=e.data.frameOriginalPrice},100);break;default:window.selectedProductData.productType="OPTICAL",window.selectedProductData.lensPrice=0,window.selectedProductData.listPrice=e.data.listPrice?e.data.listPrice:null,window.selectedProductData.offerPrice=window.selectedProductData.offerPrice?window.selectedProductData.offerPrice:null,window.selectedProductData.vatIncludedText=window.selectedProductData.hasOwnProperty("vatIncludedText")?window.selectedProductData.vatIncludedText:"",delete window.selectedProductData.isInsurance,s.Core.PubSub.publish(l.events.getPDPEvents().RENDER_PRICE_DETAILS)}}}]),t}(c.roxClear)},function(e,t,n){e.exports=n(49)},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(50),s=n(51),l=n(56),c=n(31),d=n(64),u=n(65),p=n(66);new(function(){function e(){a(this,e),r.Core.Logger.log("Bootstrap kickstarted"),window.s7ImgSetResponse=c.ImageService.s7ImgSetResponse,window.s7SpinSetExistResponse=c.ImageService.s7SpinSetExistResponse,window.isRox=this.isRox(),window.isRoxInsurance=this.isRoxInsurance(),window.isVTO=this.isVTO(),window.isStandard=!this.isRox()&&!window.isRoxOptics;var t=new o.pdpModel;r.Core.Logger.info("PDP Model initialized"),new l.InitializeModules(t),new s.BindingsModule,new u.lensesDropdown,new p.initalizeS7,$("#showDraggableLens")&&$("#showDraggableLens").val()&&"true"===$("#showDraggableLens").val()&&new d.imageCompare($(".rb-image-compare"))}return i(e,[{key:"isRox",value:function(){return $("#isRoxEnabled").length>0&&"true"===$("#isRoxEnabled").val()}},{key:"isRoxInsurance",value:function(){return this.isRox()&&"true"===$.cookie("EyeMedLogin")}},{key:"isVTO",value:function(){return"true"===$("#vtoFlag").val()}}]),e}())},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.pdpModel=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(20);t.pdpModel=function(){function e(){var t=this;a(this,e),this.PDPOriginalData=[],this.filteredCarouselData=null,this.currency="",this.availabilityData=null,this.mainImageSliderArr=[],this.pdpCarousel=null,this.unavailableProductSkus=[],this.prefixCurrency=!0,this.data=window.pdpdata,this.currency=this.data.colors.currencySymbol,this.PDPOriginalData=JSON.parse(JSON.stringify(window.pdpdata)),this.selectedFrame=$("#pdpFrameCatId").val(),this.selectedProductData=this.getActiveProduct(),this.frameData=this.PDPOriginalData.products[this.selectedFrame]||[],this.lensData=this.PDPOriginalData.products[this.selectedProductData.catentryId]||{},this.changeLinkDetails(),window.zoomArr=[],window.mainImageSliderArr=[],window.spin360Arr=[],r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_SELECTED_PRODUCT_DATA,function(e,n){t.selectedFrame=$("#pdpFrameCatId").val(),s.updateModelService.updateSelectedProductFrameDetails(),window.selectedProductData=t.selectedProductData})}return i(e,[{key:"changeLinkDetails",value:function(){var e=this;if(void 0!==this.selectedFrame){var t=this.data.products[this.selectedFrame].linkDetailsView;$.each(this.data.products,function(n,a){var i=a.catentryId;if("ROX_LENS"==a.productType){var r=t+"&roxLensPartNumber="+e.data.products[i].partNumber;e.data.products[i].linkDetailsView=r}})}}},{key:"getActiveProduct",value:function(){var e=this,t={};if(window.isRox){var n=void 0;this.data.colors.carousel.forEach(function(t){"frameColor"===t.type&&t.details.value===e.selectedFrame&&(n=t.details.defaultLensColorCarousel)}),t=this.data.products[n]}else this.data.colors.carousel.forEach(function(n){"true"!==n.selected&&!0!==n.selected||(t=e.data.products[n.details.value])});return t}}],[{key:"setPDPModelData",value:function(e){$.extends(this,e)}},{key:"setSelectedProductData",value:function(e){this.selectedProductData=e}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BindingsModule=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(52),l=n(53),c=n(55),d=function(){function e(){var t=this;a(this,e),r.Core.Logger.info("BindingsModule triggered"),this.Bindings={commonSectionBindEvents:new s.CommonSectionBindEvents,leftSectionBindEvents:new l.LeftSectionBindEvents,rightSectionBindEvents:new c.RightSectionBindEvents},r.Core.PubSub.subscribe(o.events.getPDPEvents().BIND_EVENTS,function(e,n){t.triggerAllBinds()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_PRESCRIPTION,function(e,n){t.triggerAllBinds()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().CAROUSEL_CLICK,function(e,n){t.triggerAllBinds()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_LENS,function(e,n){t.triggerAllBinds()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().SIZE_CHANGE,function(e,n){t.triggerAllBinds()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().POLARIZED_CHANGE,function(e,n){t.triggerAllBinds()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().ROX_CAROUSEL_UPDATE,function(e,n){t.triggerLeftBinds()})}return i(e,[{key:"triggerAllBinds",value:function(){r.Core.Logger.log("All bindings applied"),this.triggerCommonBinds(),this.triggerLeftBinds(),this.triggerRightBinds()}},{key:"triggerCommonBinds",value:function(){this.Bindings.commonSectionBindEvents.triggerBind()}},{key:"triggerRightBinds",value:function(){this.Bindings.rightSectionBindEvents.triggerBind()}},{key:"triggerLeftBinds",value:function(){this.Bindings.leftSectionBindEvents.triggerBind()}}]),e}();t.BindingsModule=d},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CommonSectionBindEvents=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(26),o=function(){function e(){a(this,e)}return i(e,[{key:"triggerBind",value:function(){$(".pdp-vm-icon").hover(r.Common.hideOverlayNavigations),$(".pdp-accs-top-compCheck").click(function(){$("html,body").animate({scrollTop:$(".wcs-acc-comp-input").offset().top-200},"200",function(){$(".wcs-acc-comp-input").focus()})}),$(".wcs-acc-comp-input").keypress(function(e){13==e.which&&$(".acc-comp-iconRight-wrapper").trigger("click")}),$(".acc-comp-iconRight-wrapper").click(function(){if(""!==$(".wcs-acc-comp-input").val()){var e=$(".wcs-acc-comp-input").val().toLowerCase().replace(/[\. ,:-]+/g,""),t=$("#comptble-prdcts").val().toLowerCase();t=t.split(";"),-1!=$.inArray(e,t)?($(".compatible-msg").removeClass("wcs-notCompatible"),$(".compatible-msg").addClass("wcs-compatible").html('<span class="wcs-icon icon-comptbl"></span>'+$("#compatibleText").val())):($(".compatible-msg").removeClass("wcs-compatible"),$(".compatible-msg").addClass("wcs-notCompatible").html('<span class="wcs-icon icon-not-comptbl"></span>'+$("#notCompatibleText").val()))}}),$(".pdp_accs_modelCode_popup .wcs-close-btn ").click(function(){$(".pdp_accs_modelCode_popup").hide().addClass("wcs-hidden")}),$(".wcs-acc-comp-check a").click(function(){var e=$(document).scrollTop(),t=$(window).height(),n=$("#pdp_accs_modelCode_popup").height();n+40>t&&(e-=n+40-t,e<1&&(e=0),$(document).scrollTop(e));var a=($(window).width()-$("#pdp_accs_modelCode_popup").width())/2,i=($(window).height()-$("#pdp_accs_modelCode_popup").height())/2+e;i=t>n?(t-n)/2+e:e+40,$("#pdp_accs_modelCode_popup").css({left:a,top:i}),$("#pdp_accs_modelCode_popup").removeClass("wcs-hidden").show();var r=$(document).height();$(".wcs-fadeout-full").removeClass("wcs-hide").css({height:r+"px"})})}}]),e}();t.CommonSectionBindEvents=o},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LeftSectionBindEvents=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(44),o=n(31),s=n(54),l=function(){function e(){a(this,e)}return i(e,[{key:"triggerBind",value:function(){$("#D_PDP_Prod_ColorsViewAll").off("click").on("click",function(){new s.pdpViewAll(window.pdpdata).render()}),$("#D_PDP_Prod_ColorThumbs li").off("click").on("click",function(e){r.Carousel.colorThumbClickHandler(e)}),WcsBrowser.isIpad||$("#D_PDP_Prod_ColorThumbs li").off("hover").hover(function(e){o.ImageService.displayColorPreview(e)},function(e){o.ImageService.hideColorPreview()}),$(".wcs-enlarge-view").off("click").on("click",function(e){o.ImageService.openEnlargeView(e)}),$(".wcs-zoom-label-container").off("click").on("click",function(e){o.ImageService.triggerEnlargeView(e)}),$(".wcs-close-btn").off("click").on("click",function(e){o.ImageService.closeZoomOverlay()}),$(".wcs-enlargeView").off("click").on("click",function(e){o.ImageService.showEnlargeView(e)}),$(document).on("click",".D_PDP_Prod_PolarReadMore,.D_PDP_Prod_PolarReadMore a",function(e){return $("html,body").stop().animate({scrollTop:$(".wcs-draggable-lenses-description").not(".wcs-hide").find("h5").offset().top},"200"),!1}),$(document).on("click",".more-about-lenses",function(e){return $("html,body").stop().animate({scrollTop:$($(e.currentTarget).attr("href")).offset().top},"200",function(){$("#wcs-acc-comp-input").focus()}),!1})}}]),e}();t.LeftSectionBindEvents=l},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.pdpViewAll=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(21),l=n(23),c=n(20);t.pdpViewAll=function(){function e(t){a(this,e),this.data=t,this.containerId=window.isRox?"D_PDP_Prod_RoxColorsOverlay":"D_PDP_Prod_ColorsOverlay",this.container=$("#"+this.containerId),this.headerContainer=$(".header-wrapper"),this.bodyContainer=$(".viewAll-body"),this.viewAllTemplate=window.Rayban.templates["pdp-template"],this.lensSelectedArray=[],this.frameSelectedArray=[]}return i(e,[{key:"headerRender",value:function(){var e=window.isRox?"viewAll_rox_header":"viewAll_header",t=this.data.products[this.data.colors.carousel[0].details.value].modelName;this.container.html(this.viewAllTemplate({p:e,viewAllData:this.data.colors,headerLabel:t})),$(".gridType-blk").hide(),$(".gridType-blk").prev(".filter-seperator").hide()}},{key:"bodyRender",value:function(){var e=window.isRox?"viewAll_rox_body":"viewAll_body",t=$("#pdpFrameCatId").val();this.container.append(this.viewAllTemplate({p:e,templateData:this.data})),$("#D_PDP_Prod_ColorsOverlayThumbs .tile").each(function(e,n){t&&$(n).find(".prod_sku").val()===t&&$(n).addClass("selected")})}},{key:"bindEvent",value:function(){var e=this;$(".pdp-view-all-popup").off("click").on("click",function(t){e.showCloseColorlist(t)}),$("#D_PDP_Prod_ColorsOverlay .wcs-close-btn").off("click").on("click",function(){$(".wcs-fadeout-full-overlay").click()}),$(".frame-color-list ul li").off("click").on("click",function(t){e.frameColorFilterHandler(t)}),$(".lens-color-list ul li").off("click").on("click",function(t){e.lensColorFilterHandler(t)}),$(".lens-color-list ul li div,.frame-color-list ul li div").off("click").on("click",function(e){$(e.currentTarget).parent().click()}),$(".lens-color-list .selection-clear-icon").off("click").on("click",function(t){e.lensColorFilterClearHandler(t)}),$(".frame-color-list .selection-clear-icon").off("click").on("click",function(t){e.frameColorFilterClearHandler(t)}),$(".pdp-view-all-popup .wcs-filter-check").off("click").on("click",function(t){e.filterByPloarized(t)}),$(".pdp-view-all-popup .wcs-close-btn").off("click").on("click",function(t){e.close(t)}),$(".pdp-view-all-popup .gridType-front,.pdp-view-all-popup .gridType-side").off("click").on("click",function(t){e.gridTypeHandler(t)}),$(".tile .tile-body img").off("click").on("click ",function(t){e.showProductDetailPage(t)}),$(".rox-product-lnk").off("click").on("click",function(t){e.showProductDetailPage(t)}),$(".wcs-fadeout-full").on("click ",function(t){e.close(t)}),$(".lens-color-list,.frame-color-list").mouseenter(function(t){e.setScrollTopPosition(t)}).mouseleave(function(t){e.resetScrollTopPosition(t)})}},{key:"setScrollTopPosition",value:function(e){$(e.target).closest(".color-list").find("ul li").length>7&&($(window).scrollTop(),$("body").css({overflow:"hidden",height:"100%"}),$("body").on("scroll touchmove mousewheel",function(){return e.preventDefault(),e.stopPropagation(),!1}))}},{key:"resetScrollTopPosition",value:function(e){$("body").off("scroll touchmove mousewheel"),$("body").css({overflow:"auto",height:"auto"})}},{key:"alignTiles",value:function(){$(".pdp-view-all-popup .tile").not(".wcs-hide").each(function(e,t){e+=1,e%3==0?$(t).removeClass("marginRight-10"):$(t).addClass("marginRight-10")})}},{key:"render",value:function(){this.headerRender(),this.bodyRender(),this.alignTiles(),window.display_center_1(this.container),this.container.show().removeClass("wcs-hidden").removeClass("wcs-hide"),load_scroller(),select_dropbox_value(),expand_dropbox(),this.bindEvent(),this.setColorListScroller(),this.enableDisablePolarCheck(),window.show_full_fadeout_1()}},{key:"close",value:function(e){$(".pdp-view-all-popup").hide(),$(".wcs-fadeout-full").css("height","0px")}},{key:"showCloseColorlist",value:function(e){$(e.target).hasClass("frame-color")||$(e.target).parent().hasClass("frame-color")?($(".frame-color-list").slideToggle("normal"),$(".lens-color-list").hide(),$(".lens-color").addClass("opaque-60"),$(".frame-color").removeClass("opaque-60"),$(".frame-color .wcs-icon-relative").toggleClass("open"),$(".lens-color .wcs-icon-relative").removeClass("open"),setTimeout(function(){window.scrollFrameDropdown&&window.scrollFrameDropdown.refresh()},300)):$(e.target).hasClass("lens-color")||$(e.target).parent().hasClass("lens-color")?($(".lens-color-list").slideToggle("normal"),$(".frame-color-list").hide(),$(".frame-color").addClass("opaque-60"),$(".lens-color").removeClass("opaque-60"),$(".lens-color .wcs-icon-relative").toggleClass("open"),$(".frame-color .wcs-icon-relative").removeClass("open"),setTimeout(function(){window.scrollDropdown&&window.scrollDropdown.refresh()},300)):$(e.target).is(".color-list, .color-list ul, .color-list ul li, .color-list ul li div,.color-list div")||($(".lens-color-list,.frame-color-list").hide(),$(".lens-color,.frame-color").removeClass("opaque-60"),$(".lens-color .wcs-icon-relative,.frame-color .wcs-icon-relative").removeClass("open"))}},{key:"setColorListScroller",value:function(e){if(window.scrollDropdown&&window.scrollDropdown.destroy(),window.scrollFrameDropdown&&window.scrollFrameDropdown.destroy(),$(".lens-color-list ul li").not(".wcs-hide").length>7){var t=0;$(".lens-color-list").show(),$("#scroller ul li").not(".wcs-hide").each(function(e,n){e<7&&(t+=$(n).outerHeight()+2)}),$(".lens-color-list").hide(),void 0!==e&&($(e.target).hasClass("selection-clear-icon")&&$(e.target).parent().hasClass("lens-color-list")||$(e.target).closest(".color-list").hasClass("lens-color-list"))&&$(".lens-color-list").show(),$("#scroller").css({"max-height":t}),window.scrollDropdown=new iScroll("scroller",{hScrollbar:!1,scrollbars:!0,mouseWheel:!0})}else $("#scroller").removeAttr("style"),window.scrollDropdown&&window.scrollDropdown.destroy();if($(".frame-color-list ul li").not(".wcs-hide").length>7){var n=0;$(".frame-color-list").show(),$("#frameScroller ul li").not(".wcs-hide").each(function(e,t){e<7&&(n+=$(t).outerHeight()+2)}),$(".frame-color-list").hide(),void 0!==e&&(!$(e.target).hasClass("selection-clear-icon")&&$(e.target).parent().hasClass("frame-color-list")||$(e.target).closest(".color-list").hasClass("frame-color-list"))&&$(".frame-color-list").show(),$("#frameScroller").css({"max-height":n}),window.scrollFrameDropdown=new iScroll("frameScroller",{hScrollbar:!1,scrollbars:!0,mouseWheel:!0})}else $("#frameScroller").removeAttr("style"),window.scrollFrameDropdown&&window.scrollFrameDropdown.destroy()}},{key:"frameColorFilterClearHandler",value:function(e){e.preventDefault(),$(".frame-color-list ul li").each(function(e,t){$(t).removeClass("selected"),$(t).removeClass("wcs-hide")}),$(".frame-color-list .selection-clear").hide(),this.frameSelectedArray=[],this.filterColors(e),this.filterLenseSelectList(e),this.filterFrameSelectList(e),this.setColorListScroller(e)}},{key:"lensColorFilterClearHandler",value:function(e){e.preventDefault(),$(".lens-color-list ul li").each(function(e,t){$(t).removeClass("selected"),$(t).removeClass("wcs-hide")}),$(".lens-color-list .selection-clear").hide(),this.lensSelectedArray=[],this.filterColors(e),this.filterFrameSelectList(e),this.filterLenseSelectList(e),this.setColorListScroller(e)}},{key:"filterFrameSelectList",value:function(e){e.preventDefault();var t=[];$.each(this.data.colors.carousel,function(e,n){$(".pdp-view-all-popup .tile").not(".wcs-hide").each(function(e,n){var a=$(n).find(".frameValue").val();-1==$.inArray(a,t)&&t.push(a)})}),0===t.length?$(".frame-color-list li").removeClass("wcs-hide"):$(".frame-color-list li").each(function(e,n){var a=$(n).find(".frameColorVal").val();-1==$.inArray(a,t)?$(n).addClass("wcs-hide"):$(n).removeClass("wcs-hide")})}},{key:"filterLenseSelectList",value:function(e){e.preventDefault();var t=[];$.each(this.data.colors.carousel,function(e,n){$(".pdp-view-all-popup .tile").not(".wcs-hide").each(function(e,n){var a=$(n).find(".lensValue").val();-1==$.inArray(a,t)&&t.push(a)})}),0===t.length?$(".lens-color-list li").removeClass("wcs-hide"):$(".lens-color-list li").each(function(e,n){var a=$(n).find(".lensColorVal").val();-1==$.inArray(a,t)?$(n).addClass("wcs-hide"):$(n).removeClass("wcs-hide")}),this.setColorListScroller(e)}},{key:"filterByPloarized",value:function(e){e.preventDefault(),$(".polarized-blk .wcs-filter-check").toggleClass("checked"),$(".polarized-blk .wcs-filter-check").hasClass("checked")?$("#D_PDP_Prod_ColorsOverlayFilterPolar").attr("checked",!0):$("#D_PDP_Prod_ColorsOverlayFilterPolar").attr("checked",!1),this.filterColors(e)}},{key:"frameColorFilterHandler",value:function(e){e.preventDefault(),$(e.target).find(".frameColor-checkbox").is(":checked")?$(e.target).find(".frameColor-checkbox").attr("checked",!1):$(e.target).find(".frameColor-checkbox").attr("checked",!0),$(e.target).toggleClass("selected");var t=0;$(".frame-color-list ul li").each(function(e,n){$(n).hasClass("selected")&&(t+=1)}),t>0?$(".frame-color-list .selection-clear").show():$(".frame-color-list .selection-clear").hide();var n=$(e.target).find(".frameColorVal").val();if($(e.target).hasClass("selected")&&""!==n&&void 0!==n)this.frameSelectedArray.push(n);else for(var a=0;a<this.frameSelectedArray.length;a++)this.frameSelectedArray[a]===n&&this.frameSelectedArray.splice(a,1);this.filterColors(e),this.filterLenseSelectList(e),$(e.target).find(".frameColor-checkbox").is(":checked")||0!==t||this.filterFrameSelectList(e),window.scrollFrameDropdown&&window.scrollFrameDropdown.refresh()}},{key:"lensColorFilterHandler",value:function(e){e.preventDefault(),$(e.target).find(".lensColor-checkbox").is(":checked")?$(e.target).find(".lensColor-checkbox").attr("checked",!1):$(e.target).find(".lensColor-checkbox").attr("checked",!0),$(e.target).toggleClass("selected");var t=0;$(".lens-color-list ul li").each(function(e,n){$(n).hasClass("selected")&&(t+=1)}),t>0?($(".lens-color-list .selection-clear").show(),$("#scroller").find("ul").next().addClass("view_custom_scroll")):($(".lens-color-list .selection-clear").hide(),$("#scroller").find("ul").next().removeClass("view_custom_scroll"));var n=$(e.target).find(".lensColorVal").val();if($(e.target).hasClass("selected")&&""!==n&&void 0!==n)this.lensSelectedArray.push(n);else for(var a=0;a<this.lensSelectedArray.length;a++)this.lensSelectedArray[a]===n&&this.lensSelectedArray.splice(a,1);this.filterColors(e),this.filterFrameSelectList(e),$(e.target).find(".lensColor-checkbox").is(":checked")||0!==t||this.filterLenseSelectList(e),window.scrollDropdown&&window.scrollDropdown.refresh()}},{key:"filterColors",value:function(e){var t=this;e.preventDefault();var n=$(".polarized-blk .wcs-filter-check").hasClass("checked"),a=this.lensSelectedArray.length,i=this.frameSelectedArray.length,r=0,o=0;0!==a||0!==i||n?$(".pdp-view-all-popup .tile").each(function(e,s){var l=$(s).find(".polar_skuId").val(),c=$(s).find(".lensValue").val(),d=$(s).find(".frameValue").val();r+=1,0===a&&0===i&&n&&""!==l?$(s).removeClass("wcs-hide"):0===a&&i>0&&-1!=$.inArray(d,t.frameSelectedArray)&&!n?$(s).removeClass("wcs-hide"):0===a&&i>0&&-1!=$.inArray(d,t.frameSelectedArray)&&n&&""!==l?$(s).removeClass("wcs-hide"):a>0&&-1!=$.inArray(c,t.lensSelectedArray)&&0===i&&!n?$(s).removeClass("wcs-hide"):a>0&&-1!=$.inArray(c,t.lensSelectedArray)&&0===i&&n&&""!==l?$(s).removeClass("wcs-hide"):a>0&&-1!=$.inArray(c,t.lensSelectedArray)&&i>0&&-1!=$.inArray(d,t.frameSelectedArray)&&!n?$(s).removeClass("wcs-hide"):n&&""!==l&&a>0&&-1!=$.inArray(c,t.lensSelectedArray)&&i>0&&-1!=$.inArray(d,t.frameSelectedArray)?$(s).removeClass("wcs-hide"):($(s).addClass("wcs-hide"),o+=1)}):($(".pdp-view-all-popup .tile").each(function(e,t){$(t).removeClass("wcs-hide")}),$(".no-colors-wrapper").addClass("wcs-hide")),this.alignTiles(),r==o&&0!==r?$(".no-colors-wrapper").removeClass("wcs-hide"):$(".no-colors-wrapper").addClass("wcs-hide"),this.enableDisablePolarCheck();var s=$("#D_PDP_Prod_ColorsOverlay").outerHeight(),l=$("body").outerHeight();s<l?$(".wcs-fadeout-full").height(l):$(".wcs-fadeout-full").height(s+40)}},{key:"enableDisablePolarCheck",value:function(e){var t=0,n=0;$(".pdp-view-all-popup .tile").not(".wcs-hide").each(function(e,a){""===$(a).find(".polar_skuId").val()&&(t+=1),n+=1}),0!==n&&t==n?$(".polarized-blk label").addClass("disable-check"):$(".polarized-blk label").removeClass("disable-check")}},{key:"gridTypeHandler",value:function(e){$(e.target).hasClass("gridType-side")?($(e.target).find("div").addClass("select"),$(".gridType-front").find("div").removeClass("select")):($(e.target).find("div").addClass("select"),$(".gridType-side").find("div").removeClass("select")),$(".pdp-view-all-popup .tile").each(function(t,n){var a=$(n).find(".tile-body .product-lnk img").attr("src");a=$(e.target).hasClass("gridType-side")?a.replace("shad_fr","shad_qt"):a.replace("shad_qt","shad_fr"),$(n).find(".tile-body .product-lnk img").attr("src",a)})}},{key:"showProductDetailPage",value:function(e){var t=window.isRox?window.selectedProductData.catentryId:$(e.target).closest(".tile").find(".prod_sku").val(),n=$(e.target).closest(".tile").find(".prod_sku").val(),a=window.pdpdata.products[n],i=$(e.target).closest(".tile").find(".lens_skus").val();if(window.isRox&&(window.selectedProductData=window.pdpdata.products[t],$("#pdpFrameCatId").val(n),$("#roxPDPFramePrice").val(a.framePrice),r.Core.PubSub.publish(o.events.getPDPEvents().UPDATE_SELECTED_PRODUCT_DATA),window.isRoxInsurance&&l.benefitPricingCallService.get("renderPdpRoxViewAllHandler",null,window.selectedProductData,e)),$("#left_carousel ul.wcs-carousel li").removeClass("wcs-selected"),$("#left_carousel ul.wcs-carousel li").each(function(e,n){$(n).data("product_sku")==t&&$(n).addClass("wcs-selected")}),window.isRox?s.dataAvailabilityService.set():(c.updateModelService.updateSelectedProduct(t),s.dataAvailabilityService.set()),window.isRox){var d=[],u="",p="",f="";window.pdpdata.colors.carousel.forEach(function(e){if("frameColor"===e.type&&e.details.value===n)return u=e.details.frameValueLabel,p=e.details.productPartNumber,f=e.details.availableLensColors,!1});var h=$.map(window.pdpdata.products,function(e){return e});$.each(h,function(e,t){var n=t.catentryId,a=p+"_"+t.productPartNumber,i=window.pdpdata.products[n],r=window.pdpdata.products[$("#pdpFrameCatId").val()].linkDetailsView;if("ROX_LENS"==i.productType){i.imageUrl=$("#wcs-data-image-url").val()+"RayBan/"+a+"_shad_qt?"+$("#wcs-data-image-preset").val();var o="";o=r.split("?")[1].indexOf("&")>0?r.split("?")[1].split("&")[0]:r.split("?")[1];var s=r.split("?")[0]+"?"+o+"&roxLensPartNumber="+window.pdpdata.products[n].partNumber;i.linkDetailsView=s}}),window.selectedProductData.imageUrl=window.pdpdata.products[t].imageUrl,window.selectedProductData.combinedPartNumber=p+"_"+window.pdpdata.products[t].productPartNumber,$("#main-image-container").html(""),$("#main-image-container").append(Rayban.templates["pdp-template"]({p:"left_main",templateData:window.selectedProductData}));var v=0;window.pdpdata.colors.carousel.forEach(function(e){if("lensColor"==e.type&&-1!=i.indexOf(e.details.value)){v+=1,e.details.value==t?e.selected="true":delete e.selected,e.details.frameValueLabel=u;var n=p+"_"+e.details.productPartNumber;e.details.imageUrl=$("#wcs-data-image-url").val()+"RayBan/"+n+"_shad_qt",d.push(e)}});var m=JSON.parse(JSON.stringify(window.pdpdata.colors));m.carousel=d,m.noOfColors=v,m.label=f,r.Core.PubSub.publish(o.events.getPDPEvents().ROX_CAROUSEL_UPDATE,{carouselData:m})}var w=$("#D_PDP_Prod_ColorThumbs .wcs-selected").index(),g=parseInt(w/4);window.pdpCarousel.goToSlide(g);var b={};b.product_sku=t,b.draggable=$("#left_carousel ul.wcs-carousel li.wcs-selected").attr("data-draggable"),r.Core.PubSub.publish(o.events.getPDPEvents().CAROUSEL_CLICK,{selectedProductData:window.selectedProductData,clickedElData:b,prodSku:t}),this.close()}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RightSectionBindEvents=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(45),o=n(26),s=n(46),l=function(){function e(){a(this,e)}return i(e,[{key:"triggerBind",value:function(){$(".wcs-pdp-tabs .wcs-pdp-tab-links a").off("click").on("click",function(e){r.Tabs.tabHandler(e)}),$(".so-pdp-email-me").off("click").on("click",function(e){r.Tabs.openEmailPopUp(e)}),$("#wcs-contact_more").unbind("click").bind("click",function(e){$("html, body").animate({scrollTop:$(document).height()},1e3).promise().then(function(){$("#wcs_contact_us").click()})}),$(".rox-pdp .prescriptionButton label").off("click").on("click",function(e){s.RightMain.changePrescription(e)}),$("#D_PDP_Prod .insurance-price-error-container #contact-us-link").off("click").on("click",function(e){o.Common.showContactUs(e)}),WcsBrowser.isIpad||$(".rox-note-tooltip-icon").off("hover").on("hover",function(e){o.Common.showHideTooltip(e)}),WcsBrowser.isIpad&&($(".rox-note-tooltip-icon").off("click").on("click",function(e){o.Common.showHideTooltip(e)}),$(".rox-prescription-tooltip").off("click").on("click",function(e){e.stopPropagation()}),$("body").on("touchstart",function(e){$(e.srcElement).closest(".rox-lenstype-note-wrapper").hasClass("rox-lenstype-note-wrapper")||$(e.srcElement).closest("rox-prescription-tooltip").hasClass("rox-prescription-tooltip")||$(".rox-prescription-tooltip").is(":visible")&&$(".rox-prescription-tooltip").hide()}))}}]),e}();t.RightSectionBindEvents=l},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.InitializeModules=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(57),s=n(46),l=n(44),c=n(45),d=n(26),u=n(58),p=n(59),f=n(60),h=n(21),v=n(20),m=n(47);t.InitializeModules=function(){function e(t){a(this,e),r.Core.Logger.info("InitializeModules triggered"),this.dataInstance=t,window.selectedProductData=this.dataInstance.selectedProductData,window.pdpModel=this.dataInstance,this.appendFrameAndAvailabilityData(),new p.Image,new u.LeftSection,new l.Carousel,new o.RightHeader,new s.RightMain,new c.Tabs,new f.Footer,new d.Common}return i(e,[{key:"appendFrameAndAvailabilityData",value:function(){window.isRox&&v.updateModelService.updateSelectedProductFrameDetails(),h.dataAvailabilityService.get().done(function(){window.Rayban&&$("#pdp_page").hasClass("rc-pdp")&&(window.Rayban.rcInstance=new m.roxClearDesktop({mainContainerQuery:"#pdp_page"}))})}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RightHeader=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(23);t.RightHeader=function(){function e(){var t=this;a(this,e),r.Core.Logger.info("Right Header module triggered"),r.Core.PubSub.subscribe(o.events.getPDPEvents().DATA_AVAILABILITY_SUCCESS,function(e,n){t.rightHeaderRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_PRESCRIPTION,function(e,n){t.rightHeaderRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().CAROUSEL_CLICK,function(e,n){t.rightHeaderRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_LENS,function(e,n){t.rightHeaderRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().SIZE_CHANGE,function(e,n){t.rightHeaderRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().POLARIZED_CHANGE,function(e,n){t.rightHeaderRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_VIEW_ALL,function(e,n){t.rightHeaderRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().RENDER_PRICE_DETAILS,function(e,n){n&&n.colorsData?t.rightHeaderRenderForRoxLenses(n.colorsData):t.rightHeaderRender()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().SITE_MAIN_BENEFITPRICINGCALL,function(e,t){s.benefitPricingCallService.get()}),window.isRoxInsurance&&s.benefitPricingCallService.get()}return i(e,[{key:"rightHeaderRender",value:function(){var e=window.isRox?{p:"right_header",templateData:window.selectedProductData,colorsData:window.pdpdata.colors}:{p:"right_header",templateData:window.selectedProductData};$("#right_header_price").html(Rayban.templates["pdp-template"](e)),window.isRox&&this.updatePDPPrice(window.selectedProductData,window.pdpModel.currency,window.pdpModel.prefixCurrency),Rayban.AfterPay&&Rayban.AfterPay.initOverlay()}},{key:"rightHeaderRenderForRoxLenses",value:function(e){$("#right_header_price").html(Rayban.templates["pdp-template"]({p:"right_header",templateData:window.selectedProductData,colorsData:e}))}},{key:"updatePDPPrice",value:function(e,t,n){var a=0,i=window.pdpdata.products[e.catentryId].lensPrice;if($(".strikePreviewPriceOuter .strikePreviewPriceInner").hide(),window.pdpdata.products[$("#pdpFrameCatId").val()].hasOwnProperty("framePrice")){""!==$("#pdpFrameCatId").val()&&void 0!==$("#pdpFrameCatId").val()&&(a=window.pdpdata.products[$("#pdpFrameCatId").val()].framePrice);var r=window.pdpdata.products[e.catentryId].unFormattedPrice,o=window.pdpdata.products[$("#pdpFrameCatId").val()].unFormattedPrice,s=(parseFloat(o)+parseFloat(r)).toFixed(2);if(window.pdpdata.products[$("#pdpFrameCatId").val()].hasOwnProperty("unformattedFramePrice")&&window.pdpdata.products[$("#pdpFrameCatId").val()].hasOwnProperty("unformattedFramePromoPrice")){n?$(".strikePreviewPriceOuter .strikePreviewPriceInner").html(t+" "+s):$(".strikePreviewPriceOuter .strikePreviewPriceInner").html(s+" "+t),$(".strikePreviewPriceOuter .strikePreviewPriceInner").show();var l=window.pdpdata.products[$("#pdpFrameCatId").val()].unformattedFramePromoPrice,c=window.pdpdata.products[$("#pdpFrameCatId").val()].unformattedFramePrice;c&&l&&parseFloat(c)>parseFloat(l)&&(s=(s-(parseFloat(c)-parseFloat(l))).toFixed(2))}if(window.pdpdata.products[e.catentryId].hasOwnProperty("unformattedLensPrice")&&window.pdpdata.products[e.catentryId].hasOwnProperty("unformattedLensPromoPrice")){var d=window.pdpdata.products[e.catentryId].unformattedLensPromoPrice,u=window.pdpdata.products[e.catentryId].unformattedLensPrice;u&&d&&parseFloat(u)>parseFloat(d)&&(s=(s-(parseFloat(u)-parseFloat(d))).toFixed(2))}$("#rx-framePrice").html(a),n?$("#right_header_price #wcs-productprice").html(t+" "+s):$("#right_header_price #wcs-productprice").html(s+" "+t)}$("#rx-lensPrice").html(i)}}],[{key:"showInsurancePriceError",value:function(){var e=$("#DESK_PDP_ROX_Insurance_Price_Error").html();""!==e&&void 0!==e&&($(".insurance-price-error-container").html(e),$(".insurance-price-error-container").removeClass("wcs-hide"))}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LeftSection=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(31);t.LeftSection=function(){function e(){var t=this;a(this,e),r.Core.Logger.info("PDP Left section triggered"),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_PRESCRIPTION,function(e,n){t.renderLeftContainer()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().CAROUSEL_CLICK,function(e,n){t.renderLeftContainer()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().UPDATE_LENS,function(e,n){t.renderLeftContainer()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().SIZE_CHANGE,function(e,n){t.renderLeftContainer()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().POLARIZED_CHANGE,function(e,n){t.renderLeftContainer()}),r.Core.PubSub.subscribe(o.events.getPDPEvents().ROX_CAROUSEL_UPDATE,function(e,t){}),this.renderLeftContainer()}return i(e,[{key:"renderLeftContainer",value:function(){this.leftHeaderRender(),this.showHideLeftImageRender(),this.showAccessoryComptMessage()}},{key:"leftHeaderRender",value:function(){$("#left_header").html(Rayban.templates["pdp-template"]({p:"left_header",templateData:window.selectedProductData}))}},{key:"showHideLeftImageRender",value:function(){var e=$("#mainImgSlider_"+window.selectedProductData.catentryId),t=null,n=null;$(".mainSlider").hide(),e.show(),$(".mainSlider").filter(":visible").each(function(e,n){t=$(n).data()}),t&&"gift-cards"!==window.selectedProductData.productType&&($.each(window.mainImageSliderArr,function(e,a){if($(a.selector).attr("id")=="slide_"+t.catentryid)return n=window.mainImageSliderArr[e],window.isSpin=window.spin360Arr[e],!1}),n&&n.redrawSlider()),0===e.find(".bx-wrapper").length?s.ImageService.fetchS7Images():s.ImageService.zoomRender()}},{key:"showAccessoryComptMessage",value:function(){var e=this;$("#comptble-prdcts").val()&&""!==$("#comptble-prdcts").val()&&($(".productModelId").length>0?this.doAccessoryComptMessage():setTimeout(function(){$(".productModelId").length>0?e.doAccessoryComptMessage():setTimeout(function(){e.doAccessoryComptMessage()},1200)},100))}},{key:"doAccessoryComptMessage",value:function(){for(var e=$("#comptble-prdcts").val(),t=$(".productModelId"),n=$(".prodDescription"),a=$(".productType"),i=$(".parentModelNo").val(),r=!1,o="",s="",l="",c=0;c<t.length;c++){var d=t[c].value,u=n[c].value;if("CASE"!=a[c].value&&"gwp"!=a[c].value.toLowerCase()&&"kit"!=a[c].value.toLowerCase()){var p=$(t[c]).parent().find(".casePartnumber")?$(t[c]).parent().find(".casePartnumber").val():"",f=""!==u?u:d;""!==i&&i==p&&!0!==r&&(r=!0,l=f),-1!=e.indexOf(d)?""===o?o=f:o+=", "+f:s+=""===s?f:", "+f}}""!==o&&(o=o.slice(0,o.lastIndexOf(","))+o.slice(o.lastIndexOf(",")).replace(","," "+$("#andText").val()),$(".accs-compt").text($("#compatibleTextMsg").val()+" "+o+" "+$("#cartText").val()),$(".accs-compt").slideDown("slow")),""!==s&&(s=s.slice(0,s.lastIndexOf(","))+""+s.slice(s.lastIndexOf(",")).replace(","," "+$("#andText").val()),$(".accs-noncompt").text($("#notCompatibleTextMsg").val()+" "+s+" "+$("#cartText").val()),$(".accs-noncompt").slideDown("slow")),""!==l&&($(".accs-exist-msg").html($("#pleaseNoteText").val()+" <span class='case-exist'>"+l+"</span> "+$("#alreadyInCartText").val()+"."),$(".accs-exist-msg").slideDown("slow"))}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Image=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5);t.Image=function(){function e(){var t=this;a(this,e),r.Core.PubSub.subscribe(o.events.getPDPEvents().ROX_CAROUSEL_UPDATE,function(e,n){t.renderMainImage()}),this.renderMainImage()}return i(e,[{key:"renderMainImage",value:function(){var e=$.map(window.pdpdata.products,function(e){return e}),t=$("#pdpFrameCatId").val(),n="";window.isRox?($.each(window.pdpdata.colors.carousel,function(e,a){if("frameColor"==a.type&&a.details.value==t)return n=a.details.productPartNumber,!1}),e.forEach(function(e){if($("#main-image-container").children().eq(0).attr("id").split("_")[1]!==e.catentryId){var t=e.productPartNumber;"ROX_LENS"==e.productType&&(e.combinedPartNumber=n+"_"+t,$("#main-image-container").append(Rayban.templates["pdp-template"]({p:"left_main",templateData:e})),$("#mainImgSlider_"+e.catentryId).hide())}})):e.forEach(function(e){$("#main-image-container").children().eq(0).attr("id").split("_")[1]!==e.catentryId&&($("#main-image-container").append(Rayban.templates["pdp-template"]({p:"left_main",templateData:e})),$("#mainImgSlider_"+e.catentryId).hide())})}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),s=n(5);t.Footer=function(){function e(){var t=this;a(this,e),o.Core.Logger.info("Footer module triggered"),o.Core.PubSub.subscribe(s.events.getPDPEvents().SIZE_CHANGE,function(e,n){t.updateOtherDetails(n.value)}),o.Core.PubSub.subscribe(s.events.getPDPEvents().POLARIZED_CHANGE,function(e,n){setTimeout(function(){var e=$("#D_PDP_Prod_PolarSelection a.dd-option.dd-option-selected .dd-option-draggable").val();"undefined"!==(void 0===e?"undefined":i(e))&&""!==e&&t.changeDraggableLens(e)},100),t.updateOtherDetails(n.value)}),o.Core.PubSub.subscribe(s.events.getPDPEvents().CAROUSEL_CLICK,function(e,n){t.changeDraggableLens(n.clickedElData.draggable),t.updateOtherDetails(n.clickedElData.product_sku)}),o.Core.PubSub.subscribe(s.events.getPDPEvents().UPDATE_LENS,function(e,n){t.updateOtherDetails(n.clickedElData.product_sku)})}return r(e,[{key:"changeDraggableLens",value:function(e){$("#D_PDP_Prod_ColorThumbs").addClass("changing"),$("div#rb-scroller-drag-lens").find("li[data-lens-value="+e+"]").click(),$("div#rb-scroller-drag-lens").find("li[data-lens-value="+e+"_Static]").click(),$("#D_PDP_Prod_ColorThumbs").removeClass("changing")}},{key:"updateOtherDetails",value:function(e){this.promotionSection(e),$("#D_PDP_RatingReviews").length>0&&this.updateRatingsReviews(e),this.updateCrossSell(e)}},{key:"updateRatingsReviews",value:function(e){var t={};t.storeId=$("#storeId").val(),t.catalogId=$("#catalogId").val(),t.langId=$("#langId").val(),t.productId=e,$("#isRoxEnabled").length>0&&"true"===$("#isRoxEnabled").val()?t.upcVal=window.pdpdata.products[$("#pdpFrameCatId").val()].partNumber:t.upcVal=window.pdpdata.products[e].partNumber,Number.isNaN(t.productId)?o.Core.Logger.warn("RatingAndReviews will not be fetched as product Id is not valid : "+t.productId):$.ajax({type:"GET",url:"RatingAndReviewsSectionView",dataType:"html",data:t,cache:!0,async:!0,success:function(e){$("#ratingsSection").html(""),$("#ratingsSection").html(e)}})}},{key:"updateCrossSell",value:function(e){var t={};t.storeId=$("#storeId").val(),t.catalogId=$("#catalogId").val(),t.langId=$("#langId").val(),t.catentryID=e,$.ajax({type:"GET",url:"PDPCrossSellView",data:t,cache:!0,success:function(e){$("#wcs-PDP-crossSell").html(""),$("#wcs-PDP-crossSell").html(e)}})}},{key:"promotionSection",value:function(e){var t={};t.catEntryId=e,$.ajax({type:"GET",url:"GWPPromotionDetailsView",data:t,success:function(e){$("#wcs-gwp-pdp").html(""),$("#wcs-gwp-pdp").html(e)}})}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.roxClear=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),s=n(5),l=n(21),c=n(23),d=n(62),u=n(63),p=n(47),f=n(26);t.roxClear=function(){function e(t){var n=this;a(this,e);this.version="1.0",this.lensesDetailsUrl=null,this.lensesDetailsData=null,this.mainContainer=null,this.sku=null,this.productDetails=null,this.frameDetails=null,this.selectedLensesId=null,this.overlayTrigger=null,this.overlay=null,this.lensesDetails=null,this.selectLensesOverlayInstance=null,this.settings={mainContainerQuery:"#pdp_page",mainContainerClass:"rc-pdp-enabled",selectedLensesClass:"rc-lenses-selected",templateOverlayName:"rc_lenses_overlay",lensesDetailsQuery:".rc-change-lenses",deliveryMessageQuery:".wcs-delivery-date .wcs-ordernow",isMobile:!1,storageKey:"rb.roxClear",isAntiBlueStorageKey:"isAntiBlue"},t&&(this.settings=window.Rayban.utilities.extend(this.settings,t)),this.init(),this.render(),o.Core.PubSub.subscribe(s.events.getPDPEvents().PRESCRIPTION_LENS_SELECTED,function(e,t){n.selectLenses(t.value,!1)}),o.Core.PubSub.subscribe(s.events.getPDPEvents().CAROUSEL_CLICK,function(e,t){n.updateViews()}),o.Core.PubSub.subscribe(s.events.getPDPEvents().SIZE_CHANGE,function(e,t){n.updateViews()}),this.updateViews()}return r(e,[{key:"init",value:function(){this.initializePDPElements(),this.initializeData(),this.bind()}},{key:"initRoxClear",value:function(e){var t=e.mainContainerQuery?e.mainContainerQuery:this.settings.mainContainerQuery;if($(t).hasClass("rc-pdp")){var n=new RoxClear(e);return n.render(),n}}},{key:"initializePDPElements",value:function(){this.mainContainer=document.querySelector(this.settings.mainContainerQuery),this.lensesDetailsDiv=this.mainContainer.querySelector(this.settings.lensesDetailsQuery),this.deliveryMessageDiv=this.mainContainer.querySelector(this.settings.deliveryMessageQuery),this.lensesDetailsUrl=this.mainContainer.getAttribute("data-rc-lens-service-url"),this.catentryInput=document.getElementById("itemCatentryId")}},{key:"initializeData",value:function(e){this.sku=e||this.getCurrentSku(),this.productDetails=this.getProductDetailsBySku(this.sku),this.lensGuide=window.pdpdata?window.pdpdata.lensGuide:{},this.productDetails.roxFrameCatentryId&&(this.frameDetails=this.getProductDetailsBySku(this.productDetails.roxFrameCatentryId),this.frameDetails.hasOwnProperty("availabilityData")||l.dataAvailabilityService.setRoxOpticsData(this.frameDetails.uniqueID))}},{key:"bind",value:function(){}},{key:"checkAvailability",value:function(e){return e.availabilityData&&"Y"===e.availabilityData.addToBagFlag&&e.unFormattedPrice&&"true"===e.buyable}},{key:"isAvailable",value:function(){var e=this.productDetails,t=this.frameDetails,n=!1;return e&&"true"===e.roxable&&t&&(n=this.checkAvailability(e)&&this.checkAvailability(t)),n}},{key:"disable",value:function(){f.Common.updatePDPType(!1),this.mainContainer.classList.remove(this.settings.mainContainerClass),this.mainContainer.classList.remove(this.settings.selectedLensesClass),o.Core.Logger.debug("Rox clear disabled.")}},{key:"enable",value:function(){var e=this;this.checkLensesSelected().done(function(){e.mainContainer.classList.add(e.settings.mainContainerClass),o.Core.Logger.debug("Rox clear enabled.")})}},{key:"checkLensesSelected",value:function(){var e=this,t=this.getSavedLenses();return this.getLensesDetails().done(function(n){var a=o.Core.Utilities.getUrlParameter("roxLensPartNumber");if(a)for(var i in n.products)n.products.hasOwnProperty(i)&&n.products[i].partNumber===a&&e.selectLenses(i,!0);if(t&&t.length&&n.lensOptions&&n.lensOptions.length){var r=t[1];n.lensOptions.forEach(function(t){window.sessionStorage.getItem(Rayban.rcInstance.settings.isAntiBlueStorageKey)?e.selectLenses(r,!0):t.products&&-1!==t.products.indexOf(r)&&e.selectLenses(r,!0)}),"true"===window.Rayban.utilities.readCookie("EyeMedLogin")&&c.benefitPricingCallService.get()}})}},{key:"getCurrentSku",value:function(){var e=void 0;if(window.selectedProductData&&window.selectedProductData.catentryId)return e=window.selectedProductData.catentryId,o.Core.Logger.debug("RC - getCurrentSku: "+e),e;throw Error("Sku not found")}},{key:"getLensesDetailsBySku",value:function(e){var t=null,n="",a=this.lensesDetailsData&&this.lensesDetailsData.data?this.lensesDetailsData.data:null,i=void 0;if(e&&a&&a.products&&a.products[e]){for(var r=0;r<a.lensOptions.length;r+=1)i=a.lensOptions[r],i.uniqueID===a.products[e].prescriptionType&&(n=i.label);t={lensDescription:a.products[e].lensDescription,lensTreatment:a.products[e].lensTreatment,offerPrice:a.products[e].offerPrice,lensPrice:a.products[e].lensPrice,unformattedLensPromoPrice:a.products[e].unformattedLensPromoPrice,prescriptionType:a.products[e].prescriptionType,prescriptionTypeTitle:n,unFormattedPrice:a.products[e].unFormattedPrice,uniqueID:a.products[e].uniqueID,mandatoryServicesList:a.products[e].mandatoryServicesList,partNumber:a.products[e].partNumber,overlayTooltipBodyFmt:a.products[e].overlayTooltipBodyFmt}}return t}},{key:"getProductDetailsBySku",value:function(e){var t=null;if(!window.pdpdata||!window.pdpdata.products)throw Error("pdpdata is undefined");if(!(t=window.pdpdata.products[e]))throw Error(e+" not found in pdpdata");return t}},{key:"clear",value:function(){this.clearLensesId(),this.resetSelectedLenses(),this.updateCSRInfo(this.productDetails),this.updateViews()}},{key:"getSavedLenses",value:function(){var e=void 0;try{var t=window.sessionStorage.getItem(this.settings.storageKey);t&&(e=t.split("|"))}catch(e){o.Core.Logger.debug(e)}finally{return e}}},{key:"saveLensesId",value:function(e,t){this.selectedLensesId=t;try{window.sessionStorage.setItem(this.settings.storageKey,e+"|"+t)}catch(e){o.Core.Logger.debug(e)}}},{key:"clearLensesId",value:function(){this.selectedLensesId=null,this.selectedAntiBluelenseId=null;var e=o.Core.Utilities.removeURLParam("roxLensPartNumber",window.location.href);window.history.pushState(null,null,e);try{window.sessionStorage.removeItem(this.settings.storageKey),window.sessionStorage.removeItem(Rayban.rcInstance.settings.isAntiBlueStorageKey)}catch(e){o.Core.Logger.debug(e)}}},{key:"selectLenses",value:function(e,t){e&&(this.saveLensesId(this.productDetails?this.productDetails.uniqueID:null,e),o.Core.Logger.debug("RC - selected lenses: "+e),this.onSelectLenses(),this.changeLensesAnalytics("prescription")),t||this.closeLensOverlay()}},{key:"changeLensesAnalytics",value:function(e){var t={},n=this.getPrices(e),a="standard"===e?this.productDetails:this.frameDetails,i=a.partNumber;if("standard"!==e){var r=this.getSelectedLensesData();i=i.replace("RX_","RX_P")+"_L"+r.partNumber.replace(new RegExp("_","g"),"-")}t[i]={Category:"OPTICS",Units:1,Price:n.total,Status:"Available",DataSource:a},u.roxClearAnalytics.RCChangeLenses(t)}},{key:"resetSelectedLenses",value:function(e){this.mainContainer.classList.remove(this.settings.selectedLensesClass),this.setCatEntryInput(this.productDetails.uniqueID),this.lensesDetailsDiv&&(this.lensesDetailsDiv.innerHTML=this.productDetails.lensDescription),this.deliveryMessageDiv&&(this.deliveryMessageDiv.innerHTML=this.productDetails.availabilityData.availabilityMessage),this.updatePrices("standard"),e||this.changeLensesAnalytics("standard"),f.Common.updatePDPType(!1),o.Core.PubSub.publish(s.events.getPDPEvents().PRESCRIPTION_LENS_DATA)}},{key:"setCatEntryInput",value:function(e){this.catentryInput&&(this.catentryInput.value=e)}},{key:"updateCSRInfo",value:function(e){}},{key:"onSelectLenses",value:function(){var e=this.getSelectedLensesData();"true"===window.Rayban.utilities.readCookie("EyeMedLogin")?c.benefitPricingCallService.get():this.updatePrices("prescription"),this.setCatEntryInput(this.frameDetails.uniqueID),this.mainContainer.querySelector(".rc-info-lenses-option .value").innerHTML=e.prescriptionTypeTitle,this.mainContainer.querySelector(".rc-info-lenses-material .value").innerHTML=e.lensTreatment,this.lensesDetailsDiv&&(this.lensesDetailsDiv.innerHTML=e.lensTreatment),this.deliveryMessageDiv&&(this.deliveryMessageDiv.innerHTML=this.frameDetails.availabilityData.availabilityMessage),this.mainContainer.classList.add(this.settings.selectedLensesClass),f.Common.updatePDPType(!0),this.updateCSRInfo(this.frameDetails),window.opticsData={frameCatId:this.frameDetails.uniqueID,lensCatId:e.uniqueID,mandatoryServices:e.mandatoryServicesList},o.Core.PubSub.publish(s.events.getPDPEvents().PRESCRIPTION_LENS_DATA)}},{key:"getPrices",value:function(e,t){var n="standard"===e?this.productDetails:this.frameDetails,a={currency:"",total:0,totalStr:"0",totalOrigStr:"0",framePrice:0,framePriceStr:0,frameOrigPriceStr:0,lensPrice:0,lensPriceStr:"0",lensOrigPriceStr:"0",lensLabel:"Lenses",frameLabel:"Frame"};if("standard"===e)a.total=n.unFormattedPrice,a.totalStr=n.offerPrice,a.currency=a.totalStr.split(" ")[0],a.listPrice=a.currency+parseFloat(n.unFormattedPrice).toLocaleString($("html").attr("lang"),{maximumFractionDigits:2,minimumFractionDigits:2})!==n.offerPrice.replace(/\s/g,"")?a.currency+" "+a.total:null;else if("prescription"===e){var i=this.getSelectedLensesData();a.framePriceStr=n.framePrice,a.framePrice=n.unFormattedPrice,a.frameOfferPrice=n.unformattedFramePromoPrice||n.unFormattedPrice,a.currency=a.framePriceStr.split(" ")[0],a.lensPriceStr=i.lensPrice,a.lensPrice=i.unFormattedPrice,a.lensOfferPrice=i.unformattedLensPromoPrice||i.unFormattedPrice,a.lensLabel=n.lensLabel.substr(0,1).toUpperCase()+n.lensLabel.substr(1).toLowerCase(),a.frameLabel=n.mobileCarouselFrameLabel,(n.unformattedFramePromoPrice||i.unformattedLensPromoPrice)&&(a.listPrice=a.currency+" "+(Number(a.framePrice)+Number(a.lensPrice)).toFixed(2)),a.total=(parseFloat(a.frameOfferPrice)+parseFloat(a.lensOfferPrice)).toFixed(2),a.totalStr=a.currency+" "+a.total}else"insurance"===e&&(a.frameDiscount=t.frameDiscount,a.frameFinalPrice=t.frameFinalPrice,a.frameOriginalPrice=t.frameOriginalPrice,a.lensDiscount=t.lensDiscount,a.lensFinalPrice=t.lensFinalPrice,a.lensOriginalPrice=t.lensOriginalPrice,a.totalPrice=t.totalFinalPrice,a.totalOriginalPrice=t.totalOriginalPrice);return a}},{key:"updatePrices",value:function(e,t){var n=this.getPrices(e,t);p.roxClearDesktop.reloadView({dataType:e,data:n}),this.initializePDPElements()}},{key:"getDefaultLensesData",value:function(){var e=this.lensesDetailsData&&this.lensesDetailsData.data?this.lensesDetailsData.data:null,t=e&&e.lensOptions&&e.lensOptions.length?e.lensOptions[0]:null,n=t&&t.products&&t.products.length?t.products[0]:null;return this.getLensesDetailsBySku(n)}},{key:"getSelectedLensesData",value:function(){var e=null;return this.selectedAntiBluelenseId?e=this.getLensesDetailsBySku(this.selectedAntiBluelenseId):this.selectedLensesId&&(e=this.getLensesDetailsBySku(this.selectedLensesId)),e}},{key:"closeLensOverlay",value:function(){this.overlay&&this.overlay.close()}},{key:"createSelectLensesOverlay",value:function(e,t){return new d.selectLensesOverlay(e,t)}},{key:"openLensOverlay",value:function(e){var t=this;this.getLensesDetails().done(function(n){var a=window.Rayban.templates[t.settings.templateOverlayName](n);if(t.overlay)t.overlay.setContent(a,function(){t.selectLensesOverlayInstance.refresh()});else{var i=new window.Rayban.OverlayManager;t.overlay=i.setupOverlay(e,!1),t.overlayTrigger=e,t.overlay.setContent(a,function(){t.selectLensesOverlayInstance=t.createSelectLensesOverlay(t.overlay.innerDiv,n.products)})}if(t.overlay.open(),window.sessionStorage.getItem(t.settings.storageKey)&&n.selected)if(Rayban.isRCChangeLens=!0,window.sessionStorage.getItem(Rayban.rcInstance.settings.isAntiBlueStorageKey)||t.selectedAntiBluelenseId){var r=t.selectedAntiBluelenseId?t.selectedAntiBluelenseId:n.selected.uniqueID;$("#rc_antiblue_check_"+r).closest(".rc-popup-lenses-info").prev().find("input[name='rc-popup-leneses-radio']").attr("checked","checked"),$("#rc_antiblue_check_"+r).closest(".lenses-group").prev().click(),$("#rc_antiblue_check_"+r).closest(".rc-popup-lenses-wrapper").find(".rc-popup-lenses-price").text(n.selected.offerPrice)}else $(".rc-popup-lenses-name").find("input[type='radio']:checked").closest(".lenses-group").prev().click()})}},{key:"formatLensesDetails",value:function(){var e=this.lensesDetailsData.data,t={},n=this.frameDetails.roxLensCatentryIdsList,a=this.getSelectedLensesData(),i=void 0,r=void 0,o=void 0;if(n&&n.length)for(i=0;i<n.length;i+=1)if(r=n[i],o=e.products[r]?e.products[r].prescriptionType:null){var s=t[o];s&&s.length?s.push(r):s=[r],t[o]=s}if(e.lensOptions&&e.lensOptions.length)for(var l=0;l<e.lensOptions.length;l+=1){r=e.lensOptions[l],o=r.uniqueID,void 0!==t[o]&&(r.products=t[o]);for(var c=0;c<r.lenstypes.length;c++)for(var d=r.lenstypes[c],u=0;u<d.products.length;u++){var p=d.products[u];-1===n.indexOf(p)&&d.products.splice(u,1)}}for(var f in this.lensGuide)this.lensGuide.hasOwnProperty(f)&&e.products[f]&&(e.products[f].lensDescriptionFmt=window.Rayban.utilities.interpolateString(e.products[f].lensDescription,this.lensGuide[f]),e.products[f].overlayTooltipBodyFmt=window.Rayban.utilities.interpolateString(e.labels.overlayTooltipBody,this.lensGuide[f]));a||(a=this.getDefaultLensesData(e.lensOptions)),e.selected=a,e.options={lensGuide:this.lensGuide,applyBtnId:this.settings.isMobile?"M_Pdp_Prod_ApplyPrescription":"D_Pdp_Prod_ApplyPrescription",isMobile:this.settings.isMobile}}},{key:"toUpdate",value:function(e){var t=!0;try{t=Date.now()-e>36e5}catch(e){o.Core.Logger.debug(e),t=!0}finally{return t}}},{key:"getLensesDetails",value:function(){var e=this;return!this.lensesDetailsData||this.toUpdate(this.lensesDetailsData.lastUpdate)?$.ajax({url:this.lensesDetailsUrl,dataType:"json"}).done(function(t){return Object.keys(t.products).forEach(function(e,n){t.products[e].hasOwnProperty("lensOptions")&&Object.keys(t.products[e].lensOptions).forEach(function(n,a){t.products[e].lensOptions[a].data=t.products[t.products[e].lensOptions[a].uniqueId]})}),e.lensesDetailsData={data:t,lastUpdate:Date.now()},e.formatLensesDetails(),e.lensesDetailsData.data}).fail(function(e,t){u.roxClearAnalytics.RCServerError(t)}):(this.formatLensesDetails(),$.Deferred().resolve(this.lensesDetailsData.data))}},{key:"getCurentItemQueryString",value:function(e,t){if(!this.selectedLensesId)return e;var n=e.split("?"),a=2===n.length?n[0]:"",i=2===n.length?n[1]:n[0],r={},o=[],s=i.split("&");if(s&&s.length)for(var l=0;l<s.length;l+=1){var c=s[l].split("=");r[c[0]]=decodeURIComponent(c[1])}r=this.getCurrentItemParams(r,t);for(var d in r)r.hasOwnProperty(d)&&o.push(d+"="+decodeURIComponent(r[d]));return a&&(e=a+"?"),e+=o.join("&")}},{key:"getCurrentItemParams",value:function(e,t){if("object"!==(void 0===e?"undefined":i(e)))throw new Error("params sholud be an object");if(this.selectedLensesId){var n=this.getSelectedLensesData(),a=[this.productDetails.roxFrameCatentryId,n.uniqueID];if(delete e.catEntryId,delete e.quantity,e.catEntryId_1=this.productDetails.roxFrameCatentryId,e.catEntryId_2=n.uniqueID,t||(e.quantity_1=1,e.quantity_2=1),n.mandatoryServicesList&&n.mandatoryServicesList.length)for(var r=void 0,o=n.mandatoryServicesList,s=0;s<o.length;s+=1)r=o[s],e["catEntryId_"+(s+3)]=r,t||(e["quantity_"+(s+3)]=1),a.push(r);e.roxSet_1=a.join("_"),t&&(e.configurationId_1=e.roxSet_1)}return e}},{key:"updateViews",value:function(e){o.Core.Logger.debug("RC - onChange: "+e),this.resetSelectedLenses(!0),this.initializePDPElements(),this.initializeData(e),this.render()}},{key:"render",value:function(){this.isAvailable()?this.enable():this.disable()}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.selectLensesOverlay=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5);t.selectLensesOverlay=function(){function e(t,n){a(this,e),this.overlayContentDiv=t,this.lensesData=n,this.bind()}return i(e,[{key:"bind",value:function(){var e=this,t=this.overlayContentDiv.querySelector(".rc-popup-apply .rb-tooltip-wrapper a"),n=this.overlayContentDiv.querySelectorAll(".rc-popup-lenses-container .rb-radio label"),a=this.overlayContentDiv.querySelector(".lenses-details-content"),i=this.overlayContentDiv.querySelectorAll(".lens-types"),r=(this.overlayContentDiv.querySelectorAll(".grey-info-icon"),this.overlayContentDiv.querySelectorAll(".rc-tooltip-more-info")),o=this.overlayContentDiv.querySelector(".rc-popup-back");if($(".rb-radio label").RBRadio(),window.Rayban.RBTabs(this.overlayContentDiv,{tabRetriever:function(e){var t=e.getAttribute("rel")||e.parentNode.getAttribute("rel");if(t)return document.getElementById(t)},onShowTab:function(e){var t=Rayban.rcInstance,n=e.querySelectorAll("input[type=radio]");t&&n.length&&!t.selectedLensesId&&(n[0].checked=!0)}}),t&&window.Rayban.RBTooltip(t),this.getApplyButton().addEventListener("click",function(t){var n=e.overlayContentDiv.querySelector("input[name=rc-popup-leneses-radio]:checked"),a=null;if($(".lenses-group:visible").find("input[name='rc_antiblue_checkbox']:checked").length){var i=$(".lenses-group:visible input[type='radio']:checked").closest(".rc-popup-lenses-wrapper").find("input[name='rc_antiblue_checkbox']");$(i).is(":checked")?(window.sessionStorage.setItem(Rayban.rcInstance.settings.isAntiBlueStorageKey,"true"),a=$(i).attr("value"),Rayban.rcInstance.selectedAntiBluelenseId=$(i).attr("value")):(Rayban.rcInstance.selectedAntiBluelenseId=null,window.sessionStorage.removeItem(Rayban.rcInstance.settings.isAntiBlueStorageKey))}else Rayban.rcInstance.selectedAntiBluelenseId=null,window.sessionStorage.removeItem(Rayban.rcInstance.settings.isAntiBlueStorageKey);e.onApply(a||(n?n.value:null)),t.preventDefault()}),a&&n&&n.length)for(var s=0;s<n.length;s+=1)n[s].addEventListener("click",function(t){a.innerHTML=e.lensesData[t.currentTarget.querySelector("input[type=radio]").value].overlayTooltipBodyFmt});$(i).off("click").on("click",function(t){e.showLensOptions(t)}),$(o).off("click").on("click",function(t){e.showLensTypes(t)}),$(r).off("click").on("click",function(e){Rayban.rcInstance.showMoreInfo(e)}),$(".rc-moreInfo-container span, .more-info-overlay").off("click").on("click",function(e){Rayban.rcInstance.closeMoreInfoOverlay(e)}),$(".lens-info-dropdown").off("click").on("click",function(t){e.showHidelensesInfo(t)}),$(".anti-blue-section input[type='checkbox']").off("click").on("click",function(t){e.resetChangePopupLensPrice(),$(".lenses-group input[name='rc_antiblue_checkbox']").not(t.currentTarget).prop("checked",!1),1==$(t.currentTarget).prop("checked")&&0==$(t.currentTarget).closest(".rc-popup-lenses-wrapper").find("input[type='radio']").prop("checked")&&$(t.currentTarget).closest(".rc-popup-lenses-wrapper").find("input[type='radio']").prop("checked",!0),e.changePopupLensPrice(t)}),$(".lenses-group input[type='radio']").off("click").on("click",function(t){if(t.currentTarget.value&&$(t.currentTarget).closest(".rc-popup-lenses-wrapper").find("input[name='rc_antiblue_checkbox']").is(":checked"))return!1;e.resetChangePopupLensPrice(),$(".lenses-group input[name='rc_antiblue_checkbox']").prop("checked",!1),e.changePopupLensPrice(t)})}},{key:"showHidelensesInfo",value:function(e){$(e.currentTarget).hasClass("active")||$(".lens-info-dropdown").removeClass("active").closest(".rc-popup-lenses-info").find(".lens-info").slideUp("slow"),$(e.currentTarget).hasClass("active")?$(e.currentTarget).closest(".rc-popup-lenses-info").find(".lens-info").slideUp("slow"):$(e.currentTarget).closest(".rc-popup-lenses-info").find(".lens-info").slideDown("slow"),$(e.currentTarget).toggleClass("active")}},{key:"resetChangePopupLensPrice",value:function(){if($(".lenses-group input[name='rc_antiblue_checkbox']:checked").length){var e=$(".lenses-group input[name='rc_antiblue_checkbox']:checked"),t=$(e).closest(".rc-popup-lenses-wrapper").find("input[type='radio']").val(),n=Rayban.rcInstance.lensesDetailsData.data.products[t].offerPrice;$(e).closest(".rc-popup-lenses-wrapper").find(".rc-popup-lenses-price").text(n)}}},{key:"changePopupLensPrice",value:function(e){var t=void 0,n=Rayban.rcInstance.lensesDetailsData.data.products,a=$(e.currentTarget).closest(".rc-popup-lenses-wrapper").find(".rb-radio input[type='radio']").attr("value");$(e.currentTarget).is(":checked")?(t=$(e.currentTarget).attr("value"),$(e.currentTarget).closest(".rc-popup-lenses-wrapper").find(".rc-popup-lenses-price").text(n[t].offerPrice)):$(e.currentTarget).closest(".rc-popup-lenses-wrapper").find(".rc-popup-lenses-price").text(n[a].offerPrice)}},{key:"getApplyButton",value:function(){return this.overlayContentDiv.querySelector(".rc-popup-apply-bt")}},{key:"onApply",value:function(e){r.Core.PubSub.publish(o.events.getPDPEvents().PRESCRIPTION_LENS_SELECTED,{value:e})}},{key:"refresh",value:function(){this.bind()}},{key:"showLensOptions",value:function(e){var t=$(e.currentTarget).closest(".lens-types").attr("data-lenstype");$(e.currentTarget).closest(".rc-popup-lenses-options").find(".lenses-group").removeClass("wcs-show"),$(e.currentTarget).closest(".rc-popup-lenses-options").find("."+t).addClass("wcs-show"),$(e.currentTarget).closest(".rc-popup-lenses-options").find(".lens-types").addClass("wcs-hide"),Rayban.isRCChangeLens?Rayban.isRCChangeLens=!1:$(".lenses-group.wcs-show .rc-popup-lenses-wrapper:first-child .rb-radio label").click(),$(".rc-popup-apply-bt").removeClass("wcs-hide"),$(".lens-options-radio-wrapper").addClass("wcs-hide"),$(".rc-popup-lenses-breadcrumb").find("span:first-child").addClass("selected");var n=$(".rc-popup-lenses-breadcrumb").find("span:nth-child(3)");$(".rc-popup-back").removeClass("wcs-hide"),$(n).removeClass("deactive"),$(".rc-popup-lenses-label span").text($(n).text())}},{key:"showLensTypes",value:function(e){$(".rc-popup-lenses-options .lenses-group").removeClass("wcs-show"),$(".rc-popup-lenses-options .lens-types").removeClass("wcs-hide"),$(".rc-popup-apply-bt").addClass("wcs-hide"),$(".lens-options-radio-wrapper").removeClass("wcs-hide"),$(".rc-popup-back").addClass("wcs-hide");var t=$(".rc-popup-lenses-breadcrumb").find("span:first-child");$(t).removeClass("selected"),$(".rc-popup-lenses-label span").text($(t).text()),$(".rc-popup-lenses-breadcrumb").find("span:nth-child(3)").addClass("deactive")}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.roxClearAnalytics=function(){function e(){a(this,e)}return i(e,null,[{key:"RCChangeLenses",value:function(e){tealium_data2track.push({id:"WCS-X-PDP-Loading-Ready",Products:e})}},{key:"RCServerError",value:function(e){tealium_data2track.push({id:"X-X-X-X-Error",Error_Source:"Server",Error_Message:e,Error_Code:"WCS OpticsPDP Prescriptions Lenses Loading"})}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.imageCompare=function(){function e(t){a(this,e),this.root=t,this.rightImageContainer=this.root.find("div").eq(0).addClass("rb-image-compare-right"),this.rightImage=this.rightImageContainer.find("img"),this.leftImageContainer=this.root.find("div").not(this.rightImageContainer).addClass("rb-image-compare-left"),this.leftImage=this.leftImageContainer.find("img"),this.totalWidth=this.rightImageContainer.get(0).offsetWidth,this.position=this.totalWidth/100*67,this.setupEventNames(),this.boundMoveHandler=$.proxy(this.onTouchMove,this),this.boundEndHandler=$.proxy(this.onTouchEnd,this),this.dragHandle=$("<span/>").addClass("rb-image-compare-handle").prependTo(this.root).on(this.pointerDownEventName,$.proxy(this.onTouchStart,this)),this.vLineTop=$("<span/>").addClass("rb-image-compare-handle-vline-top").prependTo(this.dragHandle).on(this.pointerDownEventName,$.proxy(this.onTouchStart,this)),this.dragButton=$("<span/>").addClass("rb-image-compare-handle-button").appendTo(this.dragHandle).on(this.pointerDownEventName,$.proxy(this.onTouchStart,this)),this.vLineBottom=$("<span/>").addClass("rb-image-compare-handle-vline-bottom").appendTo(this.dragHandle).on(this.pointerDownEventName,$.proxy(this.onTouchStart,this)),this.onResize(),this.init()}return i(e,[{key:"init",value:function(){var e=this;void 0===window.rb&&(window.rb={}),$("#showDraggableLens").val(),this.s7jsonResponseDiverted($(".wcs-draggable-lenses-selection").find("option:selected").data("lens-value")),$("a.wcs-view-fullscreen").on("click",function(){$("#wcs_draggable_lenses_full_view").removeClass("wcs-draggable-lenses-full-view-hide")}),$("#wcs-pdp-carousal").find(".wcs-h-slider > li").on("click",function(e){var t=$(e.currentTarget).data("select-value");$(".wcs-draggable-lenses-selection").eq(0).val(t).trigger("change")}),setTimeout(function(){$(".wcs-lenses-loading-indicator").hide()},1e3),window.isRox&&this.renderRoxDraggableLensesDropdown(),$(".wcs-draggable-lenses-selection").on("change",function(t){$(".wcs-lenses-loading-indicator").show();var n=$(t.currentTarget).find("option:selected").data("lens-value");if(e.s7jsonResponseDiverted(n),$(".wcs-lens-title").text($(t.currentTarget).find("option:selected").text()),$(".wcs-draggable-lenses-description").addClass("wcs-hide"),$(".wcs-draggable-lenses-description[data-select-value='"+$(t.currentTarget).val()+"']").removeClass("wcs-hide"),setTimeout(function(){$(".wcs-lenses-loading-indicator").hide()},1e3),t.bubbles){var a=$(t.currentTarget).val();$("li[data-select-value="+a+"]").eq(0).click();var i=$("#wcs-pdp-carousal ul li.wcs-selected").index(),r=i/6;r=parseInt(r),window.pdpCarousel.goToSlide(r)}})}},{key:"setLeftImageUrl",value:function(e){this.leftImage.attr("src",e)}},{key:"setRightImageUrl",value:function(e){this.rightImage.attr("src",e)}},{key:"setupEventNames",value:function(){var e="mousedown",t="mousemove",n="mouseup";"ontouchstart"in window&&(e="touchstart",t="touchmove",n="touchend touchcancel"),navigator.msPointerEnabled&&(e="MSPointerDown",t="MSPointerMove",n="MSPointerUp"),this.pointerDownEventName=e,this.pointerMoveEventName=t,this.pointerUpEventName=n}},{key:"onTouchStart",value:function(e){var t=e.originalEvent;return e.preventDefault(),e.stopPropagation(),this._startX=t.pageX||e.pageX||t.changedTouches[0].pageX,this._latestPosition=this.position,$("html").css("-ms-touch-action","none").on(this.pointerMoveEventName,this.boundMoveHandler),$(document).on(this.pointerUpEventName,this.boundEndHandler),!1}},{key:"onTouchMove",value:function(e){var t=e.originalEvent;if(!t.pageX&&!e.pageX&&!t.changedTouches)return!0;e.preventDefault(),e.stopPropagation();var n=t.pageX||e.pageX||t.changedTouches[0].pageX,a=n-this._startX,i=this._latestPosition+a;return i=i<0?0:i>this.totalWidth?this.totalWidth:i,this.position=i,this.dragHandle.css("left",i),this.leftImageContainer.css("width",i),!1}},{key:"onTouchEnd",value:function(e){return e.preventDefault(),e.stopPropagation(),$("html").css("-ms-touch-action","").off(this.pointerMoveEventName,this.boundMoveHandler),$(document).off(this.pointerUpEventName,this.boundEndHandler),!1}},{key:"onResize",value:function(){var e=this.rightImageContainer.get(0),t=e.offsetWidth,n=e.offsetHeight,a=this.position/this.totalWidth;this.totalWidth=t,this.position=a*t,this.leftImageContainer.css({width:this.position,height:n}),this.leftImage.css({width:t,height:n}),this.rightImage.css({width:t,height:n}),this.dragHandle.css("left",this.position)}},{key:"renderRoxDraggableLensesDropdown",value:function(){var e=window.pdpdata.products[$("#pdpFrameCatId").val()].productPartNumber,t=window.dragLensData[e],n=$("#D_PDP_DragLens_DropDownSelection ul li"),a="";n.each(function(e,n){a=$(n).data(),-1===t.indexOf(a.sku.toString())&&($(n).hide(),$('#D_PDP_DragLens_DropDownSelect option[data-lens-value="'+a.lensValue+'"]').hide())})}},{key:"s7jsonResponseDiverted",value:function(e){var t=this;if(null!==e&&void 0!==e&&"Static"==e.split("_").pop()){$(".wcs-draggable-lenses-static-image img").attr("src","//assets.ray-ban.com/is/image/RayBan/DraggableLenses_Static?$615x410-draggable$"),$(".rb-image-compare").addClass("rb-image-compare-hide"),$(".wcs-draggable-lenses-static-image").removeClass("wcs-hide"),$(".wcs-draggable-lenses-gallery-extras").addClass("wcs-hide")}else{$(".rb-image-compare").removeClass("rb-image-compare-hide"),$(".wcs-draggable-lenses-static-image").addClass("wcs-hide"),$(".wcs-draggable-lenses-gallery-extras").removeClass("wcs-hide");var n="//assets.ray-ban.com/is/image/RayBan/"+e+"_Base?$615x410-draggable$",a="//assets.ray-ban.com/is/image/RayBan/"+e+"_Mask?$615x410-draggable$";$(".rb-image-compare").each(function(e,i){t.setLeftImageUrl(a),t.setRightImageUrl(n)})}}}]),e}()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.lensesDropdown=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=n(5),s=n(20),l=n(21);t.lensesDropdown=function(){function e(){a(this,e),this.bindEvent(),this.closeDropDown()}return i(e,[{key:"bindEvent",value:function(){var e=this;$(".rb-select-wrapper").each(function(t,n){var a=$(n),i=a.find("select"),c=a.find(".rb-select-replacement"),d=a.data("prefix"),u=$(n).find(".dropdown-list"),p=$(u).find(".rb-scroller-drag-lens").attr("id"),f=void 0,h=void 0;u.length>0&&(f=new iScroll(p,{hScrollbar:!1,scrollbars:!0,mouseWheel:!0}),h=c.innerWidth(),$(u).width(h),$(n).find(".rb-select-replacement").click(function(e){$(u).slideToggle("fast",function(){$("#"+p).height($(u).height()),f.refresh(),$(u).find("ul").next().addClass("customScrollBar")}),$(c).toggleClass("open")}),$(u).find("li").off().on("click",function(e){$(u).find("li").removeClass("selected");var t=$(e.currentTarget).data("value");i.find("[value='"+t+"']").prop("selected",!0),i.change(),$(e.currentTarget).addClass("selected"),$(c).removeClass("open"),$(u).hide();var n=$(e.currentTarget).data();if(n.draggable=n.lensValue,n.product_sku=n.sku,!$("#D_PDP_Prod_ColorThumbs").hasClass("changing")){$("#left_carousel ul.wcs-carousel li").removeClass("wcs-selected");var a=$(e.currentTarget).data("sku");$("#left_carousel ul.wcs-carousel li").each(function(e,t){var i=$(t).data("product_sku"),c=void 0,d=void 0;return i==a?($(t).addClass("wcs-selected"),$("#D_PDP_Prod_ColorThumbs").removeClass("changing"),c=$("#D_PDP_Prod_ColorThumbs .wcs-selected").index(),d=parseInt(c/4),window.pdpCarousel.goToSlide(d),s.updateModelService.updateSelectedProduct(i),s.updateModelService.updateSelectedFrame(),s.updateModelService.updateSelectedProductFrameDetails(),l.dataAvailabilityService.set(),r.Core.PubSub.publish(o.events.getPDPEvents().UPDATE_LENS,{selectedProductData:window.selectedProductData,clickedElData:n,prodSku:a}),!1):void 0!==$("#skuListInColor_"+i).val()&&-1!=$("#skuListInColor_"+i).val().indexOf(a)?($(t).addClass("wcs-selected"),$("#D_PDP_Prod_ColorThumbs").removeClass("changing"),c=$("#D_PDP_Prod_ColorThumbs .wcs-selected").index(),d=parseInt(c/4),window.pdpCarousel.goToSlide(d),s.updateModelService.updateSelectedProduct(a),s.updateModelService.updateSelectedFrame(),s.updateModelService.updateSelectedProductFrameDetails(),l.dataAvailabilityService.set(),r.Core.PubSub.publish(o.events.getPDPEvents().UPDATE_LENS,{selectedProductData:window.selectedProductData,clickedElData:n,prodSku:a}),!1):void 0})}})),i.filter("[data-selected-option]").each(function(e,t){var n=$(t),a=n.data("selected-option");n.find("option."+a).prop("selected",!0)}),i.css({width:a.width(),height:a.height()}).on("change",function(){e.updateText(i,u,c,d)}),e.updateText(i,u,c,d)})}},{key:"updateText",value:function(e,t,n,a){var i=e.find("option").filter(":selected"),r=!!i.attr("disabled");t.length>0?void 0!==i&&void 0!==i.val()&&"polarized"==i.val().substring(0,9)?n.html('<span class="wcs-icon dl-polarized"></span> '+i.text()):n.text(i.text()):n.text(a+i.text()),n.toggleClass("rb-select-replacement-disabled-option",r)}},{key:"closeDropDown",value:function(){$(document).off("mouseup").on("mouseup",function(e){var t=$(".rb-select-wrapper");t.is(e.target)||0!==t.has(e.target).length||($(t).find(".dropdown-list").prev().removeClass("open"),$(t).find(".dropdown-list").hide())})}}]),e}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),initalizeS7=exports.initalizeS7=function(){function initalizeS7(){_classCallCheck(this,initalizeS7),window.showCompareImages=this.showCompareImages,window.initS7Rotate=this.initS7Rotate,window.initS7Enlarge=this.initS7Enlarge}return _createClass(initalizeS7,[{key:"saveUrl",value:function(e){return e.replace("http:","")}},{key:"spinSetExists",value:function(e,t){$.ajax({type:"GET",url:t,data:e,dataType:"jsonp",crossDomain:!0,error:function(e,t,n){}})}},{key:"setCompare360",value:function setCompare360(imageUrl){var _this=this,compareButtons=$(".wcs-compare-product-wrap .wcs-360-compare");imageUrl=this.saveUrl(imageUrl),$(compareButtons).each(function(i,el){var dataSpin=$(el).data("s7imgspin"),buttonId=$(el).attr("id"),url=imageUrl+dataSpin,handler="compare"+buttonId,dataSpinExist="req=exists,json&handler="+handler;null==window[handler]&&(window[handler]=function(jsonData,string){var responseData=eval(jsonData);if("1"===responseData["catalogRecord.exists"]){var button=$("#"+buttonId);$(button).off("click").on("click",function(){window.open_scene7_overlay($(el))}),button.removeClass("wcs-hide")}}),_this.spinSetExists(dataSpinExist,url)})}},{key:"checkCompareImages",value:function(){var e=$(".wcs-compare-hide-image"),t=$("#s7ImageQPrefix").val()+"?imageset={";$(e).each(function(e,n){var a=$(n).attr("id");t=t+a+","}),t+="}&req=set,json&defaultimage=RB_Default&handler=showCompareImages",$.ajax({type:"GET",url:t,dataType:"jsonp",crossDomain:!0})}},{key:"showCompareImages",value:function(e,t){var n=e.set.item;$(n).each(function(e,t){var n=$(t),a=n[0].i.n;a=a.replace("RayBan/",""),$("#"+a).removeClass("wcs-hide")})}},{key:"loadS7Libs",value:function(){s7sdk.Util.lib.include("s7sdk.image.ZoomView"),s7sdk.Util.lib.include("s7sdk.common.Container"),s7sdk.Util.lib.include("s7sdk.set.SpinView"),s7sdk.Util.lib.include("s7sdk.common.Button"),s7sdk.Util.lib.include("s7sdk.set.Swatches")}},{key:"getS7Utils",value:function(){return"//assets.ray-ban.com/s7sdk/2.5/js/s7sdk/utils/Utils.js"}},{key:"initS7Rotate",value:function(e,t,n){this.handler_initS7Rotate(e,t,n)}},{key:"handler_initS7Rotate",value:function(e,t,n){var a=this;$.getScript(this.getS7Utils(),function(){a.loadS7Libs(),s7sdk.Util.init();var i=new s7sdk.ParameterManager;i.addEventListener(s7sdk.Event.SDK_READY,function(){a.initViewer(e,t,n,i)},!1),i.init()})}},{key:"initParams",value:function(e,t,n){var a=this;n=new s7sdk.ParameterManager,n.addEventListener(s7sdk.Event.SDK_READY,function(){a.initViewer(e,t,null,n)},!1),n.init()}},{key:"createViewer",value:function(e,t,n,a){var i=$("#wcs-data-image-url").attr("value");t.push("serverurl",i),t.push("asset",e),t.push("stagesize","960,824"),t.push("iscommand","$zoomview$"),new s7sdk.Container("wcs_enlarge_rotate",t,"s7enlarge_container"),new s7sdk.ZoomView("s7enlarge_container",t,"zoomView")}},{key:"initViewer",value:function(e,t,n,a,i){var r=e.split(",");this.createViewer(r[t],i,n,a),this.addNext(a.container,t,r,a,e),this.addSpacer(a.container),this.addPrevious(a.container,t,r,a,e)}},{key:"addNext",value:function(e,t,n,a,i){var r=this;$(e).append('<div id="nextButton" class="s7button s7nextbutton"></div>'),t==n.length-1&&(1==n.length?$("#nextButton").addClass("wcs-disabled wcs-hide"):($("#nextButton").addClass("wcs-disabled"),$("#previousButton").removeClass("wcs-disabled"))),$(e).children("#nextButton").off("click").on("click",function(){t<n.length-1&&(r.initZoom(a.container),r.initParams(i,++t,null),$("canvas").on("contextmenu",function(e){return!1}))})}},{key:"addPrevious",value:function(e,t,n,a,i){var r=this;$(e).append('<div id="previousButton" class="s7button s7previousbutton"></div>'),0==t&&(1==n.length?$("#previousButton").addClass("wcs-disabled wcs-hide"):($("#previousButton").addClass("wcs-disabled"),$("#nextButton").removeClass("wcs-disabled"))),$(e).children("#previousButton").off("click").on("click",function(){t>0&&(r.initZoom(a.container),r.initParams(i,--t,null),$("canvas").on("contextmenu",function(e){return!1}))})}},{key:"addSpacer",value:function(e){$(e).append('<div id="s7Spacer" class="s7spacer"></div>')}},{key:"onZoomStateChange",value:function(e){e.s7event.state.hasCapability(s7sdk.ZoomCapabilityState.ZOOM_IN)?zoomInButton.activate():zoomInButton.deactivate(),e.s7event.state.hasCapability(s7sdk.ZoomCapabilityState.ZOOM_OUT)?zoomOutButton.activate():zoomOutButton.deactivate()}},{key:"onZoomIn",value:function(e){zoomView.zoomIn()}},{key:"onZoomOut",value:function(e){zoomView.zoomOut()}},{key:"resizeViewer",value:function(e){zoomView.resize(e.s7event.w,e.s7event.h)}},{key:"initS7Enlarge",value:function(e,t){this.handler_initS7Enlarge(e,t)}},{key:"handler_initS7Enlarge",value:function(e,t){var n=this;$.getScript(getS7Utils(),function(){n.loadS7Libs(),s7sdk.Util.init();n.initParams(e,t,null)})}},{key:"initZoom",value:function(e){$(e).children().remove()}}]),initalizeS7}()}])});
//# sourceMappingURL=pdp-main-w.js.map