!function(){function t(t,e){var r=new Error('Cannot find module "'+t+'"'+(e?' from "'+e+'"':""));return r.code="MODULE_NOT_FOUND",r}function e(t){this.id=this.filename=t,this.loaded=!1,this.exports=void 0}function r(t,e,r){var n=r&&r.globals;if(w[t]=e,n)for(var o=y||global,i=0;i<n.length;i++){var s=n[i],a=O[t]=p(t);o[s]=a.exports}}function n(t,e){C[t]=e}function o(t,e){j[t]=e}function i(t,e){A[t]=e}function s(t,e,r){k[t+"/"+e]=r}function a(t){var e,r=0,n=t.length;for(e=0;e<n;e++){var o=t[e];"."===o||(".."===o?r--:(t[r]=o,r++))}return 1===r?"/":(r>2&&0===t[r-1].length&&r--,t.length=r,t.join("/"))}function u(t,e){var r=e.split("/");return a(("/"==t?[""]:t.split("/")).concat(r))}function c(t){var e,r=t.lastIndexOf(".");return-1===r||-1!==(e=t.lastIndexOf("/"))&&e>r?null:t.substring(0,r)}function l(t){t=t.substring(1);var e=t.indexOf("/");"@"===t.charAt(1)&&(e=t.indexOf("/",e+1));var r=-1===e?t.length:e;return[t.substring(0,r),t.substring(r)]}function h(t,e){"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1));var r=A[t];if(r)return r;var n,o,i=l(e),s=i[0],a=t.indexOf("/");a<0?(n=t,o=""):("@"===t.charAt(0)&&(a=t.indexOf("/",a+1)),n=t.substring(0,a),o=t.substring(a));var u=k[s+"/"+n];if(u){var c="/"+n+"$"+u;return o&&(c+=o),c}}function f(t,e){var r;if("."===t.charAt(0))r=u(e,t);else if("/"===t.charAt(0))r=a(t.split("/"));else{for(var n=_.length,o=0;o<n;o++){var i=_[o]+t,s=f(i,e);if(s)return s}r=h(t,e)}if(r){var l;void 0!==(l=C[r])&&(l||(l="index"),r=u(r,l));var p=j[r];p&&(r=p);var d=w[r];if(void 0===d){var v;if(null===(v=c(r))||void 0===(d=w[v]))return;r=v}return[r,d]}}function p(r,n){if(!r)throw t("");var o=f(r,n);if(!o)throw t(r,n);var i=o[0],s=E[i];if(void 0!==s)return s;if(O.hasOwnProperty(i))return O[i];var a=o[1];return s=new e(i),E[i]=s,s.load(a),s}function d(t,e){return p(t,e).exports}function v(t,e){return e&&!1===e.wait||x?void d(t,"/"):$.push([t,e])}function m(){x=!0;for(var t;t=$.length;){var e=$;$=[];for(var r=0;r<t;r++){var n=e[r];v(n[0],n[1])}if(!x)break}}function g(t){_.push(t)}var y;if("undefined"!=typeof window){if(y=window,y.$_mod_webchat)return;y.global=y}var b,w={},_=[],x=!1,$=[],E={},k={},A={},C={},j={},S={},O={};e.cache=E;var L=e.prototype;L.load=function(e){var r=this.id;if(e&&e.constructor===Function){var n=r.lastIndexOf("/"),o=r.substring(0,n),i=S[o]||(S[o]={}),s=function(t){return(i[t]||(i[t]=p(t,o))).exports};s.resolve=function(e){if(!e)throw t("");var r=f(e,o);if(!r)throw t(e,o);return r[0]},s.cache=E,s.runtime=b,this.exports={},e.call(this,s,this.exports,this,r,o)}else this.exports=e;this.loaded=!0};var R=0,T=function(){--R||m()};L.__runtime=b={def:r,installed:s,run:v,main:n,remap:o,builtin:i,require:d,resolve:f,join:u,ready:m,searchPath:g,loaderMetadata:function(t){L.__loaderMetadata=t},pending:function(){return x=!1,R++,{done:T}}},y?y.$_mod_webchat=b:module.exports=b}(),$_mod_webchat.installed("purecloud-webchat$1.0.0","regenerator-runtime","0.11.0"),$_mod_webchat.def("/regenerator-runtime$0.11.0/runtime",function(t,e,r,n,o){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,s=Object.create(i.prototype),a=new d(n||[]);return s._invoke=l(t,r,a),s}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function s(){}function a(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(t){function e(r,o,s,a){var u=n(t[r],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"===(void 0===l?"undefined":i(l))&&b.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,s,a)},function(t){e("throw",t,s,a)}):Promise.resolve(l).then(function(t){c.value=t,s(c)},a)}a(u.arg)}function r(t,r){function n(){return new Promise(function(n,o){e(t,r,n,o)})}return o=o?o.then(n,n):n()}var o;this._invoke=r}function l(t,e,r){var o=A;return function(i,s){if(o===j)throw new Error("Generator is already running");if(o===S){if("throw"===i)throw s;return m()}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var u=h(a,r);if(u){if(u===O)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===A)throw o=S,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=j;var c=n(t,e,r);if("normal"===c.type){if(o=r.done?S:C,c.arg===O)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=S,r.method="throw",r.arg=c.arg)}}}function h(t,e){var r=t.iterator[e.method];if(r===g){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=g,h(t,e),"throw"===e.method))return O;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var o=n(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,O;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,O):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,O)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function v(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(b.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=g,e.done=!0,e};return n.next=n}}return{next:m}}function m(){return{value:g,done:!0}}var g,y=Object.prototype,b=y.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},_=w.iterator||"@@iterator",x=w.asyncIterator||"@@asyncIterator",$=w.toStringTag||"@@toStringTag",E="object"===(void 0===r?"undefined":i(r)),k=t.regeneratorRuntime;if(k)return void(E&&(r.exports=k));k=t.regeneratorRuntime=E?r.exports:{},k.wrap=e;var A="suspendedStart",C="suspendedYield",j="executing",S="completed",O={},L={};L[_]=function(){return this};var R=Object.getPrototypeOf,T=R&&R(R(v([])));T&&T!==y&&b.call(T,_)&&(L=T);var P=a.prototype=o.prototype=Object.create(L);s.prototype=P.constructor=a,a.constructor=s,a[$]=s.displayName="GeneratorFunction",k.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))},k.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,$ in t||(t[$]="GeneratorFunction")),t.prototype=Object.create(P),t},k.awrap=function(t){return{__await:t}},u(c.prototype),c.prototype[x]=function(){return this},k.AsyncIterator=c,k.async=function(t,r,n,o){var i=new c(e(t,r,n,o));return k.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},u(P),P[$]="Generator",P[_]=function(){return this},P.toString=function(){return"[object Generator]"},k.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},k.values=v,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(p),!t)for(var e in this)"t"===e.charAt(0)&&b.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=g),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var s=b.call(o,"catchLoc"),a=b.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,O):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),O},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),p(r),O}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;p(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:v(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=g),O}}}(function(){return this}()||Function("return this")())}),$_mod_webchat.run("/regenerator-runtime$0.11.0/runtime",{wait:!1}),$_mod_webchat.builtin("lasso-loader","/lasso-loader$3.0.2/src/index"),$_mod_webchat.loaderMetadata({_7d83a0:{js:["https://dhqbrvplips7x.cloudfront.net/webchat/291/jsapi-v1.js-async-9194803b.js","https://dhqbrvplips7x.cloudfront.net/webchat/291/fashion-model-a8748f44.js"]},_9823a6:{js:["https://dhqbrvplips7x.cloudfront.net/webchat/291/jsapi-v1.js-async-9194803b.js","https://dhqbrvplips7x.cloudfront.net/webchat/291/fashion-model-a8748f44.js"]},_1013f0:{js:["https://dhqbrvplips7x.cloudfront.net/webchat/291/jsapi-v1.js-async-9194803b.js","https://dhqbrvplips7x.cloudfront.net/webchat/291/fashion-model-a8748f44.js"]},_a35c80:{js:["https://dhqbrvplips7x.cloudfront.net/webchat/291/jsapi-v1.js-async-9194803b.js"]},_de92af:{js:["https://dhqbrvplips7x.cloudfront.net/webchat/291/jsapi-v1.js-async-9194803b.js"]},_6b0531:{js:["https://dhqbrvplips7x.cloudfront.net/webchat/291/jsapi-v1.js-async-9194803b.js"]}}),$_mod_webchat.installed("lasso-loader$3.0.2","raptor-util","1.1.2"),$_mod_webchat.def("/raptor-util$1.1.2/extend",function(t,e,r,n,o){"use strict";r.exports=function(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}),$_mod_webchat.def("/lasso-loader$3.0.2/src/resource-loader",function(t,e,r,n,o){"use strict";function i(t,e){var r=document.createElement(t);return e&&u(r,e),r}function s(t){null==a&&(a=document.getElementsByTagName("head")[0]),a.appendChild(t)}var a,u=t("/raptor-util$1.1.2/extend");e.js=function(t,e,r){function n(){!1===c&&(c=!0,e())}function o(t){!1===c&&(c=!0,e(t||"unknown error"))}r=r||{};var a,c=!1;if(u(r,{type:"text/javascript",src:t,onreadystatechange:function(){"complete"!=a.readyState&&"loaded"!=a.readyState||n()},onload:n,onerror:o}),a=i("script",r),a.addEventListener)try{a.addEventListener("load",function(){n()})}catch(t){}s(a)},e.css=function(t,e,r){function n(){p.onload=null,p.onreadystatechange=null,p.onerror=null}function o(){for(var e=document.styleSheets,r=0,n=e.length;r<n;r++)if(e[r].href===t)return!0;return!1}function a(){!1===f&&(f=!0,n(),e())}function c(){if(!1===f){if(!o()&&h--)return window.setTimeout(c,10);a()}}function l(t){!1===f&&(f=!0,n(),e(t||"unknown error"))}var h=20,f=!1,p=i("link");u(p,{type:"text/css",rel:"stylesheet",href:t}),r&&u(p,r),"Microsoft Internet Explorer"===navigator.appName?(p.onload=a,p.onreadystatechange=function(){var t=this.readyState;"loaded"!==t&&"complete"!==t||a()}):c(),p.onerror=l,s(p)}}),$_mod_webchat.builtin("events","/events$1.1.1/events"),$_mod_webchat.def("/events$1.1.1/events",function(t,e,r,n,o){"use strict";function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(t){return"function"==typeof t}function a(t){return"number"==typeof t}function u(t){return"object"===(void 0===t?"undefined":l(t))&&null!==t}function c(t){return void 0===t}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!a(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,r,n,o,i,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(r=this._events[t],c(r))return!1;if(s(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(u(r))for(o=Array.prototype.slice.call(arguments,1),a=r.slice(),n=a.length,i=0;i<n;i++)a[i].apply(this,o);return!0},i.prototype.addListener=function(t,e){var r;if(!s(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,s(e.listener)?e.listener:e),this._events[t]?u(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,u(this._events[t])&&!this._events[t].warned&&(r=c(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!s(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},i.prototype.removeListener=function(t,e){var r,n,o,i;if(!s(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,n=-1,r===e||s(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(u(r)){for(i=o;i-- >0;)if(r[i]===e||r[i].listener&&r[i].listener===e){n=i;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],s(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?s(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(s(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}}),$_mod_webchat.def("/lasso-loader$3.0.2/src/index",function(t,e,r,n,o){"use strict";function i(t,e){if(!p[e]){p[e]=!0;var r,n=setTimeout(function(){r("Timeout after "+f+"ms")},f);r=function(t){p[e]&&(clearTimeout(n),delete p[e],t?v[e]=t:d[e]=!0,m.emit(e,t,e))},l[t](e,r)}}function s(t,e){function r(){s.length?e("Failed: "+s.join(", ")):e()}function n(t,e){t&&s.push(e+" ("+t+")"),0==--a&&u&&r()}function o(e){var r=t[e];if(r)for(var o=0,u=r.length;o<u;o++){var c=r[o];v[c]?s.push(c+" ("+v[c]+")"):d[c]||(a++,m.once(c,n),i(e,c))}}var s=[],a=0,u=!1;o("css"),o("js"),u=!0,0===a&&r()}function a(t){if("_"!==t.charAt(0))throw new Error("No loader metadata for "+t)}function u(t,e){var n,o=r.__loaderMetadata;if(!o)return e();if(Array.isArray(t))n={js:[],css:[]},t.forEach(function(t){var e=o[t];e?["js","css"].forEach(function(t){var r=e[t];r&&(n[t]=n[t].concat(r))}):a(t)});else if(!(n=o[t]))return a(t),e();var i=c.pending();s(n,function(t,r){i.done(t),e(t,r)})}var c=r.__runtime,l=t("/lasso-loader$3.0.2/src/resource-loader"),h=t("/events$1.1.1/events").EventEmitter,f=3e3,p={},d={},v={},m=new h;e.setTimeout=function(t){f=t},e.load=s,e.async=u}),$_mod_webchat.installed("purecloud-webchat$1.0.0","webrtcsupport","2.2.0"),$_mod_webchat.main("/webrtcsupport$2.2.0","index-node"),$_mod_webchat.remap("/webrtcsupport$2.2.0/index-node","/webrtcsupport$2.2.0/index-browser"),$_mod_webchat.def("/webrtcsupport$2.2.0/index-browser",function(t,e,r,n,o){"use strict";var i,s;window.mozRTCPeerConnection||navigator.mozGetUserMedia?(i="moz",s=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(i="webkit",s=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var a=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,u=window.mozRTCIceCandidate||window.RTCIceCandidate,c=window.mozRTCSessionDescription||window.RTCSessionDescription,l=window.webkitMediaStream||window.MediaStream,h="https:"===window.location.protocol&&("webkit"===i&&s>=26||"moz"===i&&s>=33),f=window.AudioContext||window.webkitAudioContext,p=document.createElement("video"),d=p&&p.canPlayType&&"probably"===p.canPlayType('video/webm; codecs="vp8", vorbis'),v=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;r.exports={prefix:i,browserVersion:s,support:!!a&&!!v,supportRTCPeerConnection:!!a,supportVp8:d,supportGetUserMedia:!!v,supportDataChannel:!!(a&&a.prototype&&a.prototype.createDataChannel),supportWebAudio:!(!f||!f.prototype.createMediaStreamSource),supportMediaStream:!(!l||!l.prototype.removeTrack),supportScreenSharing:!!h,AudioContext:f,PeerConnection:a,SessionDescription:c,IceCandidate:u,MediaStream:l,getUserMedia:v}}),$_mod_webchat.searchPath("/purecloud-webchat$1.0.0/"),$_mod_webchat.main("/purecloud-webchat$1.0.0/src/storage",""),$_mod_webchat.installed("purecloud-webchat$1.0.0","@purecloud/cross-domain-storage","1.0.0"),$_mod_webchat.main("/@purecloud/cross-domain-storage$1.0.0",""),$_mod_webchat.def("/@purecloud/cross-domain-storage$1.0.0/index",function(t,e,r,n,o){"use strict";function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function n(o,i){try{var s=e[o](i),a=s.value}catch(t){return void r(t)}return s.done?void t(a):Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}var s=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function t(t){var e=t.origin,n=t.key;return r+":"+e+":"+n}var e="__crossdomain_event__",r="__crossdomain_storage__",n=e+":STORE",o=e+":STORE_RESULT",a=e+":RETRIEVE",u=e+":RETRIEVE_RESULT",c=e+":REMOVE",l=e+":REMOVE_RESULT",h=/^(http|https):\/\/[^\/]+/,f=e+":INIT";window.setupStorage=window.setupStorage||function(){function e(t){var e=t.accessors,r=t.origin;return e.find(function(t){return t===r})}var r=this,s=function(){var e=i(regeneratorRuntime.mark(function e(r,n){var i,s,a=n.source,u=n.accessors,c=n.ttl,l=n.key,h=n.value,f=n.requestId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof l){e.next=2;break}throw new Error("key must be a string");case 2:i=t({origin:r,key:l}),u instanceof Array||(u=[]),u=u.filter(function(t){return"string"==typeof t?t:void 0}),r in u||u.push(r),s=c?Date.now()+c:null,window.localStorage.setItem(i,JSON.stringify({accessors:u,origin:r,requestId:f,expiresAt:s,value:h})),a.postMessage({type:o,requestId:f,expiresAt:s,storageKey:i,key:l,success:!0},r);case 9:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var r=i(regeneratorRuntime.mark(function r(n,o){var i,s,a,c,l,h,f,p,d=o.crossDomainOrigin,v=o.source,m=o.key,g=o.requestId;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=d||n,s=t({origin:i,key:m}),a=window.localStorage.getItem(s)){r.next=5;break}throw new Error(m+" not found");case 5:if(c=JSON.parse(a),l=c.accessors,h=c.expiresAt,f=c.value,p=e({accessors:l,origin:n})){r.next=9;break}throw new Error(m+" not found");case 9:if(!(h&&Date.now()>h)){r.next=12;break}throw window.localStorage.removeItem(s),new Error(m+" not found");case 12:return r.abrupt("return",v.postMessage({success:!0,type:u,key:m,value:f,requestId:g},p));case 13:case"end":return r.stop()}},r,this)}));return function(t,e){return r.apply(this,arguments)}}(),p=function(){var r=i(regeneratorRuntime.mark(function r(n,o){var i,s,a,u,c,h=o.crossDomainOrigin,f=o.source,p=o.key,d=o.requestId;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=h||n,s=t({origin:i,key:p}),a=JSON.parse(localStorage.getItem(s))){r.next=5;break}throw new Error(p+" not found");case 5:if(u=a.accessors,c=e({accessors:u,origin:n})){r.next=9;break}throw new Error("grant: "+p+" not found");case 9:return window.localStorage.removeItem(s),r.abrupt("return",f.postMessage({type:l,success:!0,requestId:d},c));case 11:case"end":return r.stop()}},r,this)}));return function(t,e){return r.apply(this,arguments)}}();window.addEventListener("message",function(){var t=i(regeneratorRuntime.mark(function t(e){var i,f,d,v,m,g,y,b,w,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.origin,f=e.source,d=e.data,v=d.type,m=d.crossDomainOrigin,g=d.accessors,y=d.key,b=d.value,w=d.ttl,_=d.requestId,v!==n){t.next=13;break}return t.prev=3,t.next=6,s(i,{source:f,accessors:g,ttl:w,key:y,value:b,requestId:_});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),f.postMessage({type:o,requestId:_,err:t.t0.message,success:!1},i);case 11:t.next=33;break;case 13:if(v!==a){t.next=24;break}return t.prev=14,t.next=17,h(i,{crossDomainOrigin:m,source:f,key:y,requestId:_});case 17:t.next=22;break;case 19:t.prev=19,t.t1=t.catch(14),f.postMessage({type:u,requestId:_,err:t.t1.message,success:!1},i);case 22:t.next=33;break;case 24:if(v!==c){t.next=33;break}return t.prev=25,t.next=28,p(i,{crossDomainOrigin:m,source:f,key:y,requestId:_});case 28:t.next=33;break;case 30:t.prev=30,t.t2=t.catch(25),f.postMessage({type:l,requestId:_,err:t.t2.message,success:!1},i);case 33:case"end":return t.stop()}},t,r,[[3,8],[14,19],[25,30]])}));return function(e){return t.apply(this,arguments)}}()),window.parent.postMessage({type:f,success:!0,frameHref:window.location.href},"*")},window.setupStorageClient=window.setupStorageClient||function(t){function e(){return L++}function r(t,e){return t+":::"+e}function p(t){var e=t.origin,n=t.success,o=t.requestId,i=t.err,s=t.value,a=r(e,o),u=$[a];delete $[a],u&&u({success:n,err:i,value:s})}function d(t){return new Promise(function(e,n){var o=r(O,t);$[o]=function(t){var r=t.success,o=t.err,i=t.value;return r?e(i):n(new Error(o))}})}function v(t,r){var n=e(),o=d(n);return _.contentWindow.postMessage({type:c,key:t,requestId:n,crossDomainOrigin:r},O),o}function m(t,r){var n=e(),o=d(n);return _.contentWindow.postMessage({type:a,crossDomainOrigin:r,key:t,requestId:n},O),o}var g=function(){var t=i(regeneratorRuntime.mark(function t(r){var o,i,s=r.accessors,a=r.ttl,u=r.key,c=r.value;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e(),i=d(o),_.contentWindow.postMessage({type:n,key:u,value:c,accessors:s,ttl:a,requestId:o},O),t.abrupt("return",i);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=i(regeneratorRuntime.mark(function t(e){var r,n,o,i,s,a,u,c,l,h=e.key,f=e.crossDomainOrigin;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=f?f.split("|"):[void 0],n=void 0,o=!0,i=!1,s=void 0,t.prev=5,a=r[Symbol.iterator]();case 7:if(o=(u=a.next()).done){t.next=23;break}return c=u.value,t.prev=9,t.next=12,v(h,c);case 12:return l=t.sent,t.abrupt("return",l);case 16:return t.prev=16,t.t0=t.catch(9),n=t.t0,t.abrupt("continue",20);case 20:o=!0,t.next=7;break;case 23:t.next=29;break;case 25:t.prev=25,t.t1=t.catch(5),i=!0,s=t.t1;case 29:t.prev=29,t.prev=30,!o&&a.return&&a.return();case 32:if(t.prev=32,!i){t.next=35;break}throw s;case 35:return t.finish(32);case 36:return t.finish(29);case 37:throw n;case 38:case"end":return t.stop()}},t,this,[[5,25,29,37],[9,16],[30,,32,36]])}));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=i(regeneratorRuntime.mark(function t(e){var r,n,o,i,s,a,u,c,l,h=e.key,f=e.crossDomainOrigin;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=f?f.split("|"):[void 0],n=void 0,o=!0,i=!1,s=void 0,t.prev=5,a=r[Symbol.iterator]();case 7:if(o=(u=a.next()).done){t.next=23;break}return c=u.value,t.prev=9,t.next=12,m(h,c);case 12:return l=t.sent,t.abrupt("return",l);case 16:return t.prev=16,t.t0=t.catch(9),n=t.t0,t.abrupt("continue",20);case 20:o=!0,t.next=7;break;case 23:t.next=29;break;case 25:t.prev=25,t.t1=t.catch(5),i=!0,s=t.t1;case 29:t.prev=29,t.prev=30,!o&&a.return&&a.return();case 32:if(t.prev=32,!i){t.next=35;break}throw s;case 35:return t.finish(32);case 36:return t.finish(29);case 37:throw n;case 38:case"end":return t.stop()}},t,this,[[5,25,29,37],[9,16],[30,,32,36]])}));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(f);case 2:return t.abrupt("return",this);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),_=t.frame,x=t.targetUrl,$={};if(!(_ instanceof window.HTMLElement)&&x){_=document.createElement("iframe"),_.setAttribute("src",x),_.setAttribute("width",0),_.setAttribute("height",0),_.setAttribute("style","display: none; border: 0;"),_.setAttribute("sandbox","allow-scripts allow-same-origin");var E=document.getElementsByTagName("body"),k=s(E,1),A=k[0];A&&A.appendChild(_)}var C=_.getAttribute("src"),j=C.match(h),S=s(j,1),O=S[0];window.addEventListener("message",function(t){var e=t.origin,r=t.data,n=t.source,i=r.type,s=r.success,a=r.value,c=r.requestId,h=r.err;n===_.contentWindow&&(i===o&&p({origin:e,success:s,err:h,requestId:c}),i===u&&p({origin:e,success:s,err:h,requestId:c,value:a}),i===l&&p({origin:e,success:s,err:h,requestId:c}),i===f&&p({origin:e,success:s,err:h,requestId:f}))});var L=0;return{store:g,retrieve:b,remove:y,init:w}}}()}),$_mod_webchat.installed("purecloud-webchat$1.0.0","fashion-model","5.0.21"),$_mod_webchat.installed("fashion-model$5.0.21","raptor-util","3.2.0"),$_mod_webchat.def("/raptor-util$3.2.0/copyProps",function(t,e,r,n,o){"use strict";r.exports=function(t,e){Object.getOwnPropertyNames(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n)})}}),$_mod_webchat.def("/raptor-util$3.2.0/inherit",function(t,e,r,n,o){"use strict";function i(t,e,r){var n=t.prototype,o=t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});return n&&!1!==r&&s(n,o),t.$super=e,t.prototype=o,t}var s=t("/raptor-util$3.2.0/copyProps");r.exports=i,i._inherit=i}),$_mod_webchat.def("/fashion-model$5.0.21/Array",function(t,e,r,n,o){"use strict";function i(t){var e=new Array(t.length);return e.Model=a,e}function s(t,e,r){var n;n=i(t);var o,s;if(e&&((o=e.wrap)||(s=e.coerce)))for(var a=t.length;--a>=0;){var u=t[a];n[a]=o?o.call(e,u,r):s.call(e,u,r)}else n=t.slice(0);return n}var a,u=t("/fashion-model$5.0.21/Model");a=r.exports=u.extend({typeName:"array",wrap:!0,constructable:!1,isInstance:function(t){return t&&t.Model===a},convertArrayItems:s,clean:function(t,e){var r,n;if((r=e.property)&&(n=r.items)){e.property=n;var o=n.type;if(o.clean){for(var i=t.length,s=new Array(i);--i>=0;)s[i]=o.clean(t[i],e);return s}e.property=r}return u.cleanArray(t,e)},coerce:function(t,e){if(null==t)return t;if(a.isInstance(t))return t;var r,n=Array.isArray(t);if(e.strict){if(!n)return void this.coercionError(t,e);r=t}else r=n?t:[t];var o,i,c;return(o=e.property)&&(i=o.items)?u._forProperty(i,e,function(t){c=s(r,i.type,t)}):(c=r.slice(0),c.Model=a),c}})}),$_mod_webchat.def("/fashion-model$5.0.21/Boolean",function(t,e,r,n,o){"use strict";r.exports=t("/fashion-model$5.0.21/Model").extend({typeName:"boolean",wrap:!1,coerce:function(t,e){return e.strict?(null!=t&&t.constructor!==Boolean&&this.coercionError(t,e),t):null==t?t:t.constructor===String?"true"===t:!!t}})}),$_mod_webchat.def("/fashion-model$5.0.21/Date",function(t,e,r,n,o){"use strict";var i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(Z)?$/;r.exports=t("/fashion-model$5.0.21/Model").extend({typeName:"date",wrap:!1,coerce:function(t,e){if(e.strict)return null!=t&&t.constructor!==Date&&this.coercionError(t,e),t;if(null!=t)if(t.constructor===String){var r=i.exec(t);if(!r)return null;var n=r[7];n=void 0===n?0:+n,t="Z"===r[8]?new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6],n)):new Date(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6],n)}else t.constructor===Number?t=new Date(t):t.constructor===Date||this.coercionError(t,e);return t}})}),$_mod_webchat.def("/fashion-model$5.0.21/Integer",function(t,e,r,n,o){"use strict";r.exports=t("/fashion-model$5.0.21/Model").extend({typeName:"integer",wrap:!1,coerce:function(t,e){if(e.strict)return null!=t&&t.constructor!==Number&&this.coercionError(t,e),t;if(null==t)return t;var r=parseInt(t,10);return isNaN(r)&&this.coercionError(t,e),r}})}),$_mod_webchat.def("/fashion-model$5.0.21/Number",function(t,e,r,n,o){"use strict";r.exports=t("/fashion-model$5.0.21/Model").extend({typeName:"number",wrap:!1,coerce:function(t,e){if(e.strict)return null!=t&&t.constructor!==Number&&this.coercionError(t,e),t;if(null==t)return t;if(t.constructor===Number)return t;var r=Number(t);return isNaN(r)&&this.coercionError(t,e),r}})}),$_mod_webchat.def("/fashion-model$5.0.21/String",function(t,e,r,n,o){"use strict";r.exports=t("/fashion-model$5.0.21/Model").extend({typeName:"string",wrap:!1,coerce:function(t,e){return e.strict?(null!=t&&t.constructor!==String&&this.coercionError(t,e),t):null==t?t:t.toString()}})}),$_mod_webchat.def("/fashion-model$5.0.21/Object",function(t,e,r,n,o){"use strict";r.exports=t("/fashion-model$5.0.21/Model").extend({typeName:"object",wrap:!1})}),$_mod_webchat.def("/fashion-model$5.0.21/Function",function(t,e,r,n,o){"use strict";r.exports=t("/fashion-model$5.0.21/Model").extend({typeName:"function",wrap:!1,coerce:function(t,e){return null!=t&&t.constructor!==Function&&this.coercionError(t,e,"Value is not a function"),t}})}),$_mod_webchat.def("/fashion-model$5.0.21/primitives",function(t,e,r,n,o){"use strict";function i(){return!0}[t("/fashion-model$5.0.21/Array"),t("/fashion-model$5.0.21/Boolean"),t("/fashion-model$5.0.21/Date"),t("/fashion-model$5.0.21/Integer"),t("/fashion-model$5.0.21/Number"),t("/fashion-model$5.0.21/String"),t("/fashion-model$5.0.21/Object"),t("/fashion-model$5.0.21/Function")].forEach(function(t){
t.isPrimitive=i,e[t.typeName]=t})}),$_mod_webchat.def("/fashion-model$5.0.21/Model",function(t,e,r,n,o){"use strict";function i(){return Object.create(null)}function s(t,e,r){e=E(e);var n=e.property;return e.property=t,r(e),e.property=n,e}function a(t,e,r,n){var o=t.constructor;if(o._onSet)for(var i={model:t,propertyName:n.getName(),oldValue:e,newValue:r,property:n},s=o._onSet.length,a=0;a<s;a++)o._onSet[a](t,i)}function u(t,e,r,n,o){var i=r.getType(),u=i.isWrapped();R.isModel(n)&&i.isInstance(n)||!u&&i.coerce&&(o=s(r,o,function(t){n=i.coerce(n,t)}));var c=r.getKey(),l=e[c],h=r.getSetter();return h&&(h.call(t,n,r),n=e[c]),u&&(o=s(r,o,function(t){n=i.wrap(n,t)})),l!==n&&(e[c]=n,a(t,l,n,r)),n}function c(t){var e=t.getKey(),r=t.getGetter();return r?function(e){return r.call(this,t)}:function(t){return this.data[e]}}function l(t){return function(e,r){return u(this,this.data,t,e,r)}}function h(t,e){var r=e.getKey(),n=t.data[r];return n||(t.data[r]=n=[],n.Model=O),n}function f(t){var e,r=t.items,n=r&&r.type;return n&&(e=n.coerce),n&&n.isWrapped()?function(e,r){h(this,t).push(n.wrap(e,r))}:function(r,o){h(this,t).push(e?e.call(n,r,o):r)}}function p(t){return t.charAt(0).toUpperCase()+t.substring(1)}function d(t,e){return O.convertArrayItems(t,this,e)}function v(t,e,r){var n=t.constructor,o=n.properties,i=o[e];if(!i&&!n.additionalProperties){var s=new Error("Invalid property: "+e);if(!r)throw s;r.push(s)}return i}function m(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}function g(t){this.owner=t}function y(t){if(t.Model)return t;switch(t){case Date:return L.date;case Number:return L.number;case Boolean:return L.boolean;case String:return L.string;case Object:return L.object;case Function:return L.function;case Array:return O}return null}function b(t,e,r,n){var o=t.length;"["===t.charAt(o-2)&&"]"===t.charAt(o-1)?(e.type=O,e.items=i(),b(t.substring(0,o-2),e.items,r,n)):e.type=w(t,r,n)}function w(t,e,r){var n=L[t];if(n)return n;if("self"===t)return r;if(e&&(n=e(t)))return n;throw new Error("Invalid type: "+t)}function _(t,e,r,n){Array.isArray(e)?e={type:e}:"object"!==(void 0===e?"undefined":T(e))&&(e={type:e});var o=e.type;if(o)if(Array.isArray(o)){if(e.type=O,o.length){var i=o[0];null!=i&&(e.items=_(t,i,r,n))}}else if(o.constructor===String)b(o,e,r,n);else{if(e.type=y(o),!e.type)throw new Error("Unrecognized type "+JSON.stringify(o)+' for property "'+t+'". Expected type derived from Model or primitive type.');e.items&&(e.items=_(t,e.items,r,n))}else e.type=L.object;return e}function x(t,e,r,n){return e=_(t,e,r,n),e.name=t,e.key=e.key||t,new m(e)}function $(t,e){for(var r in t)t.hasOwnProperty(r)&&!D[r]&&(e[r]=t[r])}function E(t){return null==t?i():Array.isArray(t)?{errors:t}:t}function k(t,e,r){r&&(t[e]||(t[e]=[])).push(r)}function A(t,e,r){if(r)for(var n=t[e]||(t[e]=[]),o=0;o<r.length;o++)n.push(r[o])}function C(t,e,r,n){t.initType&&t.initType(e);var o;if(t.id){if(o="_mixin_"+t.id,r.properties&&r.properties[o]||e.Properties.prototype[o])return;e.Properties.prototype[o]=!0}var i=t.prototype;if(i)for(o in i)i.hasOwnProperty(o)&&(e.prototype[o]=i[o]);var s;if(s=t.properties)for(o in s)s.hasOwnProperty(o)&&void 0===n[o]&&(n[o]=s[o]);k(e,"_init",t.init),k(e,"_onSet",t.onSet);var a;(a=t.mixins)&&a.forEach(function(t){C(t,e,r,n)})}function j(t,e,r){return e&&r.isInstance(t)?t:I}function S(t,e,r){function n(t,e){o?void 0===this.data&&(this.data=new o(this,t,e)):this.data=t,n.$super.call(this,t,e);var r=n._init;if(r)for(var i=0;i<r.length;i++)r[i].call(this,t,e);s&&s.call(this,t,e)}e=e||i();var o,s=e.init,a=e.wrap,h=e.coerce,v=e.properties,m=e.prototype,g=e.mixins;["getProperty","getProperties","hasProperty","hasProperties","preventConstruction","unwrap","coercionError","forEachProperty","isCompatibleWith","isInstance","isPrimitive"].forEach(function(t){n[t]=R[t]}),n.convertArray=d,$(e,n),t.additionalProperties&&(n.additionalProperties=!0),A(n,"_onSet",t._onSet),n.Model=R,h&&(n.coerce=function(t,e){return h.call(n,t,E(e))}),n.extend=function(t){return S(n,t)},n.isWrapped=function(){return!1!==a};var y;a&&a.constructor===Function?y=a:(a=!1!==a,y=function(t,e){if(a&&0===arguments.length)return new n;var r;if(null!=t&&(r=j(t,a,n))!==I)return r;if(h){if(null==(t=h.call(n,t,e=E(e))))return t;if((r=j(t,a,n))!==I)return r}else if(null==t)return t;return t=R.unwrap(t),a?Array.isArray(t)?n.convertArray(t,e):new n(t,e):t}),n.wrap=y,n.create||(n.create=y),P(n,t);var b=n.prototype;b.Model=n;var w;if(v&&(w=Object.keys(v)).length>0||g){if(n.Properties=function(){},t.Properties?P(n.Properties,t.Properties):n.Properties.prototype={},g){var _=i();g.forEach(function(e){C(e,n,t,_)});var k=Object.keys(_);if(k.length)if(v)for(var L=0;L<k.length;L++){var T=k[L];v.hasOwnProperty(T)||(v[T]=_[T],w.push(T))}else v=_,w=k}if(v){var q=n.Properties.prototype;w.forEach(function(t){var e=x(t,v[t],r,n),o=e.getKey();q[t]=e,t!==o&&(q[o]=e);var i,s=p(t);null!==e.getGetter()&&(i="get"+s,b[i]=c(e)),null!==e.getSetter()&&(i="set"+s,b[i]=l(e)),e.getType()===O&&(i="addTo"+s,b[i]=f(e))})}n.properties=new n.Properties}else n.Properties=t.Properties,n.properties=t.properties||N;if(n.hasProperties()){var M=[];n.forEachProperty(function(t){M.push(t.getKey())}),n.Data=o=function(t,e,r){var o,s,a,c,l=n.properties;if(o=M,s=o.length,null==e)for(c=0;c<s;c++)a=o[c],this[a]=void 0;else{var h;r&&(Array.isArray(r)?r={errors:h=r}:h=r.errors);var f,p=t.data=i();n.additionalProperties&&(f=i());for(a in e)if(e.hasOwnProperty&&e.hasOwnProperty(a)||void 0!==e[a]){var d=l[a];d?u(t,p,d,e[a],r):f?f[a]=e[a]:h&&h.push("Unrecognized property: "+a)}for(c=0;c<s;c++)a=o[c],this[a]=p[a];if(f)for(a in f)this[a]=f[a]}},o.prototype=null}return m&&Object.keys(m).forEach(function(t){b[t]=m[t]}),n}var O,L,R,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P=t("/raptor-util$3.2.0/inherit"),I={},N=i();r.exports=R=function(t,e){if(!1===this.constructor.constructable)throw new Error("Instances of this type cannot be created. data: "+t)},R.typeName="Model",R._forProperty=s,R.isModel=function(t){return t&&t.Model},R.cleanArray=function(t,e){for(var r=t.length,n=new Array(r);--r>=0;)n[r]=R.clean(t[r],e);return n},R.clean=function(t,e){if(e=E(e),null==t)return t;if(Array.isArray(t))return R.cleanArray(t,e);if(t.Model)return t.clean(e);if(t.constructor!==Date&&"object"===(void 0===t?"undefined":T(t))){for(var r={},n=Object.keys(t),o=n.length,i=0;i<o;i++){var s=n[i],a=R.clean(t[s],e);void 0!==a&&(r[s]=a)}return r}return t},R.unwrap=function(t){return null==t?t:t.Model?t.data||t:t},R.hasProperties=function(){return this.properties!==N||!0===this.additionalProperties},R.hasProperty=function(t){return!!this.properties[t]},R.getProperties=function(){return this.properties},R.getProperty=function(t){return this.properties[t]},R.forEachProperty=function(t,e){if(this.Properties){1===arguments.length&&(e=arguments[0],t=i());var r=this.Properties.prototype,n=!1!==t.inherited,o=i();do{for(var s in r)if(!o[s]&&r.hasOwnProperty(s)){var a=r[s];a.constructor===m&&s===a.getName()&&e(a),o[s]=!0}if(!n)break}while(null!=(r=Object.getPrototypeOf(r)))}},R.preventConstruction=function(){this.constructable=!1},R.isCompatibleWith=function(t){var e=this;do if(e===t)return!0;while(e=e.$super);return!1},R.isInstance=function(t){return t instanceof this},R.isPrimitive=function(){return!1},R.coercionError=function(t,e,r){var n="";if(e&&e.property&&e.property.getName&&(n+=e.property.getName()+": "),n+="Invalid value: "+t,r&&(n+=" - "+r),!e||!e.errors){var o=new Error(n);throw o.source=R,o}e.errors.push(n)},R.stringify=function(t,e){return JSON.stringify(R.clean(t),null,e?"  ":void 0)};var q=R.prototype;q.unwrap=function(){return this.data||this},q.clean=function(t){t=E(t);var e=this.Model;if(e.clean)return e.clean(this,t);var r=e.properties,n=this.data;if(e.hasProperties()){for(var o={},i=Object.keys(n),s=i.length,a=0;a<s;a++){var u=i[a],c=t.property=r[u],l=n[u];if(c&&c.isPersisted())if(null==l)void 0!==l&&(o[u]=l);else{var h=c.type,f=h.clean,p=t.property;t.property=c,f?l=h.clean(l,t):(l.Model||h.isWrapped())&&(l=R.clean(l,t)),t.property=p,void 0!==l&&(o[u]=l)}else e.additionalProperties?(l.Model&&(l=l.clean(t)),void 0!==l&&(o[u]=l)):t.errors&&t.errors.push("Unrecognized property: "+u)}n=o}if(e.afterClean){var d=e.afterClean(n,t);void 0!==d&&(n=d)}return n},q.set=function(t,e,r){var n=this.data,o=v(this,t,r);if(o)u(this,n,o,e,r);else{var i=n[t];i!==e&&(n[t]=e,a(this,t,i,e))}},q.get=function(t,e){var r=this.constructor,n=r.properties[t];if(n){var o=n.getGetter();if(o)return o.call(this,t,n)}return this.data[t]},q.stringify=function(t){return R.stringify(this.data,t)};var M=m.prototype;M.getName=function(){return this.name},M.getKey=M.toString=function(){return this.key},M.getType=function(){return this.type},M.getItems=function(){return this.items},M.getGetter=function(){return this.get},M.getSetter=function(){return this.set},M.isPersisted=function(){return!1!==this.persist},g.prototype.getName=function(){return this.owner.getName()};var D={init:1,wrap:1,coerce:1,properties:1,prototype:1,mixins:1};R.extend=function(t,e){return S(R,t,e)},L=t("/fashion-model$5.0.21/primitives"),O=L.array}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/models/Model",function(t,e,r,n,o){"use strict";r.exports=t("/fashion-model$5.0.21/Model")}),$_mod_webchat.def("/fashion-model$5.0.21/Enum",function(t,e,r,n,o){"use strict";function i(){return this._name}var s=/([a-z])([A-Z])|([^\w])/g,a=/([a-z])[^a-z]+([a-z])/g,u=t("/fashion-model$5.0.21/Model"),c=r.exports=u.extend({prototype:{value:function(){return this.data},name:i,toString:i,clean:function(t){var e=this.Model;return e.clean?e.clean(this,t):this._name}}});c.toConstantName=function(t){return t.replace(s,function(t,e,r,n){return e?e+"_"+r:"_"}).toUpperCase()},c.toCamelCase=function(t){return t.toLowerCase().replace(a,function(t,e,r){return e+r.toUpperCase()})},c.toTitleCase=function(t){var e=c.toCamelCase(t);return e.charAt(0).toUpperCase()+e.substring(1)};var l=function(t){return t.toLowerCase()},h=function(t){return t.toUpperCase()};c.create=function(t){function e(t,e,r){n.names.push(t);var o=new n(e);return o._name=t,i["is"+c.toTitleCase(t)]=function(){return this===o},n[t]=n[c.toConstantName(t)]=o,n[t].ordinal=function(){return r},n.values.push(o),o}var r;Array.isArray(t)&&(t={values:t});var n,o=t.coerce;t.coerce=function(t,e){if(o){var i=o.call(this,t,e);void 0!==i&&(t=i)}if(null==t||t.constructor===n)return t;void 0!==r&&(t=r(t));var s=n[t];return void 0===s&&this.coercionError(t,e),s},n=c.extend(t),t.autoUpperCase?r=h:t.autoLowerCase&&(r=l);var i=n.prototype,s=t.values;return n.names=[],n.values=[],Array.isArray(s)?s.forEach(function(t,r){e(t,t,r)}):Object.keys(s).forEach(function(t,r){e(t,s[t],r)}),n.preventConstruction(),n}}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/models/Enum",function(t,e,r,n,o){"use strict";r.exports=t("/fashion-model$5.0.21/Enum")}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/models/WidgetType",function(t,e,r,n,o){"use strict";r.exports=t("/purecloud-webchat$1.0.0/src/models/Enum").create({values:["FRAME","POPUP"]})}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/models/ReconnectData",function(t,e,r,n,o){"use strict";r.exports=t("/purecloud-webchat$1.0.0/src/models/Model").extend({properties:{realtimeReconnectToken:String,conversationRoomJid:String,conversationEnded:Boolean,widgetType:t("/purecloud-webchat$1.0.0/src/models/WidgetType")}})}),$_mod_webchat.main("/fashion-model$5.0.21","Model"),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/util/cleanEntities",function(t,e,r,n,o){"use strict";function i(t){var e=[],r=!0,n=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value;e.push(s.clean(u))}}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return e}var s=t("/fashion-model$5.0.21/Model");r.exports=i}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/storage/StorageClient",function(t,e,r,n,o){"use strict";function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function n(o,i){try{var s=e[o](i),a=s.value}catch(t){return void r(t)}return s.done?void t(a):Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("/purecloud-webchat$1.0.0/src/models/ReconnectData"),c=t("/purecloud-webchat$1.0.0/src/util/cleanEntities"),l=window.location.origin,h=function(){function t(e){s(this,t),this._storageClient=e}return a(t,[{key:"storeReconnectData",value:function(t,e){return this._storageClient.store({key:"purecloud-webchatReconnectStorageData",value:t.clean(),ttl:12e4,accessors:c(e)})}},{key:"retrieveReconnectData",value:function(){function t(t){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._storageClient.retrieve({key:"purecloud-webchatReconnectStorageData",crossDomainOrigin:e||l});case 3:return r=t.sent,t.abrupt("return",u.wrap(r));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",null);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return t}()},{key:"removeReconnectData",value:function(t){return this._storageClient.remove({key:"purecloud-webchatReconnectStorageData",crossDomainOrigin:t||l})}}]),t}();r.exports=h}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/storage/index",function(t,e,r,n,o){"use strict";function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function n(o,i){try{var s=e[o](i),a=s.value}catch(t){return void r(t)}return s.done?void t(a):Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}t("/@purecloud/cross-domain-storage$1.0.0/index");var s=t("/purecloud-webchat$1.0.0/src/storage/StorageClient");e.createClient=function(){var t=i(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=window.setupStorageClient({targetUrl:e}),t.next=3,r.init();case 3:return t.abrupt("return",new s(r));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/util/url-join",function(t,e,r,n,o){"use strict";function i(t){return"/"===t.charAt(t.length-1)}r.exports=function(){for(var t=arguments,e=t.length,r=t[0],n=1;n<e;n++){var o=t[n];"/"===o.charAt(0)?i(r)&&(o=o.substring(1)):i(r)||(o="/"+o),r+=o}return r}}),$_mod_webchat.main("/purecloud-webchat$1.0.0/src/jsapi/util",""),$_mod_webchat.builtin("url","/url$0.11.0/url"),$_mod_webchat.installed("url$0.11.0","punycode","1.3.2"),$_mod_webchat.main("/punycode$1.3.2","punycode"),$_mod_webchat.def("/punycode$1.3.2/punycode",function(t,e,r,n,o){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function n(t){throw RangeError(T[t])}function o(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function s(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(R,"."),n+o(t.split("."),e).join(".")}function a(t){for(var e,r,n=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function u(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=N(t>>>10&1023|55296),t=56320|1023&t),e+=N(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:x}function l(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function h(t,e,r){var n=0;for(t=r?I(t/A):t>>1,t+=I(t/e);t>P*E>>1;n+=x)t=I(t/P);return I(n+(P+1)*t/(t+k))}function f(t){var e,r,o,i,s,a,l,f,p,d,v=[],m=t.length,g=0,y=j,b=C;for(r=t.lastIndexOf(S),r<0&&(r=0),o=0;o<r;++o)t.charCodeAt(o)>=128&&n("not-basic"),v.push(t.charCodeAt(o));for(i=r>0?r+1:0;i<m;){for(s=g,a=1,l=x;i>=m&&n("invalid-input"),f=c(t.charCodeAt(i++)),(f>=x||f>I((_-g)/a))&&n("overflow"),g+=f*a,p=l<=b?$:l>=b+E?E:l-b,!(f<p);l+=x)d=x-p,a>I(_/d)&&n("overflow"),a*=d;e=v.length+1,b=h(g-s,e,0==s),I(g/e)>_-y&&n("overflow"),y+=I(g/e),g%=e,v.splice(g++,0,y)}return u(v)}function p(t){var e,r,o,i,s,u,c,f,p,d,v,m,g,y,b,w=[];for(t=a(t),m=t.length,e=j,r=0,s=C,u=0;u<m;++u)(v=t[u])<128&&w.push(N(v));for(o=i=w.length,i&&w.push(S);o<m;){for(c=_,u=0;u<m;++u)(v=t[u])>=e&&v<c&&(c=v);for(g=o+1,c-e>I((_-r)/g)&&n("overflow"),r+=(c-e)*g,e=c,u=0;u<m;++u)if(v=t[u],v<e&&++r>_&&n("overflow"),v==e){for(f=r,p=x;d=p<=s?$:p>=s+E?E:p-s,!(f<d);p+=x)b=f-d,y=x-d,w.push(N(l(d+b%y,0))),f=I(b/y);w.push(N(l(f,0))),s=h(r,g,o==i),r=0,++o}++r,++e}return w.join("")}function d(t){return s(t,function(t){return O.test(t)?f(t.slice(4).toLowerCase()):t})}function v(t){return s(t,function(t){return L.test(t)?"xn--"+p(t):t})}var m="object"==(void 0===e?"undefined":i(e))&&e&&!e.nodeType&&e,g="object"==(void 0===r?"undefined":i(r))&&r&&!r.nodeType&&r,y="object"==("undefined"==typeof global?"undefined":i(global))&&global;y.global!==y&&y.window!==y&&y.self!==y||(t=y);var b,w,_=2147483647,x=36,$=1,E=26,k=38,A=700,C=72,j=128,S="-",O=/^xn--/,L=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=x-$,I=Math.floor,N=String.fromCharCode;if(b={version:"1.3.2",ucs2:{decode:a,encode:u},decode:f,encode:p,toASCII:v,toUnicode:d},"function"==typeof define&&"object"==i(define.amd)&&define.amd)define("punycode",function(){return b});else if(m&&g)if(r.exports==m)g.exports=b;else for(w in b)b.hasOwnProperty(w)&&(m[w]=b[w]);else t.punycode=b}(void 0)}),$_mod_webchat.def("/url$0.11.0/util",function(t,e,r,n,o){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===(void 0===t?"undefined":i(t))&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}}),$_mod_webchat.installed("url$0.11.0","querystring","0.2.0"),$_mod_webchat.main("/querystring$0.2.0",""),$_mod_webchat.def("/querystring$0.2.0/decode",function(t,e,r,n,o){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}r.exports=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var u=t.length;a>0&&u>a&&(u=a);for(var c=0;c<u;++c){var l,h,f,p,d=t[c].replace(s,"%20"),v=d.indexOf(r);v>=0?(l=d.substr(0,v),h=d.substr(v+1)):(l=d,h=""),f=decodeURIComponent(l),p=decodeURIComponent(h),i(o,f)?Array.isArray(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o}}),$_mod_webchat.def("/querystring$0.2.0/encode",function(t,e,r,n,o){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t){switch(void 0===t?"undefined":i(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};r.exports=function(t,e,r,n){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"===(void 0===t?"undefined":i(t))?Object.keys(t).map(function(n){var o=encodeURIComponent(s(n))+r;return Array.isArray(t[n])?t[n].map(function(t){return o+encodeURIComponent(s(t))}).join(e):o+encodeURIComponent(s(t[n]))}).join(e):n?encodeURIComponent(s(n))+r+encodeURIComponent(s(t)):""}}),$_mod_webchat.def("/querystring$0.2.0/index",function(t,e,r,n,o){"use strict";e.decode=e.parse=t("/querystring$0.2.0/decode"),e.encode=e.stringify=t("/querystring$0.2.0/encode")}),$_mod_webchat.def("/url$0.11.0/url",function(t,e,r,n,o){"use strict";function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function s(t,e,r){if(t&&f.isObject(t)&&t instanceof i)return t;var n=new i;return n.parse(t,e,r),n}function a(t){return f.isString(t)&&(t=s(t)),t instanceof i?t.format():i.prototype.format.call(t)}function u(t,e){return s(t,!1,!0).resolve(e)}function c(t,e){return t?s(t,!1,!0).resolveObject(e):e}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=t("/punycode$1.3.2/punycode"),f=t("/url$0.11.0/util");e.parse=s,e.resolve=u,e.resolveObject=c,e.format=a,e.Url=i;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,v=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,m=["<",">",'"',"`"," ","\r","\n","\t"],g=["{","}","|","\\","^","`"].concat(m),y=["'"].concat(g),b=["%","/","?",";","#"].concat(y),w=["/","?","#"],_=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=t("/querystring$0.2.0/index");i.prototype.parse=function(t,e,r){if(!f.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===t?"undefined":l(t)));var n=t.indexOf("?"),o=-1!==n&&n<t.indexOf("#")?"?":"#",i=t.split(o),s=/\\/g;i[0]=i[0].replace(s,"/"),t=i.join(o);var a=t;if(a=a.trim(),!r&&1===t.split("#").length){var u=v.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],this.query=e?A.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=p.exec(a);if(c){c=c[0];var d=c.toLowerCase();this.protocol=d,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===a.substr(0,2);!m||c&&E[c]||(a=a.substr(2),this.slashes=!0)}if(!E[c]&&(m||c&&!k[c])){for(var g=-1,C=0;C<w.length;C++){var j=a.indexOf(w[C]);-1!==j&&(-1===g||j<g)&&(g=j)}var S,O;O=-1===g?a.lastIndexOf("@"):a.lastIndexOf("@",g),-1!==O&&(S=a.slice(0,O),a=a.slice(O+1),this.auth=decodeURIComponent(S)),g=-1;for(var C=0;C<b.length;C++){var j=a.indexOf(b[C]);-1!==j&&(-1===g||j<g)&&(g=j)}-1===g&&(g=a.length),this.host=a.slice(0,g),a=a.slice(g),this.parseHost(),this.hostname=this.hostname||"";var L="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!L)for(var R=this.hostname.split(/\./),C=0,T=R.length;C<T;C++){var P=R[C];if(P&&!P.match(_)){for(var I="",N=0,q=P.length;N<q;N++)I+=P.charCodeAt(N)>127?"x":P[N];if(!I.match(_)){var M=R.slice(0,C),D=R.slice(C+1),U=P.match(x);U&&(M.push(U[1]),D.unshift(U[2])),D.length&&(a="/"+D.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),L||(this.hostname=h.toASCII(this.hostname));var F=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+F,this.href+=this.host,L&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!$[d])for(var C=0,T=y.length;C<T;C++){var H=y[C];if(-1!==a.indexOf(H)){var W=encodeURIComponent(H);W===H&&(W=escape(H)),a=a.split(H).join(W)}}var B=a.indexOf("#");-1!==B&&(this.hash=a.substr(B),a=a.slice(0,B));var z=a.indexOf("?");if(-1!==z?(this.search=a.substr(z),this.query=a.substr(z+1),e&&(this.query=A.parse(this.query)),a=a.slice(0,z)):e&&(this.search="",this.query={}),a&&(this.pathname=a),k[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",J=this.search||"";this.path=F+J}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&f.isObject(this.query)&&Object.keys(this.query).length&&(i=A.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||k[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+o+r+s+n},i.prototype.resolve=function(t){return this.resolveObject(s(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(f.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var r=new i,n=Object.keys(this),o=0;o<n.length;o++){var s=n[o];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var c=a[u];"protocol"!==c&&(r[c]=t[c])}return k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!k[t.protocol]){for(var l=Object.keys(t),h=0;h<l.length;h++){var p=l[h];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||E[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var v=r.pathname||"",m=r.search||"";r.path=v+m}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=y||g||r.host&&t.pathname,w=b,_=r.pathname&&r.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],x=r.protocol&&!k[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),b=b&&(""===d[0]||""===_[0])),y)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,_=d;else if(d.length)_||(_=[]),_.pop(),_=_.concat(d),r.search=t.search,r.query=t.query;else if(!f.isNullOrUndefined(t.search)){if(x){r.hostname=r.host=_.shift();var $=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");$&&(r.auth=$.shift(),r.host=r.hostname=$.shift())}return r.search=t.search,r.query=t.query,f.isNull(r.pathname)&&f.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=_.slice(-1)[0],C=(r.host||t.host||_.length>1)&&("."===A||".."===A)||""===A,j=0,S=_.length;S>=0;S--)A=_[S],"."===A?_.splice(S,1):".."===A?(_.splice(S,1),j++):j&&(_.splice(S,1),j--);if(!b&&!w)for(;j--;j)_.unshift("..");!b||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),C&&"/"!==_.join("/").substr(-1)&&_.push("");var O=""===_[0]||_[0]&&"/"===_[0].charAt(0);if(x){r.hostname=r.host=O?"":_.length?_.shift():"";var $=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");$&&(r.auth=$.shift(),r.host=r.hostname=$.shift())}return b=b||r.host&&_.length,b&&!O&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),f.isNull(r.pathname)&&f.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/jsapi/util/performAutoJoin",function(t,e,r,n,o){"use strict";function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function n(o,i){try{var s=e[o](i),a=s.value}catch(t){return void r(t)}return s.done?void t(a):Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}function s(t,e){return new Promise(function(r,n){t.renderFrame(e,function(e){e?n(e):r(t)})})}var a=t("/url$0.11.0/url");r.exports=function(){function t(t,r){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function t(e,r){var n,o,i,u,c,l,h,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getConfig(),o=a.parse(n.getWebchatAppUrl()),i=o.protocol,u=o.host,c=i+"//"+u,l=e.getStorageClient(),t.next=6,l.retrieveReconnectData(c);case 6:if(h=t.sent){t.next=9;break}return t.abrupt("return",!1);case 9:if(!h.getConversationEnded()){t.next=11;break}return t.abrupt("return",!1);case 11:if(h.getRealtimeReconnectToken()){t.next=13;break}return t.abrupt("return",!1);case 13:if(!((f=h.getWidgetType())&&f.isFrame()&&r)){t.next=19;break}return n.setReconnectData(h),t.next=18,s(e,r);case 18:return t.abrupt("return",!0);case 19:return t.abrupt("return",!1);case 20:case"end":return t.stop()}},t,this)}));return t}()}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/jsapi/util/index",function(t,e,r,n,o){"use strict";var i=t("/purecloud-webchat$1.0.0/src/jsapi/util/performAutoJoin");r.exports={performAutoJoin:i}}),$_mod_webchat.main("/purecloud-webchat$1.0.0/src/logging",""),$_mod_webchat.installed("purecloud-webchat$1.0.0","raptor-logging","1.1.3"),$_mod_webchat.main("/raptor-logging$1.1.3","lib/index"),$_mod_webchat.builtin("process","/process$0.6.0/browser"),$_mod_webchat.def("/process$0.6.0/browser",function(t,e,r,n,o){"use strict";function i(){}var s=r.exports={};s.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;(e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)&&r.shift()()},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=i,s.once=i,s.off=i,s.emit=i,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")}}),$_mod_webchat.installed("raptor-logging$1.1.3","raptor-polyfill","1.0.2"),$_mod_webchat.def("/raptor-polyfill$1.0.2/string/startsWith",function(t,e,r,n,o){"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(t,e){var r=this;return e&&(r=r.substring(e)),!(r.length<t.length)&&r.substring(0,t.length)==t})}),$_mod_webchat.def("/raptor-logging$1.1.3/lib/Logger",function(t,e,r,n,o){"use strict";function i(t,e,r){this.logger=t,this.logLevel=e,this.args=c.call(r)}function s(t,e,r){this._loggingModifiedFlag=a._modifiedFlag,this._loggerName=e,this._level=t.logLevel.level,this._appenders=r}var a,u,c=[].slice;i.prototype.getLoggerName=function(){return this.logger._loggerName},s.setLogging=function(t){a=t},s.setLogLevel=function(t){u=t},s.prototype={_loggerName:void 0,_level:void 0,_appenders:void 0,_update:function(){this._loggingModifiedFlag!==a._modifiedFlag&&s.call(this,a.getLoggerConfig(this._loggerName),this._loggerName,a.getAppenders())},getLogLevel:function(){return u.toLogLevel(this._level)},getLevel:function(){return this._update(),
this._level},isTraceEnabled:function(){return this._update(),0===this._level},isDebugEnabled:function(){return this._update(),this._level<=1},isInfoEnabled:function(){return this._update(),this._level<=2},isWarnEnabled:function(){return this._update(),this._level<=3},isErrorEnabled:function(){return this._update(),this._level<=4},isFatalEnabled:function(){return this._update(),this._level<=5},dump:function(t,e,r){if(this._update(),!(this._level>1))for(var n=0,o=this._appenders.length;n<o;n++){var i=this._appenders[n];i&&i.dump&&i.dump(t,e,r)}},trace:function(){this._update(),this._level>0||this._log(new i(this,u.TRACE,arguments))},debug:function(){this._update(),this._level>1||this._log(new i(this,u.DEBUG,arguments))},info:function(){this._update(),this._level>2||this._log(new i(this,u.INFO,arguments))},warn:function(){this._update(),this._level>3||this._log(new i(this,u.WARN,arguments))},error:function(){this._update(),this._level>4||this._log(new i(this,u.ERROR,arguments))},fatal:function(){this._update(),this._level>5||this._log(new i(this,u.FATAL,arguments))},_log:function(t){for(var e=0,r=this._appenders.length;e<r;e++)this._appenders[e].log(t)}},r.exports=s}),$_mod_webchat.installed("raptor-logging$1.1.3","raptor-stacktraces","1.0.1"),$_mod_webchat.main("/raptor-stacktraces$1.0.1","lib/raptor-stacktraces"),$_mod_webchat.def("/raptor-stacktraces$1.0.1/lib/raptor-stacktraces",function(t,e,r,n,o){"use strict";e.trace=function(t){for(var e=[];t;)e.push((t.stack||t.message||t).toString()),(t=t._cause)&&e.push("\n\nCaused by:\n");return e.join("")}}),$_mod_webchat.def("/raptor-logging$1.1.3/lib/ConsoleAppender",function(t,e,r,n,o){"use strict";function i(e){var r=t("/raptor-stacktraces$1.0.1/lib/raptor-stacktraces");return r&&r.trace?r.trace(e):e||""}function s(){}var a=function(){return"undefined"==typeof console?null:console.log.apply&&console.log.call?console:null}(),u=a?null:function(){};s.prototype={log:a?function(t){var e=t.logLevel,r=a[e.methodName]||a.log;if(r)try{for(var n,o=t.args.slice(0),s=o.length,u=0;u<s-1;u++){var c=o[u];c instanceof Error&&(o[u]=i(c))}var l=o[s-1];l instanceof Error&&(n=l,o[s-1]="");var h=[e.name+" "+t.getLoggerName()+":"].concat(o);if(r.apply(a,h),n){r.call(a,n.stack||n.toString());for(var f=n._cause;f;)r.call(a,"Caused by:"),r.call(a,f.stack||f.toString()),f=f._cause}if(0===e.level)if(a.trace)a.trace();else{var p=i();p&&a.log&&a.log(p)}}catch(t){r=a.error||r,r.call(a,t)}}:u,dump:a?function(t,e){console.debug&&(console.log((e?"DUMP "+e:"DUMP")+":"),console.debug(t))}:u},r.exports=s}),$_mod_webchat.remap("/raptor-logging$1.1.3/lib/resolveLoggerName","/raptor-logging$1.1.3/lib/resolveLoggerName-browser"),$_mod_webchat.def("/raptor-logging$1.1.3/lib/resolveLoggerName-browser",function(t,e,r,n,o){"use strict";r.exports=function(t){return t?"string"==typeof t?t:t.id||t.toString():""}}),$_mod_webchat.def("/raptor-logging$1.1.3/lib/raptor-logging",function(t,e,r,n,o){"use strict";var i=t("process"),s=function(){return!1},a={isTraceEnabled:s,isDebugEnabled:s,isInfoEnabled:s,isWarnEnabled:s,isErrorEnabled:s,isFatalEnabled:s,dump:s,trace:s,debug:s,info:s,warn:s,error:s,fatal:s},u={logger:function(){return a},configure:s,voidLogger:a};if(r.exports=u,!i.browser){var c;try{c=t.resolve("./raptor-logging-impl")}catch(t){}c&&t(c)}}),$_mod_webchat.def("/raptor-logging$1.1.3/lib/raptor-logging-impl",function(t,e,r,n,o){"use strict";function i(t){return t&&t.toUpperCase?v[t.toUpperCase()]||v.TRACE:v.TRACE}function s(t,e){var r;r="string"==typeof e?e:e.levelName||e.level;var n={levelName:r,loggerName:t.replace(/\./g,"/"),logLevel:i(r)};g[t]=n,"ROOT"===t&&(f=n)}function a(t,e){return e.loggerName.length-t.loggerName.length}function u(){h=[];for(var t in g)g.hasOwnProperty(t)&&h.push(g[t]);h.sort(a)}var c=t("process"),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t("/raptor-polyfill$1.0.2/string/startsWith");for(var h,f,p=t("/raptor-logging$1.1.3/lib/Logger"),d=["TRACE","DEBUG","INFO","WARN","ERROR","FATAL","OFF"],v={},m=[],g={},y=t("/raptor-logging$1.1.3/lib/ConsoleAppender"),b=void 0!==c?c.env:null,w=t("/raptor-logging$1.1.3/lib/resolveLoggerName-browser"),_=0;_<d.length;_++){var x=d[_];v[x]=function(t,e){return{name:t,level:e,methodName:t.toLowerCase(),toString:function(){return t}}}(x,_)}v.toLogLevel=function(t){return t.constructor===String?this[t]:this[d[t]]},p.setLogLevel(v);var $={_modifiedFlag:0,LogLevel:v,getLoggerConfig:function(t){for(var e,r,n=0,o=h.length;n<o;n++)if(e=h[n],r=e.loggerName,t.startsWith(r))return e;return f},getLoggerConfigs:function(){return h},getAppenders:function(){return m},addAppender:function(t){m.push(t)},configureAppenders:function(t){m=t,$._modifiedFlag++},logger:function(t){if("object"===(void 0===t?"undefined":l(t))){var e=t.filename||t.id;if(!e)throw new Error("Invalid logger object. It must contain either a `filename` or `id` property.");t=w(e)}return new p(this.getLoggerConfig(t),t,m)},configureLogger:function(t,e){s(t,e),u(),$._modifiedFlag++},configureLoggers:function(t){var e=g;g={};var r=!1;for(var n in t)t.hasOwnProperty(n)&&("ROOT"===n&&(r=!0),s(n,t[n]));if(r||s("ROOT","WARN"),b){var o=function(t){var e=b[t]||b[t.toLowerCase()];e&&e.split(/\s*[,]\s*/).forEach(function(e){s(e,t)})};o("TRACE"),o("DEBUG"),o("INFO"),o("WARN"),o("ERROR"),o("FATAL")}return u(),$._modifiedFlag++,e},configure:function(t){t&&(t.appenders&&this.configureAppenders(t.appenders),t.loggers&&this.configureLoggers(t.loggers))},ConsoleAppender:y,toString:function(){return"[raptor-logging]"}};p.setLogging($),$.configure({loggers:{ROOT:{level:"WARN"}}}),"undefined"!=typeof console&&$.addAppender(new y);var E=t("/raptor-logging$1.1.3/lib/raptor-logging");for(var k in $)$.hasOwnProperty(k)&&(E[k]=$[k])}),$_mod_webchat.run("/raptor-logging$1.1.3/lib/raptor-logging-impl"),$_mod_webchat.def("/raptor-logging$1.1.3/lib/index",function(t,e,r,n,o){"use strict";var i="undefined"==typeof window?global:window;r.exports=i.__RAPTOR_LOGGING||(i.__RAPTOR_LOGGING=t("/raptor-logging$1.1.3/lib/raptor-logging"))}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/logging/index",function(t,e,r,n,o){"use strict";var i=t("/raptor-logging$1.1.3/lib/index");e.configure=function(t){i.configure(t)},e.logger=function(t){var e=void 0;return"string"==typeof t?e=t:(t=t||r,e=t.filename,e.startsWith("/src/")&&(e=e.substring("/src/".length))),i.logger(e)}}),$_mod_webchat.installed("purecloud-webchat$1.0.0","raptor-async","1.1.3"),$_mod_webchat.def("/raptor-async$1.1.3/AsyncValue",function(t,e,r,n,o){"use strict";function i(t){this.data=void 0,this.error=void 0,this._callbacks=void 0,this._state=h,this._timestamp=void 0,t&&(this._loader=t.loader,this._scope=t.scope,this._ttl=t.ttl||void 0)}function s(t,e,r){var n=t._callbacks;if(void 0!==n){t._callbacks=void 0;for(var o=0;o<n.length;o++){var i=n[o];i.callback.call(i.scope,e,r)}}}function a(t){t._state=f,t._loader.call(t._scope||t,function(e,r){e?t.reject(e):t.resolve(r)})}function u(t,e,r){void 0===t._callbacks&&(t._callbacks=[]),t._callbacks.push({callback:e,scope:r||t._scope||t})}function c(t){var e=t._ttl;return void 0!==e&&p()-t._timestamp>e&&(t.unsettle(),!0)}var l=t("process"),h=0,f=1,p=Date.now||function(){return(new Date).getTime()};i.prototype={isResolved:function(){return 2===this._state&&!c(this)},isRejected:function(){return 3===this._state&&!c(this)},isLoading:function(){return this._state===f},isSettled:function(){return this._state>f&&!c(this)},load:function(t,e){if(!this._loader)throw new Error("Cannot call load when loader is not configured");return this.isSettled()&&this.unsettle(),t&&u(this,t,e),this._state!==f&&a(this),this.data},done:function(t,e){if(!t||t.constructor!==Function)throw new Error("Invalid callback: "+t);return this.isSettled()?t.call(e||this._scope||this,this.error,this.data):(l.domain&&(t=l.domain.bind(t)),u(this,t,e),this._loader&&this._state!==f&&a(this),void 0)},reject:function(t){this.error=t,this.data=void 0,void 0!==this._ttl&&(this._timestamp=p()),this._state=this._loader?h:3,s(this,t,null)},resolve:function(t){this.error=void 0,this.data=t,void 0!==this._ttl&&(this._timestamp=p()),this._state=2,s(this,null,t)},reset:function(){this.unsettle(),this.callbacks=void 0},unsettle:function(){this._state=h,this.error=void 0,this.data=void 0,this._timestamp=void 0}},i.create=function(t){return new i(t)},r.exports=i}),$_mod_webchat.def("/purecloud-webchat$1.0.0/src/jsapi/v1",function(t,e,r,n,o){"use strict";function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function n(o,i){try{var s=e[o](i),a=s.value}catch(t){return void r(t)}return s.done?void t(a):Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}function s(t){return new Promise(function(e,r){v.done(function(n,o){if(n)return r(n);var i=new o({config:t}),s=void 0;s="string"==typeof t.containerEl?document.getElementById(t.containerEl):t.containerEl instanceof HTMLElement?t.containerEl:document.getElementById("security-key-prompt"),i.renderSecurityKeyPromptForm({containerEl:s}),i.once(o.SUCCESS,function(t){i.close(),e(t)}),i.once(o.FAIL,function(t){i.close(),r(t)})})})}var a=function(){var e=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){t("/lasso-loader$3.0.2/src/index").async("_7d83a0",function(n){return n?r(n):void e(t("/purecloud-webchat$1.0.0/src/jsapi/Webchat"))})}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t("/lasso-loader$3.0.2/src/index").setTimeout(1e4);var u=t("/webrtcsupport$2.2.0/index-browser"),c=window.ININ=window.ININ||{},l=t("/purecloud-webchat$1.0.0/src/storage/index"),h=t("/purecloud-webchat$1.0.0/src/util/url-join"),f=t("/purecloud-webchat$1.0.0/src/jsapi/util/index"),p=t("/purecloud-webchat$1.0.0/src/logging/index").logger(r);c.webchat={create:function(){function t(t,r){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function t(e,r){var n,o,i,s,u,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a();case 3:if(n=t.sent,o=[],e=n.parseConfig(e,o),!o.length){t.next=8;break}throw new Error("Invalid configuration: "+o.join(", "));case 8:return i=h(e.getWebchatAppUrl(),"storage")+"/",t.next=11,l.createClient(i);case 11:if(s=t.sent,u=new n({config:e,storageClient:s}),c=window.PURECLOUD_WEBCHAT_FRAME_CONFIG,!e.getReconnectEnabled()){t.next=25;break}return t.prev=15,t.next=18,f.performAutoJoin(u,c);case 18:d=t.sent,u.setAutoJoined(d),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(15),p.error("Unable to perform auto join",t.t0);case 25:if(!r){t.next=27;break}return t.abrupt("return",r(null,u));case 27:return t.abrupt("return",u);case 30:if(t.prev=30,t.t1=t.catch(0),!r){t.next=34;break}return t.abrupt("return",r(t.t1));case 34:throw t.t1;case 35:case"end":return t.stop()}},t,this,[[0,30],[15,22]])}));return t}()};var d=t("/raptor-async$1.1.3/AsyncValue").create({loader:function(e){t("/lasso-loader$3.0.2/src/index").async("_9823a6",function(r){return r?e(r):void e(null,t("/purecloud-webchat$1.0.0/src/jsapi/Screenshare"))})}}),v=t("/raptor-async$1.1.3/AsyncValue").create({loader:function(e){t("/lasso-loader$3.0.2/src/index").async("_1013f0",function(r){return r?e(r):void e(null,t("/purecloud-webchat$1.0.0/src/jsapi/SecurityKeyPrompt"))})}});c.cobrowse={create:function(t,e){return(t.promptForSecurityKey?s(t):Promise.resolve(void 0)).then(function(e){var r=e.conversationId,n=e.sourceCommunicationId;return delete t.promptForSecurityKey,t.conversationId=r,t.participant={sourceCommunicationId:n},window.PureCloud.cobrowse.startSharing(t)}).catch(function(t){if(e)return e(t);throw t}).then(function(t){return e?e(null,t):t})}},c.screenshare={create:function(t,e){if(!u.supportRTCPeerConnection||!u.supportGetUserMedia||!u.supportScreenSharing){var r=new Error("Unsupported Browser");return r.name="UNSUPPORTED_BROWSER",r.details=u,e(r)}d.done(function(r,n){if(r)return e(r);var o=[];return t=n.parseConfig(t,o),o.length?e(new Error("Invalid configuration: "+o.join(", "))):void e(null,new n({config:t}))})}}}),$_mod_webchat.run("/purecloud-webchat$1.0.0/src/jsapi/v1",{wait:!1}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.superagent=t()}}(function(){return function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return o(r?r:t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,r){function n(t){var e=o(t)?Object.prototype.toString.call(t):"";return"[object Function]"===e}var o=t("./is-object");e.exports=n},{"./is-object":2}],2:[function(t,e,r){function n(t){return null!==t&&"object"==typeof t}e.exports=n},{}],3:[function(t,e,r){function n(t){if(t)return o(t)}function o(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}var i=t("./is-object");e.exports=n,n.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},n.prototype.parse=function(t){return this._parser=t,this},n.prototype.serialize=function(t){return this._serializer=t,this},n.prototype.timeout=function(t){return this._timeout=t,this},n.prototype.then=function(t,e){if(!this._fullfilledPromise){var r=this;this._fullfilledPromise=new Promise(function(t,e){r.end(function(r,n){r?e(r):t(n)})})}return this._fullfilledPromise.then(t,e)},n.prototype.catch=function(t){return this.then(void 0,t)},n.prototype.use=function(t){return t(this),this},n.prototype.get=function(t){return this._header[t.toLowerCase()]},n.prototype.getHeader=n.prototype.get,n.prototype.set=function(t,e){if(i(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},n.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},n.prototype.field=function(t,e){if(null===t||void 0===t)throw new Error(".field(name, val) name can not be empty");if(i(t)){for(var r in t)this.field(r,t[r]);return this}if(Array.isArray(e)){for(var n in e)this.field(t,e[n]);return this}if(null===e||void 0===e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=""+e),this._getFormData().append(t,e),this},n.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},n.prototype.withCredentials=function(){return this._withCredentials=!0,this},n.prototype.redirects=function(t){return this._maxRedirects=t,this},n.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n.prototype.send=function(t){var e=i(t),r=this._header["content-type"];if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(e&&i(this._data))for(var n in t)this._data[n]=t[n];else"string"==typeof t?(r||this.type("form"),r=this._header["content-type"],"application/x-www-form-urlencoded"==r?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(r||this.type("json"),this)},n.prototype.sortQuery=function(t){return this._sort="undefined"==typeof t||t,this}},{"./is-object":2}],4:[function(t,e,r){function n(t){if(t)return o(t)}function o(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}"undefined"!=typeof e&&(e.exports=n),n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],5:[function(t,e,r){function n(){}function o(t){if(!g(t))return t;var e=[];for(var r in t)i(e,r,t[r]);return e.join("&")}function i(t,e,r){if(null!=r)if(Array.isArray(r))r.forEach(function(r){i(t,e,r)});else if(g(r))for(var n in r)i(t,e+"["+n+"]",r[n]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));else null===r&&t.push(encodeURIComponent(e))}function s(t){for(var e,r,n={},o=t.split("&"),i=0,s=o.length;i<s;++i)e=o[i],r=e.indexOf("="),r==-1?n[decodeURIComponent(e)]="":n[decodeURIComponent(e.slice(0,r))]=decodeURIComponent(e.slice(r+1));return n}function a(t){var e,r,n,o,i=t.split(/\r?\n/),s={};i.pop();for(var a=0,u=i.length;a<u;++a)r=i[a],e=r.indexOf(":"),n=r.slice(0,e).toLowerCase(),o=w(r.slice(e+1)),s[n]=o;return s}function u(t){return/[\/+]json\b/.test(t)}function c(t){return t.split(/ *; */).shift()}function l(t){return t.split(/ *; */).reduce(function(t,e){var r=e.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(t[n]=o),t},{})}function h(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this._setStatusProperties(this.xhr.status),this.header=this.headers=a(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function f(t,e){var r=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new h(r)}catch(e){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=e,r.xhr?(t.rawResponse="undefined"==typeof r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.statusCode=r.xhr.status?r.xhr.status:null):(t.rawResponse=null,t.statusCode=null),r.callback(t)}r.emit("response",e);var n;try{(e.status<200||e.status>=300)&&(n=new Error(e.statusText||"Unsuccessful HTTP response"),n.original=t,n.response=e,n.status=e.status)}catch(t){n=t}n?r.callback(n,e):r.callback(null,e)})}function p(t,e){var r=b("DELETE",t);return e&&r.end(e),r}var d;"undefined"!=typeof window?d=window:"undefined"!=typeof self?d=self:(console.warn("Using browser-only version of superagent in non-browser environment"),d=this);var v=t("emitter"),m=t("./request-base"),g=t("./is-object"),y=t("./is-function"),b=r=e.exports=function(t,e){return"function"==typeof e?new r.Request("GET",t).end(e):1==arguments.length?new r.Request("GET",t):new r.Request(t,e)};r.Request=f,b.getXHR=function(){if(!(!d.XMLHttpRequest||d.location&&"file:"==d.location.protocol&&d.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only verison of superagent could not find XHR")};var w="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};b.serializeObject=o,b.parseString=s,b.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},h.prototype.get=function(t){return this.header[t.toLowerCase()]},h.prototype._setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=c(e);var r=l(e);for(var n in r)this[n]=r[n]},h.prototype._parseBody=function(t){var e=b.parse[this.type];return!e&&u(this.type)&&(e=b.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null},h.prototype._setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},h.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,n="cannot "+e+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=e,o.url=r,o},b.Response=h,v(f.prototype),m(f.prototype),f.prototype.type=function(t){return this.set("Content-Type",b.types[t]||t),this},f.prototype.responseType=function(t){return this._responseType=t,this},f.prototype.accept=function(t){return this.set("Accept",b.types[t]||t),this},f.prototype.auth=function(t,e,r){switch(r||(r={type:"basic"}),r.type){case"basic":var n=btoa(t+":"+e);this.set("Authorization","Basic "+n);break;case"auto":this.username=t,this.password=e}return this},f.prototype.query=function(t){return"string"!=typeof t&&(t=o(t)),t&&this._query.push(t),this},f.prototype.attach=function(t,e,r){if(this._data)throw Error("superagent can't mix .send() and .attach()");return this._getFormData().append(t,e,r||e.name),this},f.prototype._getFormData=function(){return this._formData||(this._formData=new d.FormData),this._formData},f.prototype.callback=function(t,e){var r=this._callback;this.clearTimeout(),t&&this.emit("error",t),r(t,e)},f.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},f.prototype.buffer=f.prototype.ca=f.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},f.prototype.pipe=f.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},f.prototype._timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},f.prototype._appendQueryString=function(){var t=this._query.join("&");t&&(this.url+=~this.url.indexOf("?")?"&"+t:"?"+t)},f.prototype._isHost=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},f.prototype.end=function(t){var e=this,r=this.xhr=b.getXHR(),o=this._timeout,i=this._formData||this._data;this._callback=t||n,r.onreadystatechange=function(){if(4==r.readyState){var t;try{t=r.status}catch(e){t=0}if(0==t){if(e.timedout)return e._timeoutError();if(e._aborted)return;return e.crossDomainError()}e.emit("end")}};var s=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{r.onprogress=s.bind(null,"download"),r.upload&&(r.upload.onprogress=s.bind(null,"upload"))}catch(t){}if(o&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},o)),this._appendQueryString(),this._sort){var a=this.url.indexOf("?");if(~a){var c=this.url.substring(a+1).split("&");y(this._sort)?c.sort(this._sort):c.sort()}this.url=this.url.substring(0,a)+"?"+c.join("&")}if(this.username&&this.password?r.open(this.method,this.url,!0,this.username,this.password):r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof i&&!this._isHost(i)){var l=this._header["content-type"],h=this._serializer||b.serialize[l?l.split(";")[0]:""];!h&&u(l)&&(h=b.serialize["application/json"]),h&&(i=h(i))}for(var f in this.header)null!=this.header[f]&&r.setRequestHeader(f,this.header[f]);return this._responseType&&(r.responseType=this._responseType),this.emit("request",this),r.send("undefined"!=typeof i?i:null),this},b.get=function(t,e,r){var n=b("GET",t);return"function"==typeof e&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n},b.head=function(t,e,r){var n=b("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},b.options=function(t,e,r){var n=b("OPTIONS",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},b.del=p,b.delete=p,b.patch=function(t,e,r){var n=b("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},b.post=function(t,e,r){var n=b("POST",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},b.put=function(t,e,r){var n=b("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n}},{"./is-function":1,"./is-object":2,"./request-base":3,emitter:4}]},{},[5])(5)}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["superagent"],e):"object"==typeof module&&module.exports?module.exports=e(require("superagent")):t.ApiManagerLib=e(t.superagent)}(this,function(t){"use strict";var e="//purecloudintegration.luxottica.com/node/luxottica_purecloud_customer_server",r="normal",n=function(){var t=this;this.setServiceHost=function(t){e=t},this.setAvailabilityType=function(t){r=t},this.startChat=function(e,n,o){if(!e)throw new Error("missing data config parameter");if("function"!=typeof n)throw new Error("missing unavailable callback");o=o||{width:400,height:400,title:"Chat"},this.getConfiguration(e,function(i,s){t.agentAvailability(i.queueName,r,e.Language,function(r){if(r.agentsAvailable){if("undefined"==typeof ININ)throw new Error("missing ININ library");ININ.webchat.create(i,function(t,e){t&&n(t),e.renderPopup(o),n("OK")})}else n(t.getMessage(e,s,"AGENT_NOT_AVAILABLE"))},function(r){n(t.getMessage(e,s,"AGENT_NOT_AVAILABLE"))})})}};return n.prototype.agentAvailability=function(r,n,o,i,s){if("string"!=typeof r)throw new Error("missing queueName parameter");var a=e+"/queues/"+r;"withSkill"===n&&(a=e+"/queues/"+r+"/languages/"+o),t.get(a).set("Content-Type","application/json").accept("json").end(function(t,e){t?s(e.body):i(e.body)})},n.prototype.callMeBack=function(r,o){if(console.log("Sending callMeBack request..."),!r)throw new Error("missing data config parameter");if(!r.DateAndHour)throw new Error("missing DateAndHour parameter");this.getConfiguration(r,function(i,s){n.prototype.getBrands(function(s){var a=s[r.BrandCode],u="queuename."+r.Country+".O."+r.InquiryId+"."+r.Language;r.queueName=n.prototype.getQueue(a,u),r.InquiryType=i.data.customField3.split(":")[1],r.Priority=i.priority,r.Skill=i.skills,r.ISOLanguage=r.Language,r.Language=i.data.customField1,r.Brand=a.brandName,r.Country=i.data.addressState,console.log(r),t.post(e+"/callbacks").set("Content-Type","application/json").send(r).accept("json").end(function(t,e){o(t?{returnCode:-1,errorDescription:t}:e.body)}),console.log("callMeBack request sent!")})})},n.prototype.getBrands=function(r){t.get(e+"/brands").set("Content-Type","application/json").accept("json").end(function(t,e){t||r(e.body)})},n.prototype.getQueue=function(t,e){function r(e,o){for(var i=0,s=e.length;i<s;i++)if(o===e[i])return void(n=t.queues[e[i]]);var a=o.substring(0,o.lastIndexOf("."));a&&r(Object.keys(t.queues),a)}var n="";return r(Object.keys(t.queues),e),n},n.prototype.getConfiguration=function(r,n){t.post(e+"/configuration").set("Content-Type","application/json").send(r).accept("json").end(function(t,e){t?console.log(e.body.error):e.body&&(e.body.chatConfig?n(e.body.chatConfig,e.body.brand):console.log("missing chatConfig"))})},n.prototype.getMessage=function(t,e,r){return e.langs[t.Language].messages[r]},n});